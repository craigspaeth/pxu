module.exports=__NEXT_REGISTER_PAGE("/",function(){var t=webpackJsonp([2],{13:function(t,e,r){t.exports=r(184)},182:function(t,e,r){t.exports=r(183)},183:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=r(13);var i=r.n(n);var a=r(2);var o=r.n(a);if(void 0===Number.EPSILON)Number.EPSILON=Math.pow(2,-52);if(void 0===Number.isInteger)Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t};if(void 0===Math.sign)Math.sign=function(t){return t<0?-1:t>0?1:+t};if("name"in Function.prototype===false)Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});if(void 0===Object.assign)(function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");var e=Object(t);for(var r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n)for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i))e[i]=n[i]}return e}})();function s(){}Object.assign(s.prototype,{addEventListener:function(t,e){if(void 0===this._listeners)this._listeners={};var r=this._listeners;if(void 0===r[t])r[t]=[];if(-1===r[t].indexOf(e))r[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return false;var r=this._listeners;return void 0!==r[t]&&-1!==r[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return;var r=this._listeners;var n=r[t];if(void 0!==n){var i=n.indexOf(e);if(-1!==i)n.splice(i,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;var e=this._listeners;var r=e[t.type];if(void 0!==r){t.target=this;var n=r.slice(0);for(var i=0,a=n.length;i<a;i++)n[i].call(this,t)}}});var u="90";var c={LEFT:0,MIDDLE:1,RIGHT:2};var l=0;var h=1;var f=2;var p=3;var d=0;var v=1;var m=0;var g=1;var y=2;var x=0;var _=1;var b=2;var w=1;var M=2;var E=0;var S=1;var T=2;var A=0;var R=1;var L=2;var C=3;var P=4;var I=5;var O=100;var N=101;var U=102;var D=103;var z=104;var B=200;var F=201;var k=202;var H=203;var j=204;var G=205;var V=206;var W=207;var X=208;var q=209;var Y=210;var Z=0;var J=1;var Q=2;var K=3;var $=4;var tt=5;var et=6;var rt=7;var nt=0;var it=1;var at=2;var ot=0;var st=1;var ut=2;var ct=3;var lt=4;var ht=300;var ft=301;var pt=302;var dt=303;var vt=304;var mt=305;var gt=306;var yt=307;var xt=1e3;var _t=1001;var bt=1002;var wt=1003;var Mt=1004;var Et=1005;var St=1006;var Tt=1007;var At=1008;var Rt=1009;var Lt=1010;var Ct=1011;var Pt=1012;var It=1013;var Ot=1014;var Nt=1015;var Ut=1016;var Dt=1017;var zt=1018;var Bt=1019;var Ft=1020;var kt=1021;var Ht=1022;var jt=1023;var Gt=1024;var Vt=1025;var Wt=jt;var Xt=1026;var qt=1027;var Yt=33776;var Zt=33777;var Jt=33778;var Qt=33779;var Kt=35840;var $t=35841;var te=35842;var ee=35843;var re=36196;var ne=37808;var ie=37809;var ae=37810;var oe=37811;var se=37812;var ue=37813;var ce=37814;var le=37815;var he=37816;var fe=37817;var pe=37818;var de=37819;var ve=37820;var me=37821;var ge=2200;var ye=2201;var xe=2202;var _e=2300;var be=2301;var we=2302;var Me=2400;var Ee=2401;var Se=2402;var Te=0;var Ae=1;var Re=2;var Le=3e3;var Ce=3001;var Pe=3007;var Ie=3002;var Oe=3003;var Ne=3004;var Ue=3005;var De=3006;var ze=3200;var Be=3201;var Fe={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=[];for(var e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16).toUpperCase();return function e(){var r=4294967295*Math.random()|0;var n=4294967295*Math.random()|0;var i=4294967295*Math.random()|0;var a=4294967295*Math.random()|0;return t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&i|128]+t[i>>8&255]+"-"+t[i>>16&255]+t[i>>24&255]+t[255&a]+t[a>>8&255]+t[a>>16&255]+t[a>>24&255]}}(),clamp:function(t,e,r){return Math.max(e,Math.min(r,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)},lerp:function(t,e,r){return(1-r)*t+r*e},smoothstep:function(t,e,r){if(t<=e)return 0;if(t>=r)return 1;t=(t-e)/(r-e);return t*t*(3-2*t)},smootherstep:function(t,e,r){if(t<=e)return 0;if(t>=r)return 1;t=(t-e)/(r-e);return t*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Fe.DEG2RAD},radToDeg:function(t){return t*Fe.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function ke(t,e){this.x=t||0;this.y=e||0}Object.defineProperties(ke.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}});Object.assign(ke.prototype,{isVector2:true,set:function(t,e){this.x=t;this.y=e;return this},setScalar:function(t){this.x=t;this.y=t;return this},setX:function(t){this.x=t;return this},setY:function(t){this.y=t;return this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){this.x=t.x;this.y=t.y;return this},add:function(t,e){if(void 0!==e){console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(t,e)}this.x+=t.x;this.y+=t.y;return this},addScalar:function(t){this.x+=t;this.y+=t;return this},addVectors:function(t,e){this.x=t.x+e.x;this.y=t.y+e.y;return this},addScaledVector:function(t,e){this.x+=t.x*e;this.y+=t.y*e;return this},sub:function(t,e){if(void 0!==e){console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(t,e)}this.x-=t.x;this.y-=t.y;return this},subScalar:function(t){this.x-=t;this.y-=t;return this},subVectors:function(t,e){this.x=t.x-e.x;this.y=t.y-e.y;return this},multiply:function(t){this.x*=t.x;this.y*=t.y;return this},multiplyScalar:function(t){this.x*=t;this.y*=t;return this},divide:function(t){this.x/=t.x;this.y/=t.y;return this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,r=this.y;var n=t.elements;this.x=n[0]*e+n[3]*r+n[6];this.y=n[1]*e+n[4]*r+n[7];return this},min:function(t){this.x=Math.min(this.x,t.x);this.y=Math.min(this.y,t.y);return this},max:function(t){this.x=Math.max(this.x,t.x);this.y=Math.max(this.y,t.y);return this},clamp:function(t,e){this.x=Math.max(t.x,Math.min(e.x,this.x));this.y=Math.max(t.y,Math.min(e.y,this.y));return this},clampScalar:function(){var t=new ke;var e=new ke;return function r(n,i){t.set(n,n);e.set(i,i);return this.clamp(t,e)}}(),clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);if(t<0)t+=2*Math.PI;return t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){this.x+=(t.x-this.x)*e;this.y+=(t.y-this.y)*e;return this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){if(void 0===e)e=0;this.x=t[e];this.y=t[e+1];return this},toArray:function(t,e){if(void 0===t)t=[];if(void 0===e)e=0;t[e]=this.x;t[e+1]=this.y;return t},fromBufferAttribute:function(t,e,r){if(void 0!==r)console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=t.getX(e);this.y=t.getY(e);return this},rotateAround:function(t,e){var r=Math.cos(e),n=Math.sin(e);var i=this.x-t.x;var a=this.y-t.y;this.x=i*r-a*n+t.x;this.y=i*n+a*r+t.y;return this}});function He(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];if(arguments.length>0)console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(He.prototype,{isMatrix4:true,set:function(t,e,r,n,i,a,o,s,u,c,l,h,f,p,d,v){var m=this.elements;m[0]=t;m[4]=e;m[8]=r;m[12]=n;m[1]=i;m[5]=a;m[9]=o;m[13]=s;m[2]=u;m[6]=c;m[10]=l;m[14]=h;m[3]=f;m[7]=p;m[11]=d;m[15]=v;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new He).fromArray(this.elements)},copy:function(t){var e=this.elements;var r=t.elements;e[0]=r[0];e[1]=r[1];e[2]=r[2];e[3]=r[3];e[4]=r[4];e[5]=r[5];e[6]=r[6];e[7]=r[7];e[8]=r[8];e[9]=r[9];e[10]=r[10];e[11]=r[11];e[12]=r[12];e[13]=r[13];e[14]=r[14];e[15]=r[15];return this},copyPosition:function(t){var e=this.elements,r=t.elements;e[12]=r[12];e[13]=r[13];e[14]=r[14];return this},extractBasis:function(t,e,r){t.setFromMatrixColumn(this,0);e.setFromMatrixColumn(this,1);r.setFromMatrixColumn(this,2);return this},makeBasis:function(t,e,r){this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1);return this},extractRotation:function(){var t=new Ge;return function e(r){var n=this.elements;var i=r.elements;var a=1/t.setFromMatrixColumn(r,0).length();var o=1/t.setFromMatrixColumn(r,1).length();var s=1/t.setFromMatrixColumn(r,2).length();n[0]=i[0]*a;n[1]=i[1]*a;n[2]=i[2]*a;n[4]=i[4]*o;n[5]=i[5]*o;n[6]=i[6]*o;n[8]=i[8]*s;n[9]=i[9]*s;n[10]=i[10]*s;return this}}(),makeRotationFromEuler:function(t){if(!(t&&t.isEuler))console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements;var r=t.x,n=t.y,i=t.z;var a=Math.cos(r),o=Math.sin(r);var s=Math.cos(n),u=Math.sin(n);var c=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){var h=a*c,f=a*l,p=o*c,d=o*l;e[0]=s*c;e[4]=-s*l;e[8]=u;e[1]=f+p*u;e[5]=h-d*u;e[9]=-o*s;e[2]=d-h*u;e[6]=p+f*u;e[10]=a*s}else if("YXZ"===t.order){var v=s*c,m=s*l,g=u*c,y=u*l;e[0]=v+y*o;e[4]=g*o-m;e[8]=a*u;e[1]=a*l;e[5]=a*c;e[9]=-o;e[2]=m*o-g;e[6]=y+v*o;e[10]=a*s}else if("ZXY"===t.order){var v=s*c,m=s*l,g=u*c,y=u*l;e[0]=v-y*o;e[4]=-a*l;e[8]=g+m*o;e[1]=m+g*o;e[5]=a*c;e[9]=y-v*o;e[2]=-a*u;e[6]=o;e[10]=a*s}else if("ZYX"===t.order){var h=a*c,f=a*l,p=o*c,d=o*l;e[0]=s*c;e[4]=p*u-f;e[8]=h*u+d;e[1]=s*l;e[5]=d*u+h;e[9]=f*u-p;e[2]=-u;e[6]=o*s;e[10]=a*s}else if("YZX"===t.order){var x=a*s,_=a*u,b=o*s,w=o*u;e[0]=s*c;e[4]=w-x*l;e[8]=b*l+_;e[1]=l;e[5]=a*c;e[9]=-o*c;e[2]=-u*c;e[6]=_*l+b;e[10]=x-w*l}else if("XZY"===t.order){var x=a*s,_=a*u,b=o*s,w=o*u;e[0]=s*c;e[4]=-l;e[8]=u*c;e[1]=x*l+w;e[5]=a*c;e[9]=_*l-b;e[2]=b*l-_;e[6]=o*c;e[10]=w*l+x}e[3]=0;e[7]=0;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return this},makeRotationFromQuaternion:function(t){var e=this.elements;var r=t._x,n=t._y,i=t._z,a=t._w;var o=r+r,s=n+n,u=i+i;var c=r*o,l=r*s,h=r*u;var f=n*s,p=n*u,d=i*u;var v=a*o,m=a*s,g=a*u;e[0]=1-(f+d);e[4]=l-g;e[8]=h+m;e[1]=l+g;e[5]=1-(c+d);e[9]=p-v;e[2]=h-m;e[6]=p+v;e[10]=1-(c+f);e[3]=0;e[7]=0;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return this},lookAt:function(){var t=new Ge;var e=new Ge;var r=new Ge;return function n(i,a,o){var s=this.elements;r.subVectors(i,a);if(0===r.lengthSq())r.z=1;r.normalize();t.crossVectors(o,r);if(0===t.lengthSq()){if(1===Math.abs(o.z))r.x+=1e-4;else r.z+=1e-4;r.normalize();t.crossVectors(o,r)}t.normalize();e.crossVectors(r,t);s[0]=t.x;s[4]=e.x;s[8]=r.x;s[1]=t.y;s[5]=e.y;s[9]=r.y;s[2]=t.z;s[6]=e.z;s[10]=r.z;return this}}(),multiply:function(t,e){if(void 0!==e){console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.");return this.multiplyMatrices(t,e)}return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements;var n=e.elements;var i=this.elements;var a=r[0],o=r[4],s=r[8],u=r[12];var c=r[1],l=r[5],h=r[9],f=r[13];var p=r[2],d=r[6],v=r[10],m=r[14];var g=r[3],y=r[7],x=r[11],_=r[15];var b=n[0],w=n[4],M=n[8],E=n[12];var S=n[1],T=n[5],A=n[9],R=n[13];var L=n[2],C=n[6],P=n[10],I=n[14];var O=n[3],N=n[7],U=n[11],D=n[15];i[0]=a*b+o*S+s*L+u*O;i[4]=a*w+o*T+s*C+u*N;i[8]=a*M+o*A+s*P+u*U;i[12]=a*E+o*R+s*I+u*D;i[1]=c*b+l*S+h*L+f*O;i[5]=c*w+l*T+h*C+f*N;i[9]=c*M+l*A+h*P+f*U;i[13]=c*E+l*R+h*I+f*D;i[2]=p*b+d*S+v*L+m*O;i[6]=p*w+d*T+v*C+m*N;i[10]=p*M+d*A+v*P+m*U;i[14]=p*E+d*R+v*I+m*D;i[3]=g*b+y*S+x*L+_*O;i[7]=g*w+y*T+x*C+_*N;i[11]=g*M+y*A+x*P+_*U;i[15]=g*E+y*R+x*I+_*D;return this},multiplyScalar:function(t){var e=this.elements;e[0]*=t;e[4]*=t;e[8]*=t;e[12]*=t;e[1]*=t;e[5]*=t;e[9]*=t;e[13]*=t;e[2]*=t;e[6]*=t;e[10]*=t;e[14]*=t;e[3]*=t;e[7]*=t;e[11]*=t;e[15]*=t;return this},applyToBufferAttribute:function(){var t=new Ge;return function e(r){for(var n=0,i=r.count;n<i;n++){t.x=r.getX(n);t.y=r.getY(n);t.z=r.getZ(n);t.applyMatrix4(this);r.setXYZ(n,t.x,t.y,t.z)}return r}}(),determinant:function(){var t=this.elements;var e=t[0],r=t[4],n=t[8],i=t[12];var a=t[1],o=t[5],s=t[9],u=t[13];var c=t[2],l=t[6],h=t[10],f=t[14];var p=t[3],d=t[7],v=t[11],m=t[15];return p*(+i*s*l-n*u*l-i*o*h+r*u*h+n*o*f-r*s*f)+d*(+e*s*f-e*u*h+i*a*h-n*a*f+n*u*c-i*s*c)+v*(+e*u*l-e*o*f-i*a*l+r*a*f+i*o*c-r*u*c)+m*(-n*o*c-e*s*l+e*o*h+n*a*l-r*a*h+r*s*c)},transpose:function(){var t=this.elements;var e;e=t[1];t[1]=t[4];t[4]=e;e=t[2];t[2]=t[8];t[8]=e;e=t[6];t[6]=t[9];t[9]=e;e=t[3];t[3]=t[12];t[12]=e;e=t[7];t[7]=t[13];t[13]=e;e=t[11];t[11]=t[14];t[14]=e;return this},setPosition:function(t){var e=this.elements;e[12]=t.x;e[13]=t.y;e[14]=t.z;return this},getInverse:function(t,e){var r=this.elements,n=t.elements,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=n[8],p=n[9],d=n[10],v=n[11],m=n[12],g=n[13],y=n[14],x=n[15],_=p*y*h-g*d*h+g*l*v-c*y*v-p*l*x+c*d*x,b=m*d*h-f*y*h-m*l*v+u*y*v+f*l*x-u*d*x,w=f*g*h-m*p*h+m*c*v-u*g*v-f*c*x+u*p*x,M=m*p*l-f*g*l-m*c*d+u*g*d+f*c*y-u*p*y;var E=i*_+a*b+o*w+s*M;if(0===E){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(true===e)throw new Error(S);else console.warn(S);return this.identity()}var T=1/E;r[0]=_*T;r[1]=(g*d*s-p*y*s-g*o*v+a*y*v+p*o*x-a*d*x)*T;r[2]=(c*y*s-g*l*s+g*o*h-a*y*h-c*o*x+a*l*x)*T;r[3]=(p*l*s-c*d*s-p*o*h+a*d*h+c*o*v-a*l*v)*T;r[4]=b*T;r[5]=(f*y*s-m*d*s+m*o*v-i*y*v-f*o*x+i*d*x)*T;r[6]=(m*l*s-u*y*s-m*o*h+i*y*h+u*o*x-i*l*x)*T;r[7]=(u*d*s-f*l*s+f*o*h-i*d*h-u*o*v+i*l*v)*T;r[8]=w*T;r[9]=(m*p*s-f*g*s-m*a*v+i*g*v+f*a*x-i*p*x)*T;r[10]=(u*g*s-m*c*s+m*a*h-i*g*h-u*a*x+i*c*x)*T;r[11]=(f*c*s-u*p*s-f*a*h+i*p*h+u*a*v-i*c*v)*T;r[12]=M*T;r[13]=(f*g*o-m*p*o+m*a*d-i*g*d-f*a*y+i*p*y)*T;r[14]=(m*c*o-u*g*o-m*a*l+i*g*l+u*a*y-i*c*y)*T;r[15]=(u*p*o-f*c*o+f*a*l-i*p*l-u*a*d+i*c*d)*T;return this},scale:function(t){var e=this.elements;var r=t.x,n=t.y,i=t.z;e[0]*=r;e[4]*=n;e[8]*=i;e[1]*=r;e[5]*=n;e[9]*=i;e[2]*=r;e[6]*=n;e[10]*=i;e[3]*=r;e[7]*=n;e[11]*=i;return this},getMaxScaleOnAxis:function(){var t=this.elements;var e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];var r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6];var n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,n))},makeTranslation:function(t,e,r){this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1);return this},makeRotationX:function(t){var e=Math.cos(t),r=Math.sin(t);this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1);return this},makeRotationY:function(t){var e=Math.cos(t),r=Math.sin(t);this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1);return this},makeRotationZ:function(t){var e=Math.cos(t),r=Math.sin(t);this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(t,e){var r=Math.cos(e);var n=Math.sin(e);var i=1-r;var a=t.x,o=t.y,s=t.z;var u=i*a,c=i*o;this.set(u*a+r,u*o-n*s,u*s+n*o,0,u*o+n*s,c*o+r,c*s-n*a,0,u*s-n*o,c*s+n*a,i*s*s+r,0,0,0,0,1);return this},makeScale:function(t,e,r){this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1);return this},makeShear:function(t,e,r){this.set(1,e,r,0,t,1,r,0,t,e,1,0,0,0,0,1);return this},compose:function(t,e,r){this.makeRotationFromQuaternion(e);this.scale(r);this.setPosition(t);return this},decompose:function(){var t=new Ge;var e=new He;return function r(n,i,a){var o=this.elements;var s=t.set(o[0],o[1],o[2]).length();var u=t.set(o[4],o[5],o[6]).length();var c=t.set(o[8],o[9],o[10]).length();var l=this.determinant();if(l<0)s=-s;n.x=o[12];n.y=o[13];n.z=o[14];e.copy(this);var h=1/s;var f=1/u;var p=1/c;e.elements[0]*=h;e.elements[1]*=h;e.elements[2]*=h;e.elements[4]*=f;e.elements[5]*=f;e.elements[6]*=f;e.elements[8]*=p;e.elements[9]*=p;e.elements[10]*=p;i.setFromRotationMatrix(e);a.x=s;a.y=u;a.z=c;return this}}(),makePerspective:function(t,e,r,n,i,a){if(void 0===a)console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements;var s=2*i/(e-t);var u=2*i/(r-n);var c=(e+t)/(e-t);var l=(r+n)/(r-n);var h=-(a+i)/(a-i);var f=-2*a*i/(a-i);o[0]=s;o[4]=0;o[8]=c;o[12]=0;o[1]=0;o[5]=u;o[9]=l;o[13]=0;o[2]=0;o[6]=0;o[10]=h;o[14]=f;o[3]=0;o[7]=0;o[11]=-1;o[15]=0;return this},makeOrthographic:function(t,e,r,n,i,a){var o=this.elements;var s=1/(e-t);var u=1/(r-n);var c=1/(a-i);var l=(e+t)*s;var h=(r+n)*u;var f=(a+i)*c;o[0]=2*s;o[4]=0;o[8]=0;o[12]=-l;o[1]=0;o[5]=2*u;o[9]=0;o[13]=-h;o[2]=0;o[6]=0;o[10]=-2*c;o[14]=-f;o[3]=0;o[7]=0;o[11]=0;o[15]=1;return this},equals:function(t){var e=this.elements;var r=t.elements;for(var n=0;n<16;n++)if(e[n]!==r[n])return false;return true},fromArray:function(t,e){if(void 0===e)e=0;for(var r=0;r<16;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){if(void 0===t)t=[];if(void 0===e)e=0;var r=this.elements;t[e]=r[0];t[e+1]=r[1];t[e+2]=r[2];t[e+3]=r[3];t[e+4]=r[4];t[e+5]=r[5];t[e+6]=r[6];t[e+7]=r[7];t[e+8]=r[8];t[e+9]=r[9];t[e+10]=r[10];t[e+11]=r[11];t[e+12]=r[12];t[e+13]=r[13];t[e+14]=r[14];t[e+15]=r[15];return t}});function je(t,e,r,n){this._x=t||0;this._y=e||0;this._z=r||0;this._w=void 0!==n?n:1}Object.assign(je,{slerp:function(t,e,r,n){return r.copy(t).slerp(e,n)},slerpFlat:function(t,e,r,n,i,a,o){var s=r[n+0],u=r[n+1],c=r[n+2],l=r[n+3],h=i[a+0],f=i[a+1],p=i[a+2],d=i[a+3];if(l!==d||s!==h||u!==f||c!==p){var v=1-o,m=s*h+u*f+c*p+l*d,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var x=Math.sqrt(y),_=Math.atan2(x,m*g);v=Math.sin(v*_)/x;o=Math.sin(o*_)/x}var b=o*g;s=s*v+h*b;u=u*v+f*b;c=c*v+p*b;l=l*v+d*b;if(v===1-o){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w;u*=w;c*=w;l*=w}}t[e]=s;t[e+1]=u;t[e+2]=c;t[e+3]=l}});Object.defineProperties(je.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t;this.onChangeCallback()}}});Object.assign(je.prototype,{set:function(t,e,r,n){this._x=t;this._y=e;this._z=r;this._w=n;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){this._x=t.x;this._y=t.y;this._z=t.z;this._w=t.w;this.onChangeCallback();return this},setFromEuler:function(t,e){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=t._x,n=t._y,i=t._z,a=t.order;var o=Math.cos;var s=Math.sin;var u=o(r/2);var c=o(n/2);var l=o(i/2);var h=s(r/2);var f=s(n/2);var p=s(i/2);if("XYZ"===a){this._x=h*c*l+u*f*p;this._y=u*f*l-h*c*p;this._z=u*c*p+h*f*l;this._w=u*c*l-h*f*p}else if("YXZ"===a){this._x=h*c*l+u*f*p;this._y=u*f*l-h*c*p;this._z=u*c*p-h*f*l;this._w=u*c*l+h*f*p}else if("ZXY"===a){this._x=h*c*l-u*f*p;this._y=u*f*l+h*c*p;this._z=u*c*p+h*f*l;this._w=u*c*l-h*f*p}else if("ZYX"===a){this._x=h*c*l-u*f*p;this._y=u*f*l+h*c*p;this._z=u*c*p-h*f*l;this._w=u*c*l+h*f*p}else if("YZX"===a){this._x=h*c*l+u*f*p;this._y=u*f*l+h*c*p;this._z=u*c*p-h*f*l;this._w=u*c*l-h*f*p}else if("XZY"===a){this._x=h*c*l-u*f*p;this._y=u*f*l-h*c*p;this._z=u*c*p+h*f*l;this._w=u*c*l+h*f*p}if(false!==e)this.onChangeCallback();return this},setFromAxisAngle:function(t,e){var r=e/2,n=Math.sin(r);this._x=t.x*n;this._y=t.y*n;this._z=t.z*n;this._w=Math.cos(r);this.onChangeCallback();return this},setFromRotationMatrix:function(t){var e=t.elements,r=e[0],n=e[4],i=e[8],a=e[1],o=e[5],s=e[9],u=e[2],c=e[6],l=e[10],h=r+o+l,f;if(h>0){f=.5/Math.sqrt(h+1);this._w=.25/f;this._x=(c-s)*f;this._y=(i-u)*f;this._z=(a-n)*f}else if(r>o&&r>l){f=2*Math.sqrt(1+r-o-l);this._w=(c-s)/f;this._x=.25*f;this._y=(n+a)/f;this._z=(i+u)/f}else if(o>l){f=2*Math.sqrt(1+o-r-l);this._w=(i-u)/f;this._x=(n+a)/f;this._y=.25*f;this._z=(s+c)/f}else{f=2*Math.sqrt(1+l-r-o);this._w=(a-n)/f;this._x=(i+u)/f;this._y=(s+c)/f;this._z=.25*f}this.onChangeCallback();return this},setFromUnitVectors:function(){var t=new Ge;var e;var r=1e-6;return function n(i,a){if(void 0===t)t=new Ge;e=i.dot(a)+1;if(e<r){e=0;if(Math.abs(i.x)>Math.abs(i.z))t.set(-i.y,i.x,0);else t.set(0,-i.z,i.y)}else t.crossVectors(i,a);this._x=t.x;this._y=t.y;this._z=t.z;this._w=e;return this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();if(0===t){this._x=0;this._y=0;this._z=0;this._w=1}else{t=1/t;this._x=this._x*t;this._y=this._y*t;this._z=this._z*t;this._w=this._w*t}this.onChangeCallback();return this},multiply:function(t,e){if(void 0!==e){console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(t,e)}return this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var r=t._x,n=t._y,i=t._z,a=t._w;var o=e._x,s=e._y,u=e._z,c=e._w;this._x=r*c+a*o+n*u-i*s;this._y=n*c+a*s+i*o-r*u;this._z=i*c+a*u+r*s-n*o;this._w=a*c-r*o-n*s-i*u;this.onChangeCallback();return this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var r=this._x,n=this._y,i=this._z,a=this._w;var o=a*t._w+r*t._x+n*t._y+i*t._z;if(o<0){this._w=-t._w;this._x=-t._x;this._y=-t._y;this._z=-t._z;o=-o}else this.copy(t);if(o>=1){this._w=a;this._x=r;this._y=n;this._z=i;return this}var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001){this._w=.5*(a+this._w);this._x=.5*(r+this._x);this._y=.5*(n+this._y);this._z=.5*(i+this._z);return this}var u=Math.atan2(s,o);var c=Math.sin((1-e)*u)/s,l=Math.sin(e*u)/s;this._w=a*c+this._w*l;this._x=r*c+this._x*l;this._y=n*c+this._y*l;this._z=i*c+this._z*l;this.onChangeCallback();return this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){if(void 0===e)e=0;this._x=t[e];this._y=t[e+1];this._z=t[e+2];this._w=t[e+3];this.onChangeCallback();return this},toArray:function(t,e){if(void 0===t)t=[];if(void 0===e)e=0;t[e]=this._x;t[e+1]=this._y;t[e+2]=this._z;t[e+3]=this._w;return t},onChange:function(t){this.onChangeCallback=t;return this},onChangeCallback:function(){}});function Ge(t,e,r){this.x=t||0;this.y=e||0;this.z=r||0}Object.assign(Ge.prototype,{isVector3:true,set:function(t,e,r){this.x=t;this.y=e;this.z=r;return this},setScalar:function(t){this.x=t;this.y=t;this.z=t;return this},setX:function(t){this.x=t;return this},setY:function(t){this.y=t;return this},setZ:function(t){this.z=t;return this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){this.x=t.x;this.y=t.y;this.z=t.z;return this},add:function(t,e){if(void 0!==e){console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(t,e)}this.x+=t.x;this.y+=t.y;this.z+=t.z;return this},addScalar:function(t){this.x+=t;this.y+=t;this.z+=t;return this},addVectors:function(t,e){this.x=t.x+e.x;this.y=t.y+e.y;this.z=t.z+e.z;return this},addScaledVector:function(t,e){this.x+=t.x*e;this.y+=t.y*e;this.z+=t.z*e;return this},sub:function(t,e){if(void 0!==e){console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(t,e)}this.x-=t.x;this.y-=t.y;this.z-=t.z;return this},subScalar:function(t){this.x-=t;this.y-=t;this.z-=t;return this},subVectors:function(t,e){this.x=t.x-e.x;this.y=t.y-e.y;this.z=t.z-e.z;return this},multiply:function(t,e){if(void 0!==e){console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(t,e)}this.x*=t.x;this.y*=t.y;this.z*=t.z;return this},multiplyScalar:function(t){this.x*=t;this.y*=t;this.z*=t;return this},multiplyVectors:function(t,e){this.x=t.x*e.x;this.y=t.y*e.y;this.z=t.z*e.z;return this},applyEuler:function(){var t=new je;return function e(r){if(!(r&&r.isEuler))console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(t.setFromEuler(r))}}(),applyAxisAngle:function(){var t=new je;return function e(r,n){return this.applyQuaternion(t.setFromAxisAngle(r,n))}}(),applyMatrix3:function(t){var e=this.x,r=this.y,n=this.z;var i=t.elements;this.x=i[0]*e+i[3]*r+i[6]*n;this.y=i[1]*e+i[4]*r+i[7]*n;this.z=i[2]*e+i[5]*r+i[8]*n;return this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z;var i=t.elements;var a=1/(i[3]*e+i[7]*r+i[11]*n+i[15]);this.x=(i[0]*e+i[4]*r+i[8]*n+i[12])*a;this.y=(i[1]*e+i[5]*r+i[9]*n+i[13])*a;this.z=(i[2]*e+i[6]*r+i[10]*n+i[14])*a;return this},applyQuaternion:function(t){var e=this.x,r=this.y,n=this.z;var i=t.x,a=t.y,o=t.z,s=t.w;var u=s*e+a*n-o*r;var c=s*r+o*e-i*n;var l=s*n+i*r-a*e;var h=-i*e-a*r-o*n;this.x=u*s+h*-i+c*-o-l*-a;this.y=c*s+h*-a+l*-i-u*-o;this.z=l*s+h*-o+u*-a-c*-i;return this},project:function(){var t=new He;return function e(r){t.multiplyMatrices(r.projectionMatrix,t.getInverse(r.matrixWorld));return this.applyMatrix4(t)}}(),unproject:function(){var t=new He;return function e(r){t.multiplyMatrices(r.matrixWorld,t.getInverse(r.projectionMatrix));return this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,r=this.y,n=this.z;var i=t.elements;this.x=i[0]*e+i[4]*r+i[8]*n;this.y=i[1]*e+i[5]*r+i[9]*n;this.z=i[2]*e+i[6]*r+i[10]*n;return this.normalize()},divide:function(t){this.x/=t.x;this.y/=t.y;this.z/=t.z;return this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){this.x=Math.min(this.x,t.x);this.y=Math.min(this.y,t.y);this.z=Math.min(this.z,t.z);return this},max:function(t){this.x=Math.max(this.x,t.x);this.y=Math.max(this.y,t.y);this.z=Math.max(this.z,t.z);return this},clamp:function(t,e){this.x=Math.max(t.x,Math.min(e.x,this.x));this.y=Math.max(t.y,Math.min(e.y,this.y));this.z=Math.max(t.z,Math.min(e.z,this.z));return this},clampScalar:function(){var t=new Ge;var e=new Ge;return function r(n,i){t.set(n,n,n);e.set(i,i,i);return this.clamp(t,e)}}(),clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){this.x+=(t.x-this.x)*e;this.y+=(t.y-this.y)*e;this.z+=(t.z-this.z)*e;return this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},cross:function(t,e){if(void 0!==e){console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(t,e)}return this.crossVectors(this,t)},crossVectors:function(t,e){var r=t.x,n=t.y,i=t.z;var a=e.x,o=e.y,s=e.z;this.x=n*s-i*o;this.y=i*a-r*s;this.z=r*o-n*a;return this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new Ge;return function e(r){t.copy(this).projectOnVector(r);return this.sub(t)}}(),reflect:function(){var t=new Ge;return function e(r){return this.sub(t.copy(r).multiplyScalar(2*this.dot(r)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(Fe.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return e*e+r*r+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;this.x=e*Math.sin(t.theta);this.y=Math.cos(t.phi)*t.radius;this.z=e*Math.cos(t.theta);return this},setFromCylindrical:function(t){this.x=t.radius*Math.sin(t.theta);this.y=t.y;this.z=t.radius*Math.cos(t.theta);return this},setFromMatrixPosition:function(t){var e=t.elements;this.x=e[12];this.y=e[13];this.z=e[14];return this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length();var r=this.setFromMatrixColumn(t,1).length();var n=this.setFromMatrixColumn(t,2).length();this.x=e;this.y=r;this.z=n;return this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){if(void 0===e)e=0;this.x=t[e];this.y=t[e+1];this.z=t[e+2];return this},toArray:function(t,e){if(void 0===t)t=[];if(void 0===e)e=0;t[e]=this.x;t[e+1]=this.y;t[e+2]=this.z;return t},fromBufferAttribute:function(t,e,r){if(void 0!==r)console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=t.getX(e);this.y=t.getY(e);this.z=t.getZ(e);return this}});function Ve(){this.elements=[1,0,0,0,1,0,0,0,1];if(arguments.length>0)console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Ve.prototype,{isMatrix3:true,set:function(t,e,r,n,i,a,o,s,u){var c=this.elements;c[0]=t;c[1]=n;c[2]=o;c[3]=e;c[4]=i;c[5]=s;c[6]=r;c[7]=a;c[8]=u;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements;var r=t.elements;e[0]=r[0];e[1]=r[1];e[2]=r[2];e[3]=r[3];e[4]=r[4];e[5]=r[5];e[6]=r[6];e[7]=r[7];e[8]=r[8];return this},setFromMatrix4:function(t){var e=t.elements;this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]);return this},applyToBufferAttribute:function(){var t=new Ge;return function e(r){for(var n=0,i=r.count;n<i;n++){t.x=r.getX(n);t.y=r.getY(n);t.z=r.getZ(n);t.applyMatrix3(this);r.setXYZ(n,t.x,t.y,t.z)}return r}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var r=t.elements;var n=e.elements;var i=this.elements;var a=r[0],o=r[3],s=r[6];var u=r[1],c=r[4],l=r[7];var h=r[2],f=r[5],p=r[8];var d=n[0],v=n[3],m=n[6];var g=n[1],y=n[4],x=n[7];var _=n[2],b=n[5],w=n[8];i[0]=a*d+o*g+s*_;i[3]=a*v+o*y+s*b;i[6]=a*m+o*x+s*w;i[1]=u*d+c*g+l*_;i[4]=u*v+c*y+l*b;i[7]=u*m+c*x+l*w;i[2]=h*d+f*g+p*_;i[5]=h*v+f*y+p*b;i[8]=h*m+f*x+p*w;return this},multiplyScalar:function(t){var e=this.elements;e[0]*=t;e[3]*=t;e[6]*=t;e[1]*=t;e[4]*=t;e[7]*=t;e[2]*=t;e[5]*=t;e[8]*=t;return this},determinant:function(){var t=this.elements;var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*a*c-e*o*u-r*i*c+r*o*s+n*i*u-n*a*s},getInverse:function(t,e){if(t&&t.isMatrix4)console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=t.elements,n=this.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],l=r[6],h=r[7],f=r[8],p=f*u-c*h,d=c*l-f*s,v=h*s-u*l,m=i*p+a*d+o*v;if(0===m){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(true===e)throw new Error(g);else console.warn(g);return this.identity()}var y=1/m;n[0]=p*y;n[1]=(o*h-f*a)*y;n[2]=(c*a-o*u)*y;n[3]=d*y;n[4]=(f*i-o*l)*y;n[5]=(o*s-c*i)*y;n[6]=v*y;n[7]=(a*l-h*i)*y;n[8]=(u*i-a*s)*y;return this},transpose:function(){var t,e=this.elements;t=e[1];e[1]=e[3];e[3]=t;t=e[2];e[2]=e[6];e[6]=t;t=e[5];e[5]=e[7];e[7]=t;return this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;t[0]=e[0];t[1]=e[3];t[2]=e[6];t[3]=e[1];t[4]=e[4];t[5]=e[7];t[6]=e[2];t[7]=e[5];t[8]=e[8];return this},setUvTransform:function(t,e,r,n,i,a,o){var s=Math.cos(i);var u=Math.sin(i);this.set(r*s,r*u,-r*(s*a+u*o)+a+t,-n*u,n*s,-n*(-u*a+s*o)+o+e,0,0,1)},scale:function(t,e){var r=this.elements;r[0]*=t;r[3]*=t;r[6]*=t;r[1]*=e;r[4]*=e;r[7]*=e;return this},rotate:function(t){var e=Math.cos(t);var r=Math.sin(t);var n=this.elements;var i=n[0],a=n[3],o=n[6];var s=n[1],u=n[4],c=n[7];n[0]=e*i+r*s;n[3]=e*a+r*u;n[6]=e*o+r*c;n[1]=-r*i+e*s;n[4]=-r*a+e*u;n[7]=-r*o+e*c;return this},translate:function(t,e){var r=this.elements;r[0]+=t*r[2];r[3]+=t*r[5];r[6]+=t*r[8];r[1]+=e*r[2];r[4]+=e*r[5];r[7]+=e*r[8];return this},equals:function(t){var e=this.elements;var r=t.elements;for(var n=0;n<9;n++)if(e[n]!==r[n])return false;return true},fromArray:function(t,e){if(void 0===e)e=0;for(var r=0;r<9;r++)this.elements[r]=t[r+e];return this},toArray:function(t,e){if(void 0===t)t=[];if(void 0===e)e=0;var r=this.elements;t[e]=r[0];t[e+1]=r[1];t[e+2]=r[2];t[e+3]=r[3];t[e+4]=r[4];t[e+5]=r[5];t[e+6]=r[6];t[e+7]=r[7];t[e+8]=r[8];return t}});var We=0;function Xe(t,e,r,n,i,a,o,s,u,c){Object.defineProperty(this,"id",{value:We++});this.uuid=Fe.generateUUID();this.name="";this.image=void 0!==t?t:Xe.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==e?e:Xe.DEFAULT_MAPPING;this.wrapS=void 0!==r?r:_t;this.wrapT=void 0!==n?n:_t;this.magFilter=void 0!==i?i:St;this.minFilter=void 0!==a?a:At;this.anisotropy=void 0!==u?u:1;this.format=void 0!==o?o:jt;this.type=void 0!==s?s:Rt;this.offset=new ke(0,0);this.repeat=new ke(1,1);this.center=new ke(0,0);this.rotation=0;this.matrixAutoUpdate=true;this.matrix=new Ve;this.generateMipmaps=true;this.premultiplyAlpha=false;this.flipY=true;this.unpackAlignment=4;this.encoding=void 0!==c?c:Le;this.version=0;this.onUpdate=null}Xe.DEFAULT_IMAGE=void 0;Xe.DEFAULT_MAPPING=ht;Xe.prototype=Object.assign(Object.create(s.prototype),{constructor:Xe,isTexture:true,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name;this.image=t.image;this.mipmaps=t.mipmaps.slice(0);this.mapping=t.mapping;this.wrapS=t.wrapS;this.wrapT=t.wrapT;this.magFilter=t.magFilter;this.minFilter=t.minFilter;this.anisotropy=t.anisotropy;this.format=t.format;this.type=t.type;this.offset.copy(t.offset);this.repeat.copy(t.repeat);this.center.copy(t.center);this.rotation=t.rotation;this.matrixAutoUpdate=t.matrixAutoUpdate;this.matrix.copy(t.matrix);this.generateMipmaps=t.generateMipmaps;this.premultiplyAlpha=t.premultiplyAlpha;this.flipY=t.flipY;this.unpackAlignment=t.unpackAlignment;this.encoding=t.encoding;return this},toJSON:function(t){var e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];function r(t){var e;if(t instanceof HTMLCanvasElement)e=t;else{e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=t.width;e.height=t.height;var r=e.getContext("2d");if(t instanceof ImageData)r.putImageData(t,0,0);else r.drawImage(t,0,0,t.width,t.height)}if(e.width>2048||e.height>2048)return e.toDataURL("image/jpeg",.6);else return e.toDataURL("image/png")}var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid)i.uuid=Fe.generateUUID();if(!e&&void 0===t.images[i.uuid])t.images[i.uuid]={uuid:i.uuid,url:r(i)};n.image=i.uuid}if(!e)t.textures[this.uuid]=n;return n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==ht)return;t.applyMatrix3(this.matrix);if(t.x<0||t.x>1)switch(this.wrapS){case xt:t.x=t.x-Math.floor(t.x);break;case _t:t.x=t.x<0?0:1;break;case bt:if(1===Math.abs(Math.floor(t.x)%2))t.x=Math.ceil(t.x)-t.x;else t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case xt:t.y=t.y-Math.floor(t.y);break;case _t:t.y=t.y<0?0:1;break;case bt:if(1===Math.abs(Math.floor(t.y)%2))t.y=Math.ceil(t.y)-t.y;else t.y=t.y-Math.floor(t.y);break}if(this.flipY)t.y=1-t.y}});Object.defineProperty(Xe.prototype,"needsUpdate",{set:function(t){if(true===t)this.version++}});function qe(t,e,r,n){this.x=t||0;this.y=e||0;this.z=r||0;this.w=void 0!==n?n:1}Object.assign(qe.prototype,{isVector4:true,set:function(t,e,r,n){this.x=t;this.y=e;this.z=r;this.w=n;return this},setScalar:function(t){this.x=t;this.y=t;this.z=t;this.w=t;return this},setX:function(t){this.x=t;return this},setY:function(t){this.y=t;return this},setZ:function(t){this.z=t;return this},setW:function(t){this.w=t;return this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){this.x=t.x;this.y=t.y;this.z=t.z;this.w=void 0!==t.w?t.w:1;return this},add:function(t,e){if(void 0!==e){console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(t,e)}this.x+=t.x;this.y+=t.y;this.z+=t.z;this.w+=t.w;return this},addScalar:function(t){this.x+=t;this.y+=t;this.z+=t;this.w+=t;return this},addVectors:function(t,e){this.x=t.x+e.x;this.y=t.y+e.y;this.z=t.z+e.z;this.w=t.w+e.w;return this},addScaledVector:function(t,e){this.x+=t.x*e;this.y+=t.y*e;this.z+=t.z*e;this.w+=t.w*e;return this},sub:function(t,e){if(void 0!==e){console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(t,e)}this.x-=t.x;this.y-=t.y;this.z-=t.z;this.w-=t.w;return this},subScalar:function(t){this.x-=t;this.y-=t;this.z-=t;this.w-=t;return this},subVectors:function(t,e){this.x=t.x-e.x;this.y=t.y-e.y;this.z=t.z-e.z;this.w=t.w-e.w;return this},multiplyScalar:function(t){this.x*=t;this.y*=t;this.z*=t;this.w*=t;return this},applyMatrix4:function(t){var e=this.x,r=this.y,n=this.z,i=this.w;var a=t.elements;this.x=a[0]*e+a[4]*r+a[8]*n+a[12]*i;this.y=a[1]*e+a[5]*r+a[9]*n+a[13]*i;this.z=a[2]*e+a[6]*r+a[10]*n+a[14]*i;this.w=a[3]*e+a[7]*r+a[11]*n+a[15]*i;return this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);if(e<1e-4){this.x=1;this.y=0;this.z=0}else{this.x=t.x/e;this.y=t.y/e;this.z=t.z/e}return this},setAxisAngleFromRotationMatrix:function(t){var e,r,n,i,a=.01,o=.1,s=t.elements,u=s[0],c=s[4],l=s[8],h=s[1],f=s[5],p=s[9],d=s[2],v=s[6],m=s[10];if(Math.abs(c-h)<a&&Math.abs(l-d)<a&&Math.abs(p-v)<a){if(Math.abs(c+h)<o&&Math.abs(l+d)<o&&Math.abs(p+v)<o&&Math.abs(u+f+m-3)<o){this.set(1,0,0,0);return this}e=Math.PI;var g=(u+1)/2;var y=(f+1)/2;var x=(m+1)/2;var _=(c+h)/4;var b=(l+d)/4;var w=(p+v)/4;if(g>y&&g>x)if(g<a){r=0;n=.707106781;i=.707106781}else{r=Math.sqrt(g);n=_/r;i=b/r}else if(y>x)if(y<a){r=.707106781;n=0;i=.707106781}else{n=Math.sqrt(y);r=_/n;i=w/n}else if(x<a){r=.707106781;n=.707106781;i=0}else{i=Math.sqrt(x);r=b/i;n=w/i}this.set(r,n,i,e);return this}var M=Math.sqrt((v-p)*(v-p)+(l-d)*(l-d)+(h-c)*(h-c));if(Math.abs(M)<.001)M=1;this.x=(v-p)/M;this.y=(l-d)/M;this.z=(h-c)/M;this.w=Math.acos((u+f+m-1)/2);return this},min:function(t){this.x=Math.min(this.x,t.x);this.y=Math.min(this.y,t.y);this.z=Math.min(this.z,t.z);this.w=Math.min(this.w,t.w);return this},max:function(t){this.x=Math.max(this.x,t.x);this.y=Math.max(this.y,t.y);this.z=Math.max(this.z,t.z);this.w=Math.max(this.w,t.w);return this},clamp:function(t,e){this.x=Math.max(t.x,Math.min(e.x,this.x));this.y=Math.max(t.y,Math.min(e.y,this.y));this.z=Math.max(t.z,Math.min(e.z,this.z));this.w=Math.max(t.w,Math.min(e.w,this.w));return this},clampScalar:function(){var t,e;return function r(n,i){if(void 0===t){t=new qe;e=new qe}t.set(n,n,n,n);e.set(i,i,i,i);return this.clamp(t,e)}}(),clampLength:function(t,e){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x);this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y);this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z);this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){this.x+=(t.x-this.x)*e;this.y+=(t.y-this.y)*e;this.z+=(t.z-this.z)*e;this.w+=(t.w-this.w)*e;return this},lerpVectors:function(t,e,r){return this.subVectors(e,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){if(void 0===e)e=0;this.x=t[e];this.y=t[e+1];this.z=t[e+2];this.w=t[e+3];return this},toArray:function(t,e){if(void 0===t)t=[];if(void 0===e)e=0;t[e]=this.x;t[e+1]=this.y;t[e+2]=this.z;t[e+3]=this.w;return t},fromBufferAttribute:function(t,e,r){if(void 0!==r)console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=t.getX(e);this.y=t.getY(e);this.z=t.getZ(e);this.w=t.getW(e);return this}});function Ye(t,e,r){this.uuid=Fe.generateUUID();this.width=t;this.height=e;this.scissor=new qe(0,0,t,e);this.scissorTest=false;this.viewport=new qe(0,0,t,e);r=r||{};if(void 0===r.minFilter)r.minFilter=St;this.texture=new Xe(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding);this.depthBuffer=void 0!==r.depthBuffer?r.depthBuffer:true;this.stencilBuffer=void 0!==r.stencilBuffer?r.stencilBuffer:true;this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}Ye.prototype=Object.assign(Object.create(s.prototype),{constructor:Ye,isWebGLRenderTarget:true,setSize:function(t,e){if(this.width!==t||this.height!==e){this.width=t;this.height=e;this.dispose()}this.viewport.set(0,0,t,e);this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.width=t.width;this.height=t.height;this.viewport.copy(t.viewport);this.texture=t.texture.clone();this.depthBuffer=t.depthBuffer;this.stencilBuffer=t.stencilBuffer;this.depthTexture=t.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Ze(t,e,r){Ye.call(this,t,e,r);this.activeCubeFace=0;this.activeMipMapLevel=0}Ze.prototype=Object.create(Ye.prototype);Ze.prototype.constructor=Ze;Ze.prototype.isWebGLRenderTargetCube=true;function Je(t,e,r,n,i,a,o,s,u,c,l,h){Xe.call(this,null,a,o,s,u,c,n,i,l,h);this.image={data:t,width:e,height:r};this.magFilter=void 0!==u?u:wt;this.minFilter=void 0!==c?c:wt;this.generateMipmaps=false;this.flipY=false;this.unpackAlignment=1}Je.prototype=Object.create(Xe.prototype);Je.prototype.constructor=Je;Je.prototype.isDataTexture=true;function Qe(t,e,r,n,i,a,o,s,u,c){t=void 0!==t?t:[];e=void 0!==e?e:ft;Xe.call(this,t,e,r,n,i,a,o,s,u,c);this.flipY=false}Qe.prototype=Object.create(Xe.prototype);Qe.prototype.constructor=Qe;Qe.prototype.isCubeTexture=true;Object.defineProperty(Qe.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Ke=new Xe;var $e=new Qe;function tr(){this.seq=[];this.map={}}var er=[];var rr=[];var nr=new Float32Array(16);var ir=new Float32Array(9);function ar(t,e,r){var n=t[0];if(n<=0||n>0)return t;var i=e*r,a=er[i];if(void 0===a){a=new Float32Array(i);er[i]=a}if(0!==e){n.toArray(a,0);for(var o=1,s=0;o!==e;++o){s+=r;t[o].toArray(a,s)}}return a}function or(t,e){var r=rr[e];if(void 0===r){r=new Int32Array(e);rr[e]=r}for(var n=0;n!==e;++n)r[n]=t.allocTextureUnit();return r}function sr(t,e){t.uniform1f(this.addr,e)}function ur(t,e){t.uniform1i(this.addr,e)}function cr(t,e){if(void 0===e.x)t.uniform2fv(this.addr,e);else t.uniform2f(this.addr,e.x,e.y)}function lr(t,e){if(void 0!==e.x)t.uniform3f(this.addr,e.x,e.y,e.z);else if(void 0!==e.r)t.uniform3f(this.addr,e.r,e.g,e.b);else t.uniform3fv(this.addr,e)}function hr(t,e){if(void 0===e.x)t.uniform4fv(this.addr,e);else t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function fr(t,e){t.uniformMatrix2fv(this.addr,false,e.elements||e)}function pr(t,e){if(void 0===e.elements)t.uniformMatrix3fv(this.addr,false,e);else{ir.set(e.elements);t.uniformMatrix3fv(this.addr,false,ir)}}function dr(t,e){if(void 0===e.elements)t.uniformMatrix4fv(this.addr,false,e);else{nr.set(e.elements);t.uniformMatrix4fv(this.addr,false,nr)}}function vr(t,e,r){var n=r.allocTextureUnit();t.uniform1i(this.addr,n);r.setTexture2D(e||Ke,n)}function mr(t,e,r){var n=r.allocTextureUnit();t.uniform1i(this.addr,n);r.setTextureCube(e||$e,n)}function gr(t,e){t.uniform2iv(this.addr,e)}function yr(t,e){t.uniform3iv(this.addr,e)}function xr(t,e){t.uniform4iv(this.addr,e)}function _r(t){switch(t){case 5126:return sr;case 35664:return cr;case 35665:return lr;case 35666:return hr;case 35674:return fr;case 35675:return pr;case 35676:return dr;case 35678:case 36198:return vr;case 35680:return mr;case 5124:case 35670:return ur;case 35667:case 35671:return gr;case 35668:case 35672:return yr;case 35669:case 35673:return xr}}function br(t,e){t.uniform1fv(this.addr,e)}function wr(t,e){t.uniform1iv(this.addr,e)}function Mr(t,e){t.uniform2fv(this.addr,ar(e,this.size,2))}function Er(t,e){t.uniform3fv(this.addr,ar(e,this.size,3))}function Sr(t,e){t.uniform4fv(this.addr,ar(e,this.size,4))}function Tr(t,e){t.uniformMatrix2fv(this.addr,false,ar(e,this.size,4))}function Ar(t,e){t.uniformMatrix3fv(this.addr,false,ar(e,this.size,9))}function Rr(t,e){t.uniformMatrix4fv(this.addr,false,ar(e,this.size,16))}function Lr(t,e,r){var n=e.length,i=or(r,n);t.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTexture2D(e[a]||Ke,i[a])}function Cr(t,e,r){var n=e.length,i=or(r,n);t.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTextureCube(e[a]||$e,i[a])}function Pr(t){switch(t){case 5126:return br;case 35664:return Mr;case 35665:return Er;case 35666:return Sr;case 35674:return Tr;case 35675:return Ar;case 35676:return Rr;case 35678:return Lr;case 35680:return Cr;case 5124:case 35670:return wr;case 35667:case 35671:return gr;case 35668:case 35672:return yr;case 35669:case 35673:return xr}}function Ir(t,e,r){this.id=t;this.addr=r;this.setValue=_r(e.type)}function Or(t,e,r){this.id=t;this.addr=r;this.size=e.size;this.setValue=Pr(e.type)}function Nr(t){this.id=t;tr.call(this)}Nr.prototype.setValue=function(t,e){var r=this.seq;for(var n=0,i=r.length;n!==i;++n){var a=r[n];a.setValue(t,e[a.id])}};var Ur=/([\w\d_]+)(\])?(\[|\.)?/g;function Dr(t,e){t.seq.push(e);t.map[e.id]=e}function zr(t,e,r){var n=t.name,i=n.length;Ur.lastIndex=0;for(;;){var a=Ur.exec(n),o=Ur.lastIndex,s=a[1],u="]"===a[2],c=a[3];if(u)s|=0;if(void 0===c||"["===c&&o+2===i){Dr(r,void 0===c?new Ir(s,t,e):new Or(s,t,e));break}else{var l=r.map,h=l[s];if(void 0===h){h=new Nr(s);Dr(r,h)}r=h}}}function Br(t,e,r){tr.call(this);this.renderer=r;var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(var i=0;i<n;++i){var a=t.getActiveUniform(e,i),o=a.name,s=t.getUniformLocation(e,o);zr(a,s,this)}}Br.prototype.setValue=function(t,e,r){var n=this.map[e];if(void 0!==n)n.setValue(t,r,this.renderer)};Br.prototype.setOptional=function(t,e,r){var n=e[r];if(void 0!==n)this.setValue(t,r,n)};Br.upload=function(t,e,r,n){for(var i=0,a=e.length;i!==a;++i){var o=e[i],s=r[o.id];if(false!==s.needsUpdate)o.setValue(t,s.value,n)}};Br.seqWithValue=function(t,e){var r=[];for(var n=0,i=t.length;n!==i;++n){var a=t[n];if(a.id in e)r.push(a)}return r};var Fr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function kr(t,e,r){if(void 0===e&&void 0===r)return this.set(t);return this.setRGB(t,e,r)}Object.assign(kr.prototype,{isColor:true,r:1,g:1,b:1,set:function(t){if(t&&t.isColor)this.copy(t);else if("number"===typeof t)this.setHex(t);else if("string"===typeof t)this.setStyle(t);return this},setScalar:function(t){this.r=t;this.g=t;this.b=t;return this},setHex:function(t){t=Math.floor(t);this.r=(t>>16&255)/255;this.g=(t>>8&255)/255;this.b=(255&t)/255;return this},setRGB:function(t,e,r){this.r=t;this.g=e;this.b=r;return this},setHSL:function(){function t(t,e,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return t+6*(e-t)*r;if(r<1/2)return e;if(r<2/3)return t+6*(e-t)*(2/3-r);return t}return function e(r,n,i){r=Fe.euclideanModulo(r,1);n=Fe.clamp(n,0,1);i=Fe.clamp(i,0,1);if(0===n)this.r=this.g=this.b=i;else{var a=i<=.5?i*(1+n):i+n-i*n;var o=2*i-a;this.r=t(o,a,r+1/3);this.g=t(o,a,r);this.b=t(o,a,r-1/3)}return this}}(),setStyle:function(t){function e(e){if(void 0===e)return;if(parseFloat(e)<1)console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n;var i=r[1];var a=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(255,parseInt(n[1],10))/255;this.g=Math.min(255,parseInt(n[2],10))/255;this.b=Math.min(255,parseInt(n[3],10))/255;e(n[5]);return this}if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){this.r=Math.min(100,parseInt(n[1],10))/100;this.g=Math.min(100,parseInt(n[2],10))/100;this.b=Math.min(100,parseInt(n[3],10))/100;e(n[5]);return this}break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360;var s=parseInt(n[2],10)/100;var u=parseInt(n[3],10)/100;e(n[5]);return this.setHSL(o,s,u)}break}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=r[1];var l=c.length;if(3===l){this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255;this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255;this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255;return this}else if(6===l){this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255;this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255;this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255;return this}}if(t&&t.length>0){var c=Fr[t];if(void 0!==c)this.setHex(c);else console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){this.r=t.r;this.g=t.g;this.b=t.b;return this},copyGammaToLinear:function(t,e){if(void 0===e)e=2;this.r=Math.pow(t.r,e);this.g=Math.pow(t.g,e);this.b=Math.pow(t.b,e);return this},copyLinearToGamma:function(t,e){if(void 0===e)e=2;var r=e>0?1/e:1;this.r=Math.pow(t.r,r);this.g=Math.pow(t.g,r);this.b=Math.pow(t.b,r);return this},convertGammaToLinear:function(){var t=this.r,e=this.g,r=this.b;this.r=t*t;this.g=e*e;this.b=r*r;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e=t||{h:0,s:0,l:0};var r=this.r,n=this.g,i=this.b;var a=Math.max(r,n,i);var o=Math.min(r,n,i);var s,u;var c=(o+a)/2;if(o===a){s=0;u=0}else{var l=a-o;u=c<=.5?l/(a+o):l/(2-a-o);switch(a){case r:s=(n-i)/l+(n<i?6:0);break;case n:s=(i-r)/l+2;break;case i:s=(r-n)/l+4;break}s/=6}e.h=s;e.s=u;e.l=c;return e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,r){var n=this.getHSL();n.h+=t;n.s+=e;n.l+=r;this.setHSL(n.h,n.s,n.l);return this},add:function(t){this.r+=t.r;this.g+=t.g;this.b+=t.b;return this},addColors:function(t,e){this.r=t.r+e.r;this.g=t.g+e.g;this.b=t.b+e.b;return this},addScalar:function(t){this.r+=t;this.g+=t;this.b+=t;return this},sub:function(t){this.r=Math.max(0,this.r-t.r);this.g=Math.max(0,this.g-t.g);this.b=Math.max(0,this.b-t.b);return this},multiply:function(t){this.r*=t.r;this.g*=t.g;this.b*=t.b;return this},multiplyScalar:function(t){this.r*=t;this.g*=t;this.b*=t;return this},lerp:function(t,e){this.r+=(t.r-this.r)*e;this.g+=(t.g-this.g)*e;this.b+=(t.b-this.b)*e;return this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){if(void 0===e)e=0;this.r=t[e];this.g=t[e+1];this.b=t[e+2];return this},toArray:function(t,e){if(void 0===t)t=[];if(void 0===e)e=0;t[e]=this.r;t[e+1]=this.g;t[e+2]=this.b;return t},toJSON:function(){return this.getHex()}});var Hr={common:{diffuse:{value:new kr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ve},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new kr(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new kr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Ve}}};var jr={merge:function(t){var e={};for(var r=0;r<t.length;r++){var n=this.clone(t[r]);for(var i in n)e[i]=n[i]}return e},clone:function(t){var e={};for(var r in t){e[r]={};for(var n in t[r]){var i=t[r][n];if(i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture))e[r][n]=i.clone();else if(Array.isArray(i))e[r][n]=i.slice();else e[r][n]=i}}return e}};var Gr="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n";var Vr="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n";var Wr="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n";var Xr="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n";var qr="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif";var Yr="\nvec3 transformed = vec3( position );\n";var Zr="\nvec3 objectNormal = vec3( normal );\n";var Jr="float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n";var Qr="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n";var Kr="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n";var $r="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n";var tn="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n";var en="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n";var rn="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif";var nn="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n";var an="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";var on="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif";var sn="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n";var un="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n";var cn="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n";var ln="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n";var hn="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n";var fn="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n";var pn="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n";var dn="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n";var vn="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n";var mn="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n";var gn="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n";var yn="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n";var xn="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n";var _n="\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif";var bn="#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n";var wn="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n";var Mn="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n";var En="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n";var Sn="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n";var Tn="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif";var An="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n";var Rn="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n";var Ln="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n";var Cn="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n";var Pn="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n";var In="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n";var On="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n";var Nn="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif";var Un="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n";var Dn="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif";var zn="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n";var Bn="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n";var Fn="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n";var kn="#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n";var Hn="#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n";var jn="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n";var Gn="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif";var Vn="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n";var Wn="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif";var Xn="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n";var qn="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n";var Yn="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n";var Zn="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n";var Jn="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n";var Qn="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n";var Kn="#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n";var $n="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n";var ti="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n";var ei="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif";var ri="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n";var ni="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n";var ii="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n";var ai="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n";var oi="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif";var si="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n";var ui="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n";var ci="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n";var li="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif";var hi="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif";var fi="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n";var pi="#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n";var di="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif";var vi="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n";var mi="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif";var gi="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif";var yi="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif";var xi="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif";var _i="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n";var bi="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n";var wi="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n";var Mi="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n";var Ei="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n";var Si="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n";var Ti="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n";var Ai="uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n";var Ri="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n";var Li="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var Ci="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n";var Pi="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var Ii="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n";var Oi="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var Ni="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var Ui="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var Di="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var zi="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n";var Bi="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var Fi="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n";var ki="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n";var Hi="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n";var ji="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var Gi="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n";var Vi="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n";var Wi={alphamap_fragment:Gr,alphamap_pars_fragment:Vr,alphatest_fragment:Wr,aomap_fragment:Xr,aomap_pars_fragment:qr,begin_vertex:Yr,beginnormal_vertex:Zr,bsdfs:Jr,bumpmap_pars_fragment:Qr,clipping_planes_fragment:Kr,clipping_planes_pars_fragment:$r,clipping_planes_pars_vertex:tn,clipping_planes_vertex:en,color_fragment:rn,color_pars_fragment:nn,color_pars_vertex:an,color_vertex:on,common:sn,cube_uv_reflection_fragment:un,defaultnormal_vertex:cn,displacementmap_pars_vertex:ln,displacementmap_vertex:hn,emissivemap_fragment:fn,emissivemap_pars_fragment:pn,encodings_fragment:dn,encodings_pars_fragment:vn,envmap_fragment:mn,envmap_pars_fragment:gn,envmap_pars_vertex:yn,envmap_vertex:xn,fog_vertex:_n,fog_pars_vertex:bn,fog_fragment:wn,fog_pars_fragment:Mn,gradientmap_pars_fragment:En,lightmap_fragment:Sn,lightmap_pars_fragment:Tn,lights_lambert_vertex:An,lights_pars:Rn,lights_phong_fragment:Ln,lights_phong_pars_fragment:Cn,lights_physical_fragment:Pn,lights_physical_pars_fragment:In,lights_template:On,logdepthbuf_fragment:Nn,logdepthbuf_pars_fragment:Un,logdepthbuf_pars_vertex:Dn,logdepthbuf_vertex:zn,map_fragment:Bn,map_pars_fragment:Fn,map_particle_fragment:kn,map_particle_pars_fragment:Hn,metalnessmap_fragment:jn,metalnessmap_pars_fragment:Gn,morphnormal_vertex:Vn,morphtarget_pars_vertex:Wn,morphtarget_vertex:Xn,normal_fragment:qn,normalmap_pars_fragment:Yn,packing:Zn,premultiplied_alpha_fragment:Jn,project_vertex:Qn,dithering_fragment:Kn,dithering_pars_fragment:$n,roughnessmap_fragment:ti,roughnessmap_pars_fragment:ei,shadowmap_pars_fragment:ri,shadowmap_pars_vertex:ni,shadowmap_vertex:ii,shadowmask_pars_fragment:ai,skinbase_vertex:oi,skinning_pars_vertex:si,skinning_vertex:ui,skinnormal_vertex:ci,specularmap_fragment:li,specularmap_pars_fragment:hi,tonemapping_fragment:fi,tonemapping_pars_fragment:pi,uv_pars_fragment:di,uv_pars_vertex:vi,uv_vertex:mi,uv2_pars_fragment:gi,uv2_pars_vertex:yi,uv2_vertex:xi,worldpos_vertex:_i,cube_frag:bi,cube_vert:wi,depth_frag:Mi,depth_vert:Ei,distanceRGBA_frag:Si,distanceRGBA_vert:Ti,equirect_frag:Ai,equirect_vert:Ri,linedashed_frag:Li,linedashed_vert:Ci,meshbasic_frag:Pi,meshbasic_vert:Ii,meshlambert_frag:Oi,meshlambert_vert:Ni,meshphong_frag:Ui,meshphong_vert:Di,meshphysical_frag:zi,meshphysical_vert:Bi,normal_frag:Fi,normal_vert:ki,points_frag:Hi,points_vert:ji,shadow_frag:Gi,shadow_vert:Vi};var Xi={basic:{uniforms:jr.merge([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.fog]),vertexShader:Wi.meshbasic_vert,fragmentShader:Wi.meshbasic_frag},lambert:{uniforms:jr.merge([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.fog,Hr.lights,{emissive:{value:new kr(0)}}]),vertexShader:Wi.meshlambert_vert,fragmentShader:Wi.meshlambert_frag},phong:{uniforms:jr.merge([Hr.common,Hr.specularmap,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.gradientmap,Hr.fog,Hr.lights,{emissive:{value:new kr(0)},specular:{value:new kr(1118481)},shininess:{value:30}}]),vertexShader:Wi.meshphong_vert,fragmentShader:Wi.meshphong_frag},standard:{uniforms:jr.merge([Hr.common,Hr.envmap,Hr.aomap,Hr.lightmap,Hr.emissivemap,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,Hr.roughnessmap,Hr.metalnessmap,Hr.fog,Hr.lights,{emissive:{value:new kr(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Wi.meshphysical_vert,fragmentShader:Wi.meshphysical_frag},points:{uniforms:jr.merge([Hr.points,Hr.fog]),vertexShader:Wi.points_vert,fragmentShader:Wi.points_frag},dashed:{uniforms:jr.merge([Hr.common,Hr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wi.linedashed_vert,fragmentShader:Wi.linedashed_frag},depth:{uniforms:jr.merge([Hr.common,Hr.displacementmap]),vertexShader:Wi.depth_vert,fragmentShader:Wi.depth_frag},normal:{uniforms:jr.merge([Hr.common,Hr.bumpmap,Hr.normalmap,Hr.displacementmap,{opacity:{value:1}}]),vertexShader:Wi.normal_vert,fragmentShader:Wi.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wi.cube_vert,fragmentShader:Wi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wi.equirect_vert,fragmentShader:Wi.equirect_frag},distanceRGBA:{uniforms:jr.merge([Hr.common,Hr.displacementmap,{referencePosition:{value:new Ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wi.distanceRGBA_vert,fragmentShader:Wi.distanceRGBA_frag},shadow:{uniforms:jr.merge([Hr.lights,Hr.fog,{color:{value:new kr(0)},opacity:{value:1}}]),vertexShader:Wi.shadow_vert,fragmentShader:Wi.shadow_frag}};Xi.physical={uniforms:jr.merge([Xi.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Wi.meshphysical_vert,fragmentShader:Wi.meshphysical_frag};function qi(t,e,r,n,i,a,o,s,u){Xe.call(this,t,e,r,n,i,a,o,s,u);this.needsUpdate=true}qi.prototype=Object.create(Xe.prototype);qi.prototype.constructor=qi;function Yi(t,e,r,n,i){var a,o;var s,u,c;var l;var h=new Ge;var f=new je;var p=new Ge;function d(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);var r=new Uint16Array([0,1,2,0,2,3]);a=e.createBuffer();o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a);e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o);e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW);s=v();u={position:e.getAttribLocation(s,"position"),uv:e.getAttribLocation(s,"uv")};c={uvOffset:e.getUniformLocation(s,"uvOffset"),uvScale:e.getUniformLocation(s,"uvScale"),rotation:e.getUniformLocation(s,"rotation"),center:e.getUniformLocation(s,"center"),scale:e.getUniformLocation(s,"scale"),color:e.getUniformLocation(s,"color"),map:e.getUniformLocation(s,"map"),opacity:e.getUniformLocation(s,"opacity"),modelViewMatrix:e.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:e.getUniformLocation(s,"projectionMatrix"),fogType:e.getUniformLocation(s,"fogType"),fogDensity:e.getUniformLocation(s,"fogDensity"),fogNear:e.getUniformLocation(s,"fogNear"),fogFar:e.getUniformLocation(s,"fogFar"),fogColor:e.getUniformLocation(s,"fogColor"),fogDepth:e.getUniformLocation(s,"fogDepth"),alphaTest:e.getUniformLocation(s,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8;n.height=8;var i=n.getContext("2d");i.fillStyle="white";i.fillRect(0,0,8,8);l=new qi(n)}this.render=function(i,v,g){if(0===i.length)return;if(void 0===s)d();r.useProgram(s);r.initAttributes();r.enableAttribute(u.position);r.enableAttribute(u.uv);r.disableUnusedAttributes();r.disable(e.CULL_FACE);r.enable(e.BLEND);e.bindBuffer(e.ARRAY_BUFFER,a);e.vertexAttribPointer(u.position,2,e.FLOAT,false,2*8,0);e.vertexAttribPointer(u.uv,2,e.FLOAT,false,2*8,8);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o);e.uniformMatrix4fv(c.projectionMatrix,false,g.projectionMatrix.elements);r.activeTexture(e.TEXTURE0);e.uniform1i(c.map,0);var y=0;var x=0;var _=v.fog;if(_){e.uniform3f(c.fogColor,_.color.r,_.color.g,_.color.b);if(_.isFog){e.uniform1f(c.fogNear,_.near);e.uniform1f(c.fogFar,_.far);e.uniform1i(c.fogType,1);y=1;x=1}else if(_.isFogExp2){e.uniform1f(c.fogDensity,_.density);e.uniform1i(c.fogType,2);y=2;x=2}}else{e.uniform1i(c.fogType,0);y=0;x=0}for(var b=0,w=i.length;b<w;b++){var M=i[b];M.modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,M.matrixWorld);M.z=-M.modelViewMatrix.elements[14]}i.sort(m);var E=[];var S=[];for(var b=0,w=i.length;b<w;b++){var M=i[b];var T=M.material;if(false===T.visible)continue;M.onBeforeRender(t,v,g,void 0,T,void 0);e.uniform1f(c.alphaTest,T.alphaTest);e.uniformMatrix4fv(c.modelViewMatrix,false,M.modelViewMatrix.elements);M.matrixWorld.decompose(h,f,p);E[0]=p.x;E[1]=p.y;S[0]=M.center.x-.5;S[1]=M.center.y-.5;var A=0;if(v.fog&&T.fog)A=x;if(y!==A){e.uniform1i(c.fogType,A);y=A}if(null!==T.map){e.uniform2f(c.uvOffset,T.map.offset.x,T.map.offset.y);e.uniform2f(c.uvScale,T.map.repeat.x,T.map.repeat.y)}else{e.uniform2f(c.uvOffset,0,0);e.uniform2f(c.uvScale,1,1)}e.uniform1f(c.opacity,T.opacity);e.uniform3f(c.color,T.color.r,T.color.g,T.color.b);e.uniform1f(c.rotation,T.rotation);e.uniform2fv(c.center,S);e.uniform2fv(c.scale,E);r.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst,T.blendEquationAlpha,T.blendSrcAlpha,T.blendDstAlpha,T.premultipliedAlpha);r.buffers.depth.setTest(T.depthTest);r.buffers.depth.setMask(T.depthWrite);r.buffers.color.setMask(T.colorWrite);n.setTexture2D(T.map||l,0);e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0);M.onAfterRender(t,v,g,void 0,T,void 0)}r.enable(e.CULL_FACE);r.reset()};function v(){var t=e.createProgram();var r=e.createShader(e.VERTEX_SHADER);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,["precision "+i.precision+" float;","#define SHADER_NAME "+"SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n"));e.shaderSource(n,["precision "+i.precision+" float;","#define SHADER_NAME "+"SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n"));e.compileShader(r);e.compileShader(n);e.attachShader(t,r);e.attachShader(t,n);e.linkProgram(t);return t}function m(t,e){if(t.renderOrder!==e.renderOrder)return t.renderOrder-e.renderOrder;else if(t.z!==e.z)return e.z-t.z;else return e.id-t.id}}var Zi=0;function Ji(){Object.defineProperty(this,"id",{value:Zi++});this.uuid=Fe.generateUUID();this.name="";this.type="Material";this.fog=true;this.lights=true;this.blending=R;this.side=x;this.flatShading=false;this.vertexColors=E;this.opacity=1;this.transparent=false;this.blendSrc=j;this.blendDst=G;this.blendEquation=O;this.blendSrcAlpha=null;this.blendDstAlpha=null;this.blendEquationAlpha=null;this.depthFunc=K;this.depthTest=true;this.depthWrite=true;this.clippingPlanes=null;this.clipIntersection=false;this.clipShadows=false;this.shadowSide=null;this.colorWrite=true;this.precision=null;this.polygonOffset=false;this.polygonOffsetFactor=0;this.polygonOffsetUnits=0;this.dithering=false;this.alphaTest=0;this.premultipliedAlpha=false;this.overdraw=0;this.visible=true;this.userData={};this.needsUpdate=true}Ji.prototype=Object.assign(Object.create(s.prototype),{constructor:Ji,isMaterial:true,onBeforeCompile:function(){},setValues:function(t){if(void 0===t)return;for(var e in t){var r=t[e];if(void 0===r){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=r===w?true:false;continue}var n=this[e];if(void 0===n){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}if(n&&n.isColor)n.set(r);else if(n&&n.isVector3&&r&&r.isVector3)n.copy(r);else if("overdraw"===e)this[e]=Number(r);else this[e]=r}},toJSON:function(t){var e=void 0===t||"string"===typeof t;if(e)t={textures:{},images:{}};var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid;r.type=this.type;if(""!==this.name)r.name=this.name;if(this.color&&this.color.isColor)r.color=this.color.getHex();if(void 0!==this.roughness)r.roughness=this.roughness;if(void 0!==this.metalness)r.metalness=this.metalness;if(this.emissive&&this.emissive.isColor)r.emissive=this.emissive.getHex();if(1!==this.emissiveIntensity)r.emissiveIntensity=this.emissiveIntensity;if(this.specular&&this.specular.isColor)r.specular=this.specular.getHex();if(void 0!==this.shininess)r.shininess=this.shininess;if(void 0!==this.clearCoat)r.clearCoat=this.clearCoat;if(void 0!==this.clearCoatRoughness)r.clearCoatRoughness=this.clearCoatRoughness;if(this.map&&this.map.isTexture)r.map=this.map.toJSON(t).uuid;if(this.alphaMap&&this.alphaMap.isTexture)r.alphaMap=this.alphaMap.toJSON(t).uuid;if(this.lightMap&&this.lightMap.isTexture)r.lightMap=this.lightMap.toJSON(t).uuid;if(this.bumpMap&&this.bumpMap.isTexture){r.bumpMap=this.bumpMap.toJSON(t).uuid;r.bumpScale=this.bumpScale}if(this.normalMap&&this.normalMap.isTexture){r.normalMap=this.normalMap.toJSON(t).uuid;r.normalScale=this.normalScale.toArray()}if(this.displacementMap&&this.displacementMap.isTexture){r.displacementMap=this.displacementMap.toJSON(t).uuid;r.displacementScale=this.displacementScale;r.displacementBias=this.displacementBias}if(this.roughnessMap&&this.roughnessMap.isTexture)r.roughnessMap=this.roughnessMap.toJSON(t).uuid;if(this.metalnessMap&&this.metalnessMap.isTexture)r.metalnessMap=this.metalnessMap.toJSON(t).uuid;if(this.emissiveMap&&this.emissiveMap.isTexture)r.emissiveMap=this.emissiveMap.toJSON(t).uuid;if(this.specularMap&&this.specularMap.isTexture)r.specularMap=this.specularMap.toJSON(t).uuid;if(this.envMap&&this.envMap.isTexture){r.envMap=this.envMap.toJSON(t).uuid;r.reflectivity=this.reflectivity}if(this.gradientMap&&this.gradientMap.isTexture)r.gradientMap=this.gradientMap.toJSON(t).uuid;if(void 0!==this.size)r.size=this.size;if(void 0!==this.sizeAttenuation)r.sizeAttenuation=this.sizeAttenuation;if(this.blending!==R)r.blending=this.blending;if(true===this.flatShading)r.flatShading=this.flatShading;if(this.side!==x)r.side=this.side;if(this.vertexColors!==E)r.vertexColors=this.vertexColors;if(this.opacity<1)r.opacity=this.opacity;if(true===this.transparent)r.transparent=this.transparent;r.depthFunc=this.depthFunc;r.depthTest=this.depthTest;r.depthWrite=this.depthWrite;if(0!==this.rotation)r.rotation=this.rotation;if(1!==this.linewidth)r.linewidth=this.linewidth;if(void 0!==this.dashSize)r.dashSize=this.dashSize;if(void 0!==this.gapSize)r.gapSize=this.gapSize;if(void 0!==this.scale)r.scale=this.scale;if(true===this.dithering)r.dithering=true;if(this.alphaTest>0)r.alphaTest=this.alphaTest;if(true===this.premultipliedAlpha)r.premultipliedAlpha=this.premultipliedAlpha;if(true===this.wireframe)r.wireframe=this.wireframe;if(this.wireframeLinewidth>1)r.wireframeLinewidth=this.wireframeLinewidth;if("round"!==this.wireframeLinecap)r.wireframeLinecap=this.wireframeLinecap;if("round"!==this.wireframeLinejoin)r.wireframeLinejoin=this.wireframeLinejoin;if(true===this.morphTargets)r.morphTargets=true;if(true===this.skinning)r.skinning=true;if(false===this.visible)r.visible=false;if("{}"!==JSON.stringify(this.userData))r.userData=this.userData;function n(t){var e=[];for(var r in t){var n=t[r];delete n.metadata;e.push(n)}return e}if(e){var i=n(t.textures);var a=n(t.images);if(i.length>0)r.textures=i;if(a.length>0)r.images=a}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name;this.fog=t.fog;this.lights=t.lights;this.blending=t.blending;this.side=t.side;this.flatShading=t.flatShading;this.vertexColors=t.vertexColors;this.opacity=t.opacity;this.transparent=t.transparent;this.blendSrc=t.blendSrc;this.blendDst=t.blendDst;this.blendEquation=t.blendEquation;this.blendSrcAlpha=t.blendSrcAlpha;this.blendDstAlpha=t.blendDstAlpha;this.blendEquationAlpha=t.blendEquationAlpha;this.depthFunc=t.depthFunc;this.depthTest=t.depthTest;this.depthWrite=t.depthWrite;this.colorWrite=t.colorWrite;this.precision=t.precision;this.polygonOffset=t.polygonOffset;this.polygonOffsetFactor=t.polygonOffsetFactor;this.polygonOffsetUnits=t.polygonOffsetUnits;this.dithering=t.dithering;this.alphaTest=t.alphaTest;this.premultipliedAlpha=t.premultipliedAlpha;this.overdraw=t.overdraw;this.visible=t.visible;this.userData=JSON.parse(JSON.stringify(t.userData));this.clipShadows=t.clipShadows;this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,r=null;if(null!==e){var n=e.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=e[i].clone()}this.clippingPlanes=r;this.shadowSide=t.shadowSide;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Qi(t){Ji.call(this);this.type="MeshDepthMaterial";this.depthPacking=ze;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.setValues(t)}Qi.prototype=Object.create(Ji.prototype);Qi.prototype.constructor=Qi;Qi.prototype.isMeshDepthMaterial=true;Qi.prototype.copy=function(t){Ji.prototype.copy.call(this,t);this.depthPacking=t.depthPacking;this.skinning=t.skinning;this.morphTargets=t.morphTargets;this.map=t.map;this.alphaMap=t.alphaMap;this.displacementMap=t.displacementMap;this.displacementScale=t.displacementScale;this.displacementBias=t.displacementBias;this.wireframe=t.wireframe;this.wireframeLinewidth=t.wireframeLinewidth;return this};function Ki(t){Ji.call(this);this.type="MeshDistanceMaterial";this.referencePosition=new Ge;this.nearDistance=1;this.farDistance=1e3;this.skinning=false;this.morphTargets=false;this.map=null;this.alphaMap=null;this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.fog=false;this.lights=false;this.setValues(t)}Ki.prototype=Object.create(Ji.prototype);Ki.prototype.constructor=Ki;Ki.prototype.isMeshDistanceMaterial=true;Ki.prototype.copy=function(t){Ji.prototype.copy.call(this,t);this.referencePosition.copy(t.referencePosition);this.nearDistance=t.nearDistance;this.farDistance=t.farDistance;this.skinning=t.skinning;this.morphTargets=t.morphTargets;this.map=t.map;this.alphaMap=t.alphaMap;this.displacementMap=t.displacementMap;this.displacementScale=t.displacementScale;this.displacementBias=t.displacementBias;return this};function $i(t,e){this.min=void 0!==t?t:new Ge(+Infinity,+Infinity,+Infinity);this.max=void 0!==e?e:new Ge(-Infinity,-Infinity,-Infinity)}Object.assign($i.prototype,{isBox3:true,set:function(t,e){this.min.copy(t);this.max.copy(e);return this},setFromArray:function(t){var e=+Infinity;var r=+Infinity;var n=+Infinity;var i=-Infinity;var a=-Infinity;var o=-Infinity;for(var s=0,u=t.length;s<u;s+=3){var c=t[s];var l=t[s+1];var h=t[s+2];if(c<e)e=c;if(l<r)r=l;if(h<n)n=h;if(c>i)i=c;if(l>a)a=l;if(h>o)o=h}this.min.set(e,r,n);this.max.set(i,a,o);return this},setFromBufferAttribute:function(t){var e=+Infinity;var r=+Infinity;var n=+Infinity;var i=-Infinity;var a=-Infinity;var o=-Infinity;for(var s=0,u=t.count;s<u;s++){var c=t.getX(s);var l=t.getY(s);var h=t.getZ(s);if(c<e)e=c;if(l<r)r=l;if(h<n)n=h;if(c>i)i=c;if(l>a)a=l;if(h>o)o=h}this.min.set(e,r,n);this.max.set(i,a,o);return this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new Ge;return function e(r,n){var i=t.copy(n).multiplyScalar(.5);this.min.copy(r).sub(i);this.max.copy(r).add(i);return this}}(),setFromObject:function(t){this.makeEmpty();return this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.min.copy(t.min);this.max.copy(t.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=+Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new Ge;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new Ge;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){this.min.min(t);this.max.max(t);return this},expandByVector:function(t){this.min.sub(t);this.max.add(t);return this},expandByScalar:function(t){this.min.addScalar(-t);this.max.addScalar(t);return this},expandByObject:function(){var t,e,r;var n=new Ge;function i(i){var a=i.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(e=0,r=o.length;e<r;e++){n.copy(o[e]);n.applyMatrix4(i.matrixWorld);t.expandByPoint(n)}}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(e=0,r=s.count;e<r;e++){n.fromBufferAttribute(s,e).applyMatrix4(i.matrixWorld);t.expandByPoint(n)}}}return function e(r){t=this;r.updateMatrixWorld(true);r.traverse(i);return this}}(),containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z?false:true},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){var r=e||new Ge;return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z?false:true},intersectsSphere:function(){var t=new Ge;return function e(r){this.clampPoint(r.center,t);return t.distanceToSquared(r.center)<=r.radius*r.radius}}(),intersectsPlane:function(t){var e,r;if(t.normal.x>0){e=t.normal.x*this.min.x;r=t.normal.x*this.max.x}else{e=t.normal.x*this.max.x;r=t.normal.x*this.min.x}if(t.normal.y>0){e+=t.normal.y*this.min.y;r+=t.normal.y*this.max.y}else{e+=t.normal.y*this.max.y;r+=t.normal.y*this.min.y}if(t.normal.z>0){e+=t.normal.z*this.min.z;r+=t.normal.z*this.max.z}else{e+=t.normal.z*this.max.z;r+=t.normal.z*this.min.z}return e<=t.constant&&r>=t.constant},intersectsTriangle:function(){var t=new Ge;var e=new Ge;var r=new Ge;var n=new Ge;var i=new Ge;var a=new Ge;var o=new Ge;var s=new Ge;var u=new Ge;var c=new Ge;function l(n){var i,a;for(i=0,a=n.length-3;i<=a;i+=3){o.fromArray(n,i);var s=u.x*Math.abs(o.x)+u.y*Math.abs(o.y)+u.z*Math.abs(o.z);var c=t.dot(o);var l=e.dot(o);var h=r.dot(o);if(Math.max(-Math.max(c,l,h),Math.min(c,l,h))>s)return false}return true}return function o(h){if(this.isEmpty())return false;this.getCenter(s);u.subVectors(this.max,s);t.subVectors(h.a,s);e.subVectors(h.b,s);r.subVectors(h.c,s);n.subVectors(e,t);i.subVectors(r,e);a.subVectors(t,r);var f=[0,-n.z,n.y,0,-i.z,i.y,0,-a.z,a.y,n.z,0,-n.x,i.z,0,-i.x,a.z,0,-a.x,-n.y,n.x,0,-i.y,i.x,0,-a.y,a.x,0];if(!l(f))return false;f=[1,0,0,0,1,0,0,0,1];if(!l(f))return false;c.crossVectors(n,i);f=[c.x,c.y,c.z];return l(f)}}(),clampPoint:function(t,e){var r=e||new Ge;return r.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new Ge;return function e(r){var n=t.copy(r).clamp(this.min,this.max);return n.sub(r).length()}}(),getBoundingSphere:function(){var t=new Ge;return function e(r){var n=r||new ta;this.getCenter(n.center);n.radius=.5*this.getSize(t).length();return n}}(),intersect:function(t){this.min.max(t.min);this.max.min(t.max);if(this.isEmpty())this.makeEmpty();return this},union:function(t){this.min.min(t.min);this.max.max(t.max);return this},applyMatrix4:function(){var t=[new Ge,new Ge,new Ge,new Ge,new Ge,new Ge,new Ge,new Ge];return function e(r){if(this.isEmpty())return this;t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r);t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r);t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r);t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r);t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r);t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r);t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r);t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r);this.setFromPoints(t);return this}}(),translate:function(t){this.min.add(t);this.max.add(t);return this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});function ta(t,e){this.center=void 0!==t?t:new Ge;this.radius=void 0!==e?e:0}Object.assign(ta.prototype,{set:function(t,e){this.center.copy(t);this.radius=e;return this},setFromPoints:function(){var t=new $i;return function e(r,n){var i=this.center;if(void 0!==n)i.copy(n);else t.setFromPoints(r).getCenter(i);var a=0;for(var o=0,s=r.length;o<s;o++)a=Math.max(a,i.distanceToSquared(r[o]));this.radius=Math.sqrt(a);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.center.copy(t.center);this.radius=t.radius;return this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var r=this.center.distanceToSquared(t);var n=e||new Ge;n.copy(t);if(r>this.radius*this.radius){n.sub(this.center).normalize();n.multiplyScalar(this.radius).add(this.center)}return n},getBoundingBox:function(t){var e=t||new $i;e.set(this.center,this.center);e.expandByScalar(this.radius);return e},applyMatrix4:function(t){this.center.applyMatrix4(t);this.radius=this.radius*t.getMaxScaleOnAxis();return this},translate:function(t){this.center.add(t);return this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});function ea(t,e){this.normal=void 0!==t?t:new Ge(1,0,0);this.constant=void 0!==e?e:0}Object.assign(ea.prototype,{set:function(t,e){this.normal.copy(t);this.constant=e;return this},setComponents:function(t,e,r,n){this.normal.set(t,e,r);this.constant=n;return this},setFromNormalAndCoplanarPoint:function(t,e){this.normal.copy(t);this.constant=-e.dot(this.normal);return this},setFromCoplanarPoints:function(){var t=new Ge;var e=new Ge;return function r(n,i,a){var o=t.subVectors(a,i).cross(e.subVectors(n,i)).normalize();this.setFromNormalAndCoplanarPoint(o,n);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.normal.copy(t.normal);this.constant=t.constant;return this},normalize:function(){var t=1/this.normal.length();this.normal.multiplyScalar(t);this.constant*=t;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){var r=e||new Ge;return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new Ge;return function e(r,n){var i=n||new Ge;var a=r.delta(t);var o=this.normal.dot(a);if(0===o){if(0===this.distanceToPoint(r.start))return i.copy(r.start);return}var s=-(r.start.dot(this.normal)+this.constant)/o;if(s<0||s>1)return;return i.copy(a).multiplyScalar(s).add(r.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start);var r=this.distanceToPoint(t.end);return e<0&&r>0||r<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){var e=t||new Ge;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new Ge;var e=new Ve;return function r(n,i){var a=i||e.getNormalMatrix(n);var o=this.coplanarPoint(t).applyMatrix4(n);var s=this.normal.applyMatrix3(a).normalize();this.constant=-o.dot(s);return this}}(),translate:function(t){this.constant-=t.dot(this.normal);return this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});function ra(t,e,r,n,i,a){this.planes=[void 0!==t?t:new ea,void 0!==e?e:new ea,void 0!==r?r:new ea,void 0!==n?n:new ea,void 0!==i?i:new ea,void 0!==a?a:new ea]}Object.assign(ra.prototype,{set:function(t,e,r,n,i,a){var o=this.planes;o[0].copy(t);o[1].copy(e);o[2].copy(r);o[3].copy(n);o[4].copy(i);o[5].copy(a);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){var e=this.planes;for(var r=0;r<6;r++)e[r].copy(t.planes[r]);return this},setFromMatrix:function(t){var e=this.planes;var r=t.elements;var n=r[0],i=r[1],a=r[2],o=r[3];var s=r[4],u=r[5],c=r[6],l=r[7];var h=r[8],f=r[9],p=r[10],d=r[11];var v=r[12],m=r[13],g=r[14],y=r[15];e[0].setComponents(o-n,l-s,d-h,y-v).normalize();e[1].setComponents(o+n,l+s,d+h,y+v).normalize();e[2].setComponents(o+i,l+u,d+f,y+m).normalize();e[3].setComponents(o-i,l-u,d-f,y-m).normalize();e[4].setComponents(o-a,l-c,d-p,y-g).normalize();e[5].setComponents(o+a,l+c,d+p,y+g).normalize();return this},intersectsObject:function(){var t=new ta;return function e(r){var n=r.geometry;if(null===n.boundingSphere)n.computeBoundingSphere();t.copy(n.boundingSphere).applyMatrix4(r.matrixWorld);return this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new ta;return function e(r){t.center.set(0,0,0);t.radius=.7071067811865476;t.applyMatrix4(r.matrixWorld);return this.intersectsSphere(t)}}(),intersectsSphere:function(t){var e=this.planes;var r=t.center;var n=-t.radius;for(var i=0;i<6;i++){var a=e[i].distanceToPoint(r);if(a<n)return false}return true},intersectsBox:function(){var t=new Ge,e=new Ge;return function r(n){var i=this.planes;for(var a=0;a<6;a++){var o=i[a];t.x=o.normal.x>0?n.min.x:n.max.x;e.x=o.normal.x>0?n.max.x:n.min.x;t.y=o.normal.y>0?n.min.y:n.max.y;e.y=o.normal.y>0?n.max.y:n.min.y;t.z=o.normal.z>0?n.min.z:n.max.z;e.z=o.normal.z>0?n.max.z:n.min.z;var s=o.distanceToPoint(t);var u=o.distanceToPoint(e);if(s<0&&u<0)return false}return true}}(),containsPoint:function(t){var e=this.planes;for(var r=0;r<6;r++)if(e[r].distanceToPoint(t)<0)return false;return true}});function na(t,e,r){var n=new ra,i=new He,a=new ke,o=new ke(r,r),s=new Ge,u=new Ge,c=1,l=2,h=(c|l)+1,f=new Array(h),p=new Array(h),d={};var v={0:_,1:x,2:b};var m=[new Ge(1,0,0),new Ge(-1,0,0),new Ge(0,0,1),new Ge(0,0,-1),new Ge(0,1,0),new Ge(0,-1,0)];var y=[new Ge(0,1,0),new Ge(0,1,0),new Ge(0,1,0),new Ge(0,1,0),new Ge(0,0,1),new Ge(0,0,-1)];var w=[new qe,new qe,new qe,new qe,new qe,new qe];for(var M=0;M!==h;++M){var E=0!==(M&c);var S=0!==(M&l);var T=new Qi({depthPacking:Be,morphTargets:E,skinning:S});f[M]=T;var A=new Ki({morphTargets:E,skinning:S});p[M]=A}var R=this;this.enabled=false;this.autoUpdate=true;this.needsUpdate=false;this.type=g;this.render=function(e,r,c){if(false===R.enabled)return;if(false===R.autoUpdate&&false===R.needsUpdate)return;if(0===e.length)return;var l=t.context;var h=t.state;h.disable(l.BLEND);h.buffers.color.setClear(1,1,1,1);h.buffers.depth.setTest(true);h.setScissorTest(false);var f;for(var p=0,d=e.length;p<d;p++){var v=e[p];var g=v.shadow;var x=v&&v.isPointLight;if(void 0===g){console.warn("THREE.WebGLShadowMap:",v,"has no shadow.");continue}var _=g.camera;a.copy(g.mapSize);a.min(o);if(x){var b=a.x;var M=a.y;w[0].set(2*b,M,b,M);w[1].set(0,M,b,M);w[2].set(3*b,M,b,M);w[3].set(b,M,b,M);w[4].set(3*b,0,b,M);w[5].set(b,0,b,M);a.x*=4;a.y*=2}if(null===g.map){var E={minFilter:wt,magFilter:wt,format:jt};g.map=new Ye(a.x,a.y,E);g.map.texture.name=v.name+".shadowMap";_.updateProjectionMatrix()}if(g.isSpotLightShadow)g.update(v);var S=g.map;var T=g.matrix;u.setFromMatrixPosition(v.matrixWorld);_.position.copy(u);if(x){f=6;T.makeTranslation(-u.x,-u.y,-u.z)}else{f=1;s.setFromMatrixPosition(v.target.matrixWorld);_.lookAt(s);_.updateMatrixWorld();T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);T.multiply(_.projectionMatrix);T.multiply(_.matrixWorldInverse)}t.setRenderTarget(S);t.clear();for(var A=0;A<f;A++){if(x){s.copy(_.position);s.add(m[A]);_.up.copy(y[A]);_.lookAt(s);_.updateMatrixWorld();var L=w[A];h.viewport(L)}i.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse);n.setFromMatrix(i);C(r,c,_,x)}}R.needsUpdate=false};function L(e,r,n,i,a,o){var s=e.geometry;var u=null;var h=f;var m=e.customDepthMaterial;if(n){h=p;m=e.customDistanceMaterial}if(!m){var g=false;if(r.morphTargets)if(s&&s.isBufferGeometry)g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0;else if(s&&s.isGeometry)g=s.morphTargets&&s.morphTargets.length>0;if(e.isSkinnedMesh&&false===r.skinning)console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var y=e.isSkinnedMesh&&r.skinning;var x=0;if(g)x|=c;if(y)x|=l;u=h[x]}else u=m;if(t.localClippingEnabled&&true===r.clipShadows&&0!==r.clippingPlanes.length){var _=u.uuid,b=r.uuid;var w=d[_];if(void 0===w){w={};d[_]=w}var M=w[b];if(void 0===M){M=u.clone();w[b]=M}u=M}u.visible=r.visible;u.wireframe=r.wireframe;u.side=null!=r.shadowSide?r.shadowSide:v[r.side];u.clipShadows=r.clipShadows;u.clippingPlanes=r.clippingPlanes;u.clipIntersection=r.clipIntersection;u.wireframeLinewidth=r.wireframeLinewidth;u.linewidth=r.linewidth;if(n&&u.isMeshDistanceMaterial){u.referencePosition.copy(i);u.nearDistance=a;u.farDistance=o}return u}function C(r,i,a,o){if(false===r.visible)return;var s=r.layers.test(i.layers);if(s&&(r.isMesh||r.isLine||r.isPoints))if(r.castShadow&&(!r.frustumCulled||n.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,r.matrixWorld);var c=e.update(r);var l=r.material;if(Array.isArray(l)){var h=c.groups;for(var f=0,p=h.length;f<p;f++){var d=h[f];var v=l[d.materialIndex];if(v&&v.visible){var m=L(r,v,o,u,a.near,a.far);t.renderBufferDirect(a,null,c,m,r,d)}}}else if(l.visible){var m=L(r,l,o,u,a.near,a.far);t.renderBufferDirect(a,null,c,m,r,null)}}var g=r.children;for(var y=0,x=g.length;y<x;y++)C(g[y],i,a,o)}}function ia(t){var e={};function r(e,r){var n=e.array;var i=e.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;var a=t.createBuffer();t.bindBuffer(r,a);t.bufferData(r,n,i);e.onUploadCallback();var o=t.FLOAT;if(n instanceof Float32Array)o=t.FLOAT;else if(n instanceof Float64Array)console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.");else if(n instanceof Uint16Array)o=t.UNSIGNED_SHORT;else if(n instanceof Int16Array)o=t.SHORT;else if(n instanceof Uint32Array)o=t.UNSIGNED_INT;else if(n instanceof Int32Array)o=t.INT;else if(n instanceof Int8Array)o=t.BYTE;else if(n instanceof Uint8Array)o=t.UNSIGNED_BYTE;return{buffer:a,type:o,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}function n(e,r,n){var i=r.array;var a=r.updateRange;t.bindBuffer(n,e);if(false===r.dynamic)t.bufferData(n,i,t.STATIC_DRAW);else if(-1===a.count)t.bufferSubData(n,0,i);else if(0===a.count)console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.");else{t.bufferSubData(n,a.offset*i.BYTES_PER_ELEMENT,i.subarray(a.offset,a.offset+a.count));a.count=-1}}function i(t){if(t.isInterleavedBufferAttribute)t=t.data;return e[t.uuid]}function a(r){if(r.isInterleavedBufferAttribute)r=r.data;var n=e[r.uuid];if(n){t.deleteBuffer(n.buffer);delete e[r.uuid]}}function o(t,i){if(t.isInterleavedBufferAttribute)t=t.data;var a=e[t.uuid];if(void 0===a)e[t.uuid]=r(t,i);else if(a.version<t.version){n(a.buffer,t,i);a.version=t.version}}return{get:i,remove:a,update:o}}function aa(t,e,r,n){this._x=t||0;this._y=e||0;this._z=r||0;this._order=n||aa.DefaultOrder}aa.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];aa.DefaultOrder="XYZ";Object.defineProperties(aa.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t;this.onChangeCallback()}}});Object.assign(aa.prototype,{isEuler:true,set:function(t,e,r,n){this._x=t;this._y=e;this._z=r;this._order=n||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){this._x=t._x;this._y=t._y;this._z=t._z;this._order=t._order;this.onChangeCallback();return this},setFromRotationMatrix:function(t,e,r){var n=Fe.clamp;var i=t.elements;var a=i[0],o=i[4],s=i[8];var u=i[1],c=i[5],l=i[9];var h=i[2],f=i[6],p=i[10];e=e||this._order;if("XYZ"===e){this._y=Math.asin(n(s,-1,1));if(Math.abs(s)<.99999){this._x=Math.atan2(-l,p);this._z=Math.atan2(-o,a)}else{this._x=Math.atan2(f,c);this._z=0}}else if("YXZ"===e){this._x=Math.asin(-n(l,-1,1));if(Math.abs(l)<.99999){this._y=Math.atan2(s,p);this._z=Math.atan2(u,c)}else{this._y=Math.atan2(-h,a);this._z=0}}else if("ZXY"===e){this._x=Math.asin(n(f,-1,1));if(Math.abs(f)<.99999){this._y=Math.atan2(-h,p);this._z=Math.atan2(-o,c)}else{this._y=0;this._z=Math.atan2(u,a)}}else if("ZYX"===e){this._y=Math.asin(-n(h,-1,1));if(Math.abs(h)<.99999){this._x=Math.atan2(f,p);this._z=Math.atan2(u,a)}else{this._x=0;this._z=Math.atan2(-o,c)}}else if("YZX"===e){this._z=Math.asin(n(u,-1,1));if(Math.abs(u)<.99999){this._x=Math.atan2(-l,c);this._y=Math.atan2(-h,a)}else{this._x=0;this._y=Math.atan2(s,p)}}else if("XZY"===e){this._z=Math.asin(-n(o,-1,1));if(Math.abs(o)<.99999){this._x=Math.atan2(f,c);this._y=Math.atan2(s,a)}else{this._x=Math.atan2(-l,p);this._y=0}}else console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e);this._order=e;if(false!==r)this.onChangeCallback();return this},setFromQuaternion:function(){var t=new He;return function e(r,n,i){t.makeRotationFromQuaternion(r);return this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new je;return function e(r){t.setFromEuler(this);return this.setFromQuaternion(t,r)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){this._x=t[0];this._y=t[1];this._z=t[2];if(void 0!==t[3])this._order=t[3];this.onChangeCallback();return this},toArray:function(t,e){if(void 0===t)t=[];if(void 0===e)e=0;t[e]=this._x;t[e+1]=this._y;t[e+2]=this._z;t[e+3]=this._order;return t},toVector3:function(t){if(t)return t.set(this._x,this._y,this._z);else return new Ge(this._x,this._y,this._z)},onChange:function(t){this.onChangeCallback=t;return this},onChangeCallback:function(){}});function oa(){this.mask=1|0}Object.assign(oa.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!==(this.mask&t.mask)}});var sa=0;function ua(){Object.defineProperty(this,"id",{value:sa++});this.uuid=Fe.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=ua.DefaultUp.clone();var t=new Ge;var e=new aa;var r=new je;var n=new Ge(1,1,1);function i(){r.setFromEuler(e,false)}function a(){e.setFromQuaternion(r,void 0,false)}e.onChange(i);r.onChange(a);Object.defineProperties(this,{position:{enumerable:true,value:t},rotation:{enumerable:true,value:e},quaternion:{enumerable:true,value:r},scale:{enumerable:true,value:n},modelViewMatrix:{value:new He},normalMatrix:{value:new Ve}});this.matrix=new He;this.matrixWorld=new He;this.matrixAutoUpdate=ua.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=false;this.layers=new oa;this.visible=true;this.castShadow=false;this.receiveShadow=false;this.frustumCulled=true;this.renderOrder=0;this.userData={}}ua.DefaultUp=new Ge(0,1,0);ua.DefaultMatrixAutoUpdate=true;ua.prototype=Object.assign(Object.create(s.prototype),{constructor:ua,isObject3D:true,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){this.quaternion.premultiply(t);return this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,true)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new je;return function e(r,n){t.setFromAxisAngle(r,n);this.quaternion.multiply(t);return this}}(),rotateOnWorldAxis:function(){var t=new je;return function e(r,n){t.setFromAxisAngle(r,n);this.quaternion.premultiply(t);return this}}(),rotateX:function(){var t=new Ge(1,0,0);return function e(r){return this.rotateOnAxis(t,r)}}(),rotateY:function(){var t=new Ge(0,1,0);return function e(r){return this.rotateOnAxis(t,r)}}(),rotateZ:function(){var t=new Ge(0,0,1);return function e(r){return this.rotateOnAxis(t,r)}}(),translateOnAxis:function(){var t=new Ge;return function e(r,n){t.copy(r).applyQuaternion(this.quaternion);this.position.add(t.multiplyScalar(n));return this}}(),translateX:function(){var t=new Ge(1,0,0);return function e(r){return this.translateOnAxis(t,r)}}(),translateY:function(){var t=new Ge(0,1,0);return function e(r){return this.translateOnAxis(t,r)}}(),translateZ:function(){var t=new Ge(0,0,1);return function e(r){return this.translateOnAxis(t,r)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new He;return function e(r){return r.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new He;var e=new Ge;return function r(n,i,a){if(n.isVector3)e.copy(n);else e.set(n,i,a);if(this.isCamera)t.lookAt(this.position,e,this.up);else t.lookAt(e,this.position,this.up);this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}if(t===this){console.error("THREE.Object3D.add: object can't be added as a child of itself.",t);return this}if(t&&t.isObject3D){if(null!==t.parent)t.parent.remove(t);t.parent=this;t.dispatchEvent({type:"added"});this.children.push(t)}else console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t);return this},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var r=this.children.indexOf(t);if(-1!==r){t.parent=null;t.dispatchEvent({type:"removed"});this.children.splice(r,1)}return this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r];var a=i.getObjectByProperty(t,e);if(void 0!==a)return a}return},getWorldPosition:function(t){var e=t||new Ge;this.updateMatrixWorld(true);return e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new Ge;var e=new Ge;return function r(n){var i=n||new je;this.updateMatrixWorld(true);this.matrixWorld.decompose(t,i,e);return i}}(),getWorldRotation:function(){var t=new je;return function e(r){var n=r||new aa;this.getWorldQuaternion(t);return n.setFromQuaternion(t,this.rotation.order,false)}}(),getWorldScale:function(){var t=new Ge;var e=new je;return function r(n){var i=n||new Ge;this.updateMatrixWorld(true);this.matrixWorld.decompose(t,e,i);return i}}(),getWorldDirection:function(){var t=new je;return function e(r){var n=r||new Ge;this.getWorldQuaternion(t);return n.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);var e=this.children;for(var r=0,n=e.length;r<n;r++)e[r].traverse(t)},traverseVisible:function(t){if(false===this.visible)return;t(this);var e=this.children;for(var r=0,n=e.length;r<n;r++)e[r].traverseVisible(t)},traverseAncestors:function(t){var e=this.parent;if(null!==e){t(e);e.traverseAncestors(t)}},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=true},updateMatrixWorld:function(t){if(this.matrixAutoUpdate)this.updateMatrix();if(this.matrixWorldNeedsUpdate||t){if(null===this.parent)this.matrixWorld.copy(this.matrix);else this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix);this.matrixWorldNeedsUpdate=false;t=true}var e=this.children;for(var r=0,n=e.length;r<n;r++)e[r].updateMatrixWorld(t)},toJSON:function(t){var e=void 0===t||"string"===typeof t;var r={};if(e){t={geometries:{},materials:{},textures:{},images:{},shapes:{}};r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"}}var n={};n.uuid=this.uuid;n.type=this.type;if(""!==this.name)n.name=this.name;if(true===this.castShadow)n.castShadow=true;if(true===this.receiveShadow)n.receiveShadow=true;if(false===this.visible)n.visible=false;if("{}"!==JSON.stringify(this.userData))n.userData=this.userData;n.matrix=this.matrix.toArray();function i(e,r){if(void 0===e[r.uuid])e[r.uuid]=r.toJSON(t);return r.uuid}if(void 0!==this.geometry){n.geometry=i(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var c=o[s];i(t.shapes,c)}else i(t.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(var s=0,u=this.material.length;s<u;s++)l.push(i(t.materials,this.material[s]));n.material=l}else n.material=i(t.materials,this.material);if(this.children.length>0){n.children=[];for(var s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(t).object)}if(e){var h=v(t.geometries);var f=v(t.materials);var p=v(t.textures);var d=v(t.images);var o=v(t.shapes);if(h.length>0)r.geometries=h;if(f.length>0)r.materials=f;if(p.length>0)r.textures=p;if(d.length>0)r.images=d;if(o.length>0)r.shapes=o}r.object=n;return r;function v(t){var e=[];for(var r in t){var n=t[r];delete n.metadata;e.push(n)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e)e=true;this.name=t.name;this.up.copy(t.up);this.position.copy(t.position);this.quaternion.copy(t.quaternion);this.scale.copy(t.scale);this.matrix.copy(t.matrix);this.matrixWorld.copy(t.matrixWorld);this.matrixAutoUpdate=t.matrixAutoUpdate;this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate;this.layers.mask=t.layers.mask;this.visible=t.visible;this.castShadow=t.castShadow;this.receiveShadow=t.receiveShadow;this.frustumCulled=t.frustumCulled;this.renderOrder=t.renderOrder;this.userData=JSON.parse(JSON.stringify(t.userData));if(true===e)for(var r=0;r<t.children.length;r++){var n=t.children[r];this.add(n.clone())}return this}});function ca(){ua.call(this);this.type="Camera";this.matrixWorldInverse=new He;this.projectionMatrix=new He}ca.prototype=Object.assign(Object.create(ua.prototype),{constructor:ca,isCamera:true,copy:function(t,e){ua.prototype.copy.call(this,t,e);this.matrixWorldInverse.copy(t.matrixWorldInverse);this.projectionMatrix.copy(t.projectionMatrix);return this},getWorldDirection:function(){var t=new je;return function e(r){var n=r||new Ge;this.getWorldQuaternion(t);return n.set(0,0,-1).applyQuaternion(t)}}(),updateMatrixWorld:function(t){ua.prototype.updateMatrixWorld.call(this,t);this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}});function la(t,e,r,n,i,a){ca.call(this);this.type="OrthographicCamera";this.zoom=1;this.view=null;this.left=t;this.right=e;this.top=r;this.bottom=n;this.near=void 0!==i?i:.1;this.far=void 0!==a?a:2e3;this.updateProjectionMatrix()}la.prototype=Object.assign(Object.create(ca.prototype),{constructor:la,isOrthographicCamera:true,copy:function(t,e){ca.prototype.copy.call(this,t,e);this.left=t.left;this.right=t.right;this.top=t.top;this.bottom=t.bottom;this.near=t.near;this.far=t.far;this.zoom=t.zoom;this.view=null===t.view?null:Object.assign({},t.view);return this},setViewOffset:function(t,e,r,n,i,a){if(null===this.view)this.view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1};this.view.enabled=true;this.view.fullWidth=t;this.view.fullHeight=e;this.view.offsetX=r;this.view.offsetY=n;this.view.width=i;this.view.height=a;this.updateProjectionMatrix()},clearViewOffset:function(){if(null!==this.view)this.view.enabled=false;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom);var e=(this.top-this.bottom)/(2*this.zoom);var r=(this.right+this.left)/2;var n=(this.top+this.bottom)/2;var i=r-t;var a=r+t;var o=n+e;var s=n-e;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth);var c=this.zoom/(this.view.height/this.view.fullHeight);var l=(this.right-this.left)/this.view.width;var h=(this.top-this.bottom)/this.view.height;i+=l*(this.view.offsetX/u);a=i+l*(this.view.width/u);o-=h*(this.view.offsetY/c);s=o-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far)},toJSON:function(t){var e=ua.prototype.toJSON.call(this,t);e.object.zoom=this.zoom;e.object.left=this.left;e.object.right=this.right;e.object.top=this.top;e.object.bottom=this.bottom;e.object.near=this.near;e.object.far=this.far;if(null!==this.view)e.object.view=Object.assign({},this.view);return e}});function ha(t,e,r,n,i,a){this.a=t;this.b=e;this.c=r;this.normal=n&&n.isVector3?n:new Ge;this.vertexNormals=Array.isArray(n)?n:[];this.color=i&&i.isColor?i:new kr;this.vertexColors=Array.isArray(i)?i:[];this.materialIndex=void 0!==a?a:0}Object.assign(ha.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a;this.b=t.b;this.c=t.c;this.normal.copy(t.normal);this.color.copy(t.color);this.materialIndex=t.materialIndex;for(var e=0,r=t.vertexNormals.length;e<r;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,r=t.vertexColors.length;e<r;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var fa=0;function pa(){Object.defineProperty(this,"id",{value:fa+=2});this.uuid=Fe.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.elementsNeedUpdate=false;this.verticesNeedUpdate=false;this.uvsNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.lineDistancesNeedUpdate=false;this.groupsNeedUpdate=false}pa.prototype=Object.assign(Object.create(s.prototype),{constructor:pa,isGeometry:true,applyMatrix:function(t){var e=(new Ve).getNormalMatrix(t);for(var r=0,n=this.vertices.length;r<n;r++){var i=this.vertices[r];i.applyMatrix4(t)}for(var r=0,n=this.faces.length;r<n;r++){var a=this.faces[r];a.normal.applyMatrix3(e).normalize();for(var o=0,s=a.vertexNormals.length;o<s;o++)a.vertexNormals[o].applyMatrix3(e).normalize()}if(null!==this.boundingBox)this.computeBoundingBox();if(null!==this.boundingSphere)this.computeBoundingSphere();this.verticesNeedUpdate=true;this.normalsNeedUpdate=true;return this},rotateX:function(){var t=new He;return function e(r){t.makeRotationX(r);this.applyMatrix(t);return this}}(),rotateY:function(){var t=new He;return function e(r){t.makeRotationY(r);this.applyMatrix(t);return this}}(),rotateZ:function(){var t=new He;return function e(r){t.makeRotationZ(r);this.applyMatrix(t);return this}}(),translate:function(){var t=new He;return function e(r,n,i){t.makeTranslation(r,n,i);this.applyMatrix(t);return this}}(),scale:function(){var t=new He;return function e(r,n,i){t.makeScale(r,n,i);this.applyMatrix(t);return this}}(),lookAt:function(){var t=new ua;return function e(r){t.lookAt(r);t.updateMatrix();this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){var e=this;var r=null!==t.index?t.index.array:void 0;var n=t.attributes;var i=n.position.array;var a=void 0!==n.normal?n.normal.array:void 0;var o=void 0!==n.color?n.color.array:void 0;var s=void 0!==n.uv?n.uv.array:void 0;var u=void 0!==n.uv2?n.uv2.array:void 0;if(void 0!==u)this.faceVertexUvs[1]=[];var c=[];var l=[];var h=[];for(var f=0,p=0;f<i.length;f+=3,p+=2){e.vertices.push(new Ge(i[f],i[f+1],i[f+2]));if(void 0!==a)c.push(new Ge(a[f],a[f+1],a[f+2]));if(void 0!==o)e.colors.push(new kr(o[f],o[f+1],o[f+2]));if(void 0!==s)l.push(new ke(s[p],s[p+1]));if(void 0!==u)h.push(new ke(u[p],u[p+1]))}function d(t,r,n,i){var f=void 0!==a?[c[t].clone(),c[r].clone(),c[n].clone()]:[];var p=void 0!==o?[e.colors[t].clone(),e.colors[r].clone(),e.colors[n].clone()]:[];var d=new ha(t,r,n,f,p,i);e.faces.push(d);if(void 0!==s)e.faceVertexUvs[0].push([l[t].clone(),l[r].clone(),l[n].clone()]);if(void 0!==u)e.faceVertexUvs[1].push([h[t].clone(),h[r].clone(),h[n].clone()])}var v=t.groups;if(v.length>0)for(var f=0;f<v.length;f++){var m=v[f];var g=m.start;var y=m.count;for(var p=g,x=g+y;p<x;p+=3)if(void 0!==r)d(r[p],r[p+1],r[p+2],m.materialIndex);else d(p,p+1,p+2,m.materialIndex)}else if(void 0!==r)for(var f=0;f<r.length;f+=3)d(r[f],r[f+1],r[f+2]);else for(var f=0;f<i.length/3;f+=3)d(f,f+1,f+2);this.computeFaceNormals();if(null!==t.boundingBox)this.boundingBox=t.boundingBox.clone();if(null!==t.boundingSphere)this.boundingSphere=t.boundingSphere.clone();return this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();this.translate(t.x,t.y,t.z);return t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center;var e=this.boundingSphere.radius;var r=0===e?1:1/e;var n=new He;n.set(r,0,0,-r*t.x,0,r,0,-r*t.y,0,0,r,-r*t.z,0,0,0,1);this.applyMatrix(n);return this},computeFaceNormals:function(){var t=new Ge,e=new Ge;for(var r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];var a=this.vertices[i.a];var o=this.vertices[i.b];var s=this.vertices[i.c];t.subVectors(s,o);e.subVectors(a,o);t.cross(e);t.normalize();i.normal.copy(t)}},computeVertexNormals:function(t){if(void 0===t)t=true;var e,r,n,i,a,o;o=new Array(this.vertices.length);for(e=0,r=this.vertices.length;e<r;e++)o[e]=new Ge;if(t){var s,u,c;var l=new Ge,h=new Ge;for(n=0,i=this.faces.length;n<i;n++){a=this.faces[n];s=this.vertices[a.a];u=this.vertices[a.b];c=this.vertices[a.c];l.subVectors(c,u);h.subVectors(s,u);l.cross(h);o[a.a].add(l);o[a.b].add(l);o[a.c].add(l)}}else{this.computeFaceNormals();for(n=0,i=this.faces.length;n<i;n++){a=this.faces[n];o[a.a].add(a.normal);o[a.b].add(a.normal);o[a.c].add(a.normal)}}for(e=0,r=this.vertices.length;e<r;e++)o[e].normalize();for(n=0,i=this.faces.length;n<i;n++){a=this.faces[n];var f=a.vertexNormals;if(3===f.length){f[0].copy(o[a.a]);f[1].copy(o[a.b]);f[2].copy(o[a.c])}else{f[0]=o[a.a].clone();f[1]=o[a.b].clone();f[2]=o[a.c].clone()}}if(this.faces.length>0)this.normalsNeedUpdate=true},computeFlatVertexNormals:function(){var t,e,r;this.computeFaceNormals();for(t=0,e=this.faces.length;t<e;t++){r=this.faces[t];var n=r.vertexNormals;if(3===n.length){n[0].copy(r.normal);n[1].copy(r.normal);n[2].copy(r.normal)}else{n[0]=r.normal.clone();n[1]=r.normal.clone();n[2]=r.normal.clone()}}if(this.faces.length>0)this.normalsNeedUpdate=true},computeMorphNormals:function(){var t,e,r,n,i;for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r];if(!i.__originalFaceNormal)i.__originalFaceNormal=i.normal.clone();else i.__originalFaceNormal.copy(i.normal);if(!i.__originalVertexNormals)i.__originalVertexNormals=[];for(t=0,e=i.vertexNormals.length;t<e;t++)if(!i.__originalVertexNormals[t])i.__originalVertexNormals[t]=i.vertexNormals[t].clone();else i.__originalVertexNormals[t].copy(i.vertexNormals[t])}var a=new pa;a.faces=this.faces;for(t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={};this.morphNormals[t].faceNormals=[];this.morphNormals[t].vertexNormals=[];var o=this.morphNormals[t].faceNormals;var s=this.morphNormals[t].vertexNormals;var u,c;for(r=0,n=this.faces.length;r<n;r++){u=new Ge;c={a:new Ge,b:new Ge,c:new Ge};o.push(u);s.push(c)}}var l=this.morphNormals[t];a.vertices=this.morphTargets[t].vertices;a.computeFaceNormals();a.computeVertexNormals();var u,c;for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r];u=l.faceNormals[r];c=l.vertexNormals[r];u.copy(i.normal);c.a.copy(i.vertexNormals[0]);c.b.copy(i.vertexNormals[1]);c.c.copy(i.vertexNormals[2])}}for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r];i.normal=i.__originalFaceNormal;i.vertexNormals=i.__originalVertexNormals}},computeBoundingBox:function(){if(null===this.boundingBox)this.boundingBox=new $i;this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){if(null===this.boundingSphere)this.boundingSphere=new ta;this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,r){if(!(t&&t.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);return}var n,i=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,u=t.faces,c=this.faceVertexUvs[0],l=t.faceVertexUvs[0],h=this.colors,f=t.colors;if(void 0===r)r=0;if(void 0!==e)n=(new Ve).getNormalMatrix(e);for(var p=0,d=o.length;p<d;p++){var v=o[p];var m=v.clone();if(void 0!==e)m.applyMatrix4(e);a.push(m)}for(var p=0,d=f.length;p<d;p++)h.push(f[p].clone());for(p=0,d=u.length;p<d;p++){var g=u[p],y,x,_,b=g.vertexNormals,w=g.vertexColors;y=new ha(g.a+i,g.b+i,g.c+i);y.normal.copy(g.normal);if(void 0!==n)y.normal.applyMatrix3(n).normalize();for(var M=0,E=b.length;M<E;M++){x=b[M].clone();if(void 0!==n)x.applyMatrix3(n).normalize();y.vertexNormals.push(x)}y.color.copy(g.color);for(var M=0,E=w.length;M<E;M++){_=w[M];y.vertexColors.push(_.clone())}y.materialIndex=g.materialIndex+r;s.push(y)}for(p=0,d=l.length;p<d;p++){var S=l[p],T=[];if(void 0===S)continue;for(var M=0,E=S.length;M<E;M++)T.push(S[M].clone());c.push(T)}},mergeMesh:function(t){if(!(t&&t.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);return}t.matrixAutoUpdate&&t.updateMatrix();this.merge(t.geometry,t.matrix)},mergeVertices:function(){var t={};var e=[],r=[];var n,i;var a=4;var o=Math.pow(10,a);var s,u,c;var l,h,f;for(s=0,u=this.vertices.length;s<u;s++){n=this.vertices[s];i=Math.round(n.x*o)+"_"+Math.round(n.y*o)+"_"+Math.round(n.z*o);if(void 0===t[i]){t[i]=s;e.push(this.vertices[s]);r[s]=e.length-1}else r[s]=r[t[i]]}var p=[];for(s=0,u=this.faces.length;s<u;s++){c=this.faces[s];c.a=r[c.a];c.b=r[c.b];c.c=r[c.c];l=[c.a,c.b,c.c];for(var d=0;d<3;d++)if(l[d]===l[(d+1)%3]){p.push(s);break}}for(s=p.length-1;s>=0;s--){var v=p[s];this.faces.splice(v,1);for(h=0,f=this.faceVertexUvs.length;h<f;h++)this.faceVertexUvs[h].splice(v,1)}var m=this.vertices.length-e.length;this.vertices=e;return m},setFromPoints:function(t){this.vertices=[];for(var e=0,r=t.length;e<r;e++){var n=t[e];this.vertices.push(new Ge(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){var t=this.faces;var e=t.length;for(var r=0;r<e;r++)t[r]._id=r;function n(t,e){return t.materialIndex-e.materialIndex}t.sort(n);var i=this.faceVertexUvs[0];var a=this.faceVertexUvs[1];var o,s;if(i&&i.length===e)o=[];if(a&&a.length===e)s=[];for(var r=0;r<e;r++){var u=t[r]._id;if(o)o.push(i[u]);if(s)s.push(a[u])}if(o)this.faceVertexUvs[0]=o;if(s)this.faceVertexUvs[1]=s},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};t.uuid=this.uuid;t.type=this.type;if(""!==this.name)t.name=this.name;if(void 0!==this.parameters){var e=this.parameters;for(var r in e)if(void 0!==e[r])t[r]=e[r];return t}var n=[];for(var i=0;i<this.vertices.length;i++){var a=this.vertices[i];n.push(a.x,a.y,a.z)}var o=[];var s=[];var u={};var c=[];var l={};var h=[];var f={};for(var i=0;i<this.faces.length;i++){var p=this.faces[i];var d=true;var v=false;var m=void 0!==this.faceVertexUvs[0][i];var g=p.normal.length()>0;var y=p.vertexNormals.length>0;var x=1!==p.color.r||1!==p.color.g||1!==p.color.b;var _=p.vertexColors.length>0;var b=0;b=S(b,0,0);b=S(b,1,d);b=S(b,2,v);b=S(b,3,m);b=S(b,4,g);b=S(b,5,y);b=S(b,6,x);b=S(b,7,_);o.push(b);o.push(p.a,p.b,p.c);o.push(p.materialIndex);if(m){var w=this.faceVertexUvs[0][i];o.push(R(w[0]),R(w[1]),R(w[2]))}if(g)o.push(T(p.normal));if(y){var M=p.vertexNormals;o.push(T(M[0]),T(M[1]),T(M[2]))}if(x)o.push(A(p.color));if(_){var E=p.vertexColors;o.push(A(E[0]),A(E[1]),A(E[2]))}}function S(t,e,r){return r?t|1<<e:t&~(1<<e)}function T(t){var e=t.x.toString()+t.y.toString()+t.z.toString();if(void 0!==u[e])return u[e];u[e]=s.length/3;s.push(t.x,t.y,t.z);return u[e]}function A(t){var e=t.r.toString()+t.g.toString()+t.b.toString();if(void 0!==l[e])return l[e];l[e]=c.length;c.push(t.getHex());return l[e]}function R(t){var e=t.x.toString()+t.y.toString();if(void 0!==f[e])return f[e];f[e]=h.length/2;h.push(t.x,t.y);return f[e]}t.data={};t.data.vertices=n;t.data.normals=s;if(c.length>0)t.data.colors=c;if(h.length>0)t.data.uvs=[h];t.data.faces=o;return t},clone:function(){return(new pa).copy(this)},copy:function(t){var e,r,n,i,a,o;this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingBox=null;this.boundingSphere=null;this.name=t.name;var s=t.vertices;for(e=0,r=s.length;e<r;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,r=u.length;e<r;e++)this.colors.push(u[e].clone());var c=t.faces;for(e=0,r=c.length;e<r;e++)this.faces.push(c[e].clone());for(e=0,r=t.faceVertexUvs.length;e<r;e++){var l=t.faceVertexUvs[e];if(void 0===this.faceVertexUvs[e])this.faceVertexUvs[e]=[];for(n=0,i=l.length;n<i;n++){var h=l[n],f=[];for(a=0,o=h.length;a<o;a++){var p=h[a];f.push(p.clone())}this.faceVertexUvs[e].push(f)}}var d=t.morphTargets;for(e=0,r=d.length;e<r;e++){var v={};v.name=d[e].name;if(void 0!==d[e].vertices){v.vertices=[];for(n=0,i=d[e].vertices.length;n<i;n++)v.vertices.push(d[e].vertices[n].clone())}if(void 0!==d[e].normals){v.normals=[];for(n=0,i=d[e].normals.length;n<i;n++)v.normals.push(d[e].normals[n].clone())}this.morphTargets.push(v)}var m=t.morphNormals;for(e=0,r=m.length;e<r;e++){var g={};if(void 0!==m[e].vertexNormals){g.vertexNormals=[];for(n=0,i=m[e].vertexNormals.length;n<i;n++){var y=m[e].vertexNormals[n];var x={};x.a=y.a.clone();x.b=y.b.clone();x.c=y.c.clone();g.vertexNormals.push(x)}}if(void 0!==m[e].faceNormals){g.faceNormals=[];for(n=0,i=m[e].faceNormals.length;n<i;n++)g.faceNormals.push(m[e].faceNormals[n].clone())}this.morphNormals.push(g)}var _=t.skinWeights;for(e=0,r=_.length;e<r;e++)this.skinWeights.push(_[e].clone());var b=t.skinIndices;for(e=0,r=b.length;e<r;e++)this.skinIndices.push(b[e].clone());var w=t.lineDistances;for(e=0,r=w.length;e<r;e++)this.lineDistances.push(w[e]);var M=t.boundingBox;if(null!==M)this.boundingBox=M.clone();var E=t.boundingSphere;if(null!==E)this.boundingSphere=E.clone();this.elementsNeedUpdate=t.elementsNeedUpdate;this.verticesNeedUpdate=t.verticesNeedUpdate;this.uvsNeedUpdate=t.uvsNeedUpdate;this.normalsNeedUpdate=t.normalsNeedUpdate;this.colorsNeedUpdate=t.colorsNeedUpdate;this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate;this.groupsNeedUpdate=t.groupsNeedUpdate;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function da(t,e,r){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Fe.generateUUID();this.name="";this.array=t;this.itemSize=e;this.count=void 0!==t?t.length/e:0;this.normalized=true===r;this.dynamic=false;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}Object.defineProperty(da.prototype,"needsUpdate",{set:function(t){if(true===t)this.version++}});Object.assign(da.prototype,{isBufferAttribute:true,setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0;this.array=t},setDynamic:function(t){this.dynamic=t;return this},copy:function(t){this.array=new t.array.constructor(t.array);this.itemSize=t.itemSize;this.count=t.count;this.normalized=t.normalized;this.dynamic=t.dynamic;return this},copyAt:function(t,e,r){t*=this.itemSize;r*=e.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[t+n]=e.array[r+n];return this},copyArray:function(t){this.array.set(t);return this},copyColorsArray:function(t){var e=this.array,r=0;for(var n=0,i=t.length;n<i;n++){var a=t[n];if(void 0===a){console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n);a=new kr}e[r++]=a.r;e[r++]=a.g;e[r++]=a.b}return this},copyIndicesArray:function(t){var e=this.array,r=0;for(var n=0,i=t.length;n<i;n++){var a=t[n];e[r++]=a.a;e[r++]=a.b;e[r++]=a.c}return this},copyVector2sArray:function(t){var e=this.array,r=0;for(var n=0,i=t.length;n<i;n++){var a=t[n];if(void 0===a){console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n);a=new ke}e[r++]=a.x;e[r++]=a.y}return this},copyVector3sArray:function(t){var e=this.array,r=0;for(var n=0,i=t.length;n<i;n++){var a=t[n];if(void 0===a){console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n);a=new Ge}e[r++]=a.x;e[r++]=a.y;e[r++]=a.z}return this},copyVector4sArray:function(t){var e=this.array,r=0;for(var n=0,i=t.length;n<i;n++){var a=t[n];if(void 0===a){console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n);a=new qe}e[r++]=a.x;e[r++]=a.y;e[r++]=a.z;e[r++]=a.w}return this},set:function(t,e){if(void 0===e)e=0;this.array.set(t,e);return this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){this.array[t*this.itemSize]=e;return this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){this.array[t*this.itemSize+1]=e;return this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){this.array[t*this.itemSize+2]=e;return this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){this.array[t*this.itemSize+3]=e;return this},setXY:function(t,e,r){t*=this.itemSize;this.array[t+0]=e;this.array[t+1]=r;return this},setXYZ:function(t,e,r,n){t*=this.itemSize;this.array[t+0]=e;this.array[t+1]=r;this.array[t+2]=n;return this},setXYZW:function(t,e,r,n,i){t*=this.itemSize;this.array[t+0]=e;this.array[t+1]=r;this.array[t+2]=n;this.array[t+3]=i;return this},onUpload:function(t){this.onUploadCallback=t;return this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function va(t,e,r){da.call(this,new Int8Array(t),e,r)}va.prototype=Object.create(da.prototype);va.prototype.constructor=va;function ma(t,e,r){da.call(this,new Uint8Array(t),e,r)}ma.prototype=Object.create(da.prototype);ma.prototype.constructor=ma;function ga(t,e,r){da.call(this,new Uint8ClampedArray(t),e,r)}ga.prototype=Object.create(da.prototype);ga.prototype.constructor=ga;function ya(t,e,r){da.call(this,new Int16Array(t),e,r)}ya.prototype=Object.create(da.prototype);ya.prototype.constructor=ya;function xa(t,e,r){da.call(this,new Uint16Array(t),e,r)}xa.prototype=Object.create(da.prototype);xa.prototype.constructor=xa;function _a(t,e,r){da.call(this,new Int32Array(t),e,r)}_a.prototype=Object.create(da.prototype);_a.prototype.constructor=_a;function ba(t,e,r){da.call(this,new Uint32Array(t),e,r)}ba.prototype=Object.create(da.prototype);ba.prototype.constructor=ba;function wa(t,e,r){da.call(this,new Float32Array(t),e,r)}wa.prototype=Object.create(da.prototype);wa.prototype.constructor=wa;function Ma(t,e,r){da.call(this,new Float64Array(t),e,r)}Ma.prototype=Object.create(da.prototype);Ma.prototype.constructor=Ma;function Ea(){this.indices=[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingBox=null;this.boundingSphere=null;this.verticesNeedUpdate=false;this.normalsNeedUpdate=false;this.colorsNeedUpdate=false;this.uvsNeedUpdate=false;this.groupsNeedUpdate=false}Object.assign(Ea.prototype,{computeGroups:function(t){var e;var r=[];var n=void 0;var i=t.faces;for(var a=0;a<i.length;a++){var o=i[a];if(o.materialIndex!==n){n=o.materialIndex;if(void 0!==e){e.count=3*a-e.start;r.push(e)}e={start:3*a,materialIndex:n}}}if(void 0!==e){e.count=3*a-e.start;r.push(e)}this.groups=r},fromGeometry:function(t){var e=t.faces;var r=t.vertices;var n=t.faceVertexUvs;var i=n[0]&&n[0].length>0;var a=n[1]&&n[1].length>0;var o=t.morphTargets;var s=o.length;var u;if(s>0){u=[];for(var c=0;c<s;c++)u[c]=[];this.morphTargets.position=u}var l=t.morphNormals;var h=l.length;var f;if(h>0){f=[];for(var c=0;c<h;c++)f[c]=[];this.morphTargets.normal=f}var p=t.skinIndices;var d=t.skinWeights;var v=p.length===r.length;var m=d.length===r.length;for(var c=0;c<e.length;c++){var g=e[c];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=g.normal;this.normals.push(x,x,x)}var _=g.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var b=g.color;this.colors.push(b,b,b)}if(true===i){var w=n[0][c];if(void 0!==w)this.uvs.push(w[0],w[1],w[2]);else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c);this.uvs.push(new ke,new ke,new ke)}}if(true===a){var w=n[1][c];if(void 0!==w)this.uvs2.push(w[0],w[1],w[2]);else{console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c);this.uvs2.push(new ke,new ke,new ke)}}for(var M=0;M<s;M++){var E=o[M].vertices;u[M].push(E[g.a],E[g.b],E[g.c])}for(var M=0;M<h;M++){var S=l[M].vertexNormals[c];f[M].push(S.a,S.b,S.c)}if(v)this.skinIndices.push(p[g.a],p[g.b],p[g.c]);if(m)this.skinWeights.push(d[g.a],d[g.b],d[g.c])}this.computeGroups(t);this.verticesNeedUpdate=t.verticesNeedUpdate;this.normalsNeedUpdate=t.normalsNeedUpdate;this.colorsNeedUpdate=t.colorsNeedUpdate;this.uvsNeedUpdate=t.uvsNeedUpdate;this.groupsNeedUpdate=t.groupsNeedUpdate;return this}});function Sa(t){if(0===t.length)return-Infinity;var e=t[0];for(var r=1,n=t.length;r<n;++r)if(t[r]>e)e=t[r];return e}var Ta=1;function Aa(){Object.defineProperty(this,"id",{value:Ta+=2});this.uuid=Fe.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.drawRange={start:0,count:Infinity}}Aa.prototype=Object.assign(Object.create(s.prototype),{constructor:Aa,isBufferGeometry:true,getIndex:function(){return this.index},setIndex:function(t){if(Array.isArray(t))this.index=new(Sa(t)>65535?ba:xa)(t,1);else this.index=t},addAttribute:function(t,e){if(!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).");this.addAttribute(t,new da(arguments[1],arguments[2]));return}if("index"===t){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.");this.setIndex(e);return}this.attributes[t]=e;return this},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){delete this.attributes[t];return this},addGroup:function(t,e,r){this.groups.push({start:t,count:e,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t;this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;if(void 0!==e){t.applyToBufferAttribute(e);e.needsUpdate=true}var r=this.attributes.normal;if(void 0!==r){var n=(new Ve).getNormalMatrix(t);n.applyToBufferAttribute(r);r.needsUpdate=true}if(null!==this.boundingBox)this.computeBoundingBox();if(null!==this.boundingSphere)this.computeBoundingSphere();return this},rotateX:function(){var t=new He;return function e(r){t.makeRotationX(r);this.applyMatrix(t);return this}}(),rotateY:function(){var t=new He;return function e(r){t.makeRotationY(r);this.applyMatrix(t);return this}}(),rotateZ:function(){var t=new He;return function e(r){t.makeRotationZ(r);this.applyMatrix(t);return this}}(),translate:function(){var t=new He;return function e(r,n,i){t.makeTranslation(r,n,i);this.applyMatrix(t);return this}}(),scale:function(){var t=new He;return function e(r,n,i){t.makeScale(r,n,i);this.applyMatrix(t);return this}}(),lookAt:function(){var t=new ua;return function e(r){t.lookAt(r);t.updateMatrix();this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();this.translate(t.x,t.y,t.z);return t},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var r=new wa(3*e.vertices.length,3);var n=new wa(3*e.colors.length,3);this.addAttribute("position",r.copyVector3sArray(e.vertices));this.addAttribute("color",n.copyColorsArray(e.colors));if(e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new wa(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}if(null!==e.boundingSphere)this.boundingSphere=e.boundingSphere.clone();if(null!==e.boundingBox)this.boundingBox=e.boundingBox.clone()}else if(t.isMesh)if(e&&e.isGeometry)this.fromGeometry(e);return this},setFromPoints:function(t){var e=[];for(var r=0,n=t.length;r<n;r++){var i=t[r];e.push(i.x,i.y,i.z||0)}this.addAttribute("position",new wa(e,3));return this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var r=e.__directGeometry;if(true===e.elementsNeedUpdate){r=void 0;e.elementsNeedUpdate=false}if(void 0===r)return this.fromGeometry(e);r.verticesNeedUpdate=e.verticesNeedUpdate;r.normalsNeedUpdate=e.normalsNeedUpdate;r.colorsNeedUpdate=e.colorsNeedUpdate;r.uvsNeedUpdate=e.uvsNeedUpdate;r.groupsNeedUpdate=e.groupsNeedUpdate;e.verticesNeedUpdate=false;e.normalsNeedUpdate=false;e.colorsNeedUpdate=false;e.uvsNeedUpdate=false;e.groupsNeedUpdate=false;e=r}var n;if(true===e.verticesNeedUpdate){n=this.attributes.position;if(void 0!==n){n.copyVector3sArray(e.vertices);n.needsUpdate=true}e.verticesNeedUpdate=false}if(true===e.normalsNeedUpdate){n=this.attributes.normal;if(void 0!==n){n.copyVector3sArray(e.normals);n.needsUpdate=true}e.normalsNeedUpdate=false}if(true===e.colorsNeedUpdate){n=this.attributes.color;if(void 0!==n){n.copyColorsArray(e.colors);n.needsUpdate=true}e.colorsNeedUpdate=false}if(e.uvsNeedUpdate){n=this.attributes.uv;if(void 0!==n){n.copyVector2sArray(e.uvs);n.needsUpdate=true}e.uvsNeedUpdate=false}if(e.lineDistancesNeedUpdate){n=this.attributes.lineDistance;if(void 0!==n){n.copyArray(e.lineDistances);n.needsUpdate=true}e.lineDistancesNeedUpdate=false}if(e.groupsNeedUpdate){e.computeGroups(t.geometry);this.groups=e.groups;e.groupsNeedUpdate=false}return this},fromGeometry:function(t){t.__directGeometry=(new Ea).fromGeometry(t);return this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);this.addAttribute("position",new da(e,3).copyVector3sArray(t.vertices));if(t.normals.length>0){var r=new Float32Array(3*t.normals.length);this.addAttribute("normal",new da(r,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new da(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new da(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new da(a,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var o=Sa(t.indices)>65535?Uint32Array:Uint16Array;var s=new o(3*t.indices.length);this.setIndex(new da(s,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var u in t.morphTargets){var c=[];var l=t.morphTargets[u];for(var h=0,f=l.length;h<f;h++){var p=l[h];var d=new wa(3*p.length,3);c.push(d.copyVector3sArray(p))}this.morphAttributes[u]=c}if(t.skinIndices.length>0){var v=new wa(4*t.skinIndices.length,4);this.addAttribute("skinIndex",v.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var m=new wa(4*t.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(t.skinWeights))}if(null!==t.boundingSphere)this.boundingSphere=t.boundingSphere.clone();if(null!==t.boundingBox)this.boundingBox=t.boundingBox.clone();return this},computeBoundingBox:function(){if(null===this.boundingBox)this.boundingBox=new $i;var t=this.attributes.position;if(void 0!==t)this.boundingBox.setFromBufferAttribute(t);else this.boundingBox.makeEmpty();if(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new $i;var e=new Ge;return function r(){if(null===this.boundingSphere)this.boundingSphere=new ta;var n=this.attributes.position;if(n){var i=this.boundingSphere.center;t.setFromBufferAttribute(n);t.getCenter(i);var a=0;for(var o=0,s=n.count;o<s;o++){e.x=n.getX(o);e.y=n.getY(o);e.z=n.getZ(o);a=Math.max(a,i.distanceToSquared(e))}this.boundingSphere.radius=Math.sqrt(a);if(isNaN(this.boundingSphere.radius))console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index;var e=this.attributes;var r=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new da(new Float32Array(n.length),3));else{var i=e.normal.array;for(var a=0,o=i.length;a<o;a++)i[a]=0}var s=e.normal.array;var u,c,l;var h=new Ge,f=new Ge,p=new Ge;var d=new Ge,v=new Ge;if(t){var m=t.array;if(0===r.length)this.addGroup(0,m.length);for(var g=0,y=r.length;g<y;++g){var x=r[g];var _=x.start;var b=x.count;for(var a=_,o=_+b;a<o;a+=3){u=3*m[a+0];c=3*m[a+1];l=3*m[a+2];h.fromArray(n,u);f.fromArray(n,c);p.fromArray(n,l);d.subVectors(p,f);v.subVectors(h,f);d.cross(v);s[u]+=d.x;s[u+1]+=d.y;s[u+2]+=d.z;s[c]+=d.x;s[c+1]+=d.y;s[c+2]+=d.z;s[l]+=d.x;s[l+1]+=d.y;s[l+2]+=d.z}}}else for(var a=0,o=n.length;a<o;a+=9){h.fromArray(n,a);f.fromArray(n,a+3);p.fromArray(n,a+6);d.subVectors(p,f);v.subVectors(h,f);d.cross(v);s[a]=d.x;s[a+1]=d.y;s[a+2]=d.z;s[a+3]=d.x;s[a+4]=d.y;s[a+5]=d.z;s[a+6]=d.x;s[a+7]=d.y;s[a+8]=d.z}this.normalizeNormals();e.normal.needsUpdate=true}},merge:function(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}if(void 0===e)e=0;var r=this.attributes;for(var n in r){if(void 0===t.attributes[n])continue;var i=r[n];var a=i.array;var o=t.attributes[n];var s=o.array;var u=o.itemSize;for(var c=0,l=u*e;c<s.length;c++,l++)a[l]=s[c]}return this},normalizeNormals:function(){var t=new Ge;return function e(){var r=this.attributes.normal;for(var n=0,i=r.count;n<i;n++){t.x=r.getX(n);t.y=r.getY(n);t.z=r.getZ(n);t.normalize();r.setXYZ(n,t.x,t.y,t.z)}}}(),toNonIndexed:function(){if(null===this.index){console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.");return this}var t=new Aa;var e=this.index.array;var r=this.attributes;for(var n in r){var i=r[n];var a=i.array;var o=i.itemSize;var s=new a.constructor(e.length*o);var u=0,c=0;for(var l=0,h=e.length;l<h;l++){u=e[l]*o;for(var f=0;f<o;f++)s[c++]=a[u++]}t.addAttribute(n,new da(s,o))}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};t.uuid=this.uuid;t.type=this.type;if(""!==this.name)t.name=this.name;if(void 0!==this.parameters){var e=this.parameters;for(var r in e)if(void 0!==e[r])t[r]=e[r];return t}t.data={attributes:{}};var n=this.index;if(null!==n){var i=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:i}}var a=this.attributes;for(var r in a){var o=a[r];var i=Array.prototype.slice.call(o.array);t.data.attributes[r]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;if(s.length>0)t.data.groups=JSON.parse(JSON.stringify(s));var u=this.boundingSphere;if(null!==u)t.data.boundingSphere={center:u.center.toArray(),radius:u.radius};return t},clone:function(){return(new Aa).copy(this)},copy:function(t){var e,r,n;this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingBox=null;this.boundingSphere=null;this.name=t.name;var i=t.index;if(null!==i)this.setIndex(i.clone());var a=t.attributes;for(e in a){var o=a[e];this.addAttribute(e,o.clone())}var s=t.morphAttributes;for(e in s){var u=[];var c=s[e];for(r=0,n=c.length;r<n;r++)u.push(c[r].clone());this.morphAttributes[e]=u}var l=t.groups;for(r=0,n=l.length;r<n;r++){var h=l[r];this.addGroup(h.start,h.count,h.materialIndex)}var f=t.boundingBox;if(null!==f)this.boundingBox=f.clone();var p=t.boundingSphere;if(null!==p)this.boundingSphere=p.clone();this.drawRange.start=t.drawRange.start;this.drawRange.count=t.drawRange.count;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Ra(t,e,r,n,i,a){pa.call(this);this.type="BoxGeometry";this.parameters={width:t,height:e,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};this.fromBufferGeometry(new La(t,e,r,n,i,a));this.mergeVertices()}Ra.prototype=Object.create(pa.prototype);Ra.prototype.constructor=Ra;function La(t,e,r,n,i,a){Aa.call(this);this.type="BoxBufferGeometry";this.parameters={width:t,height:e,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};var o=this;t=t||1;e=e||1;r=r||1;n=Math.floor(n)||1;i=Math.floor(i)||1;a=Math.floor(a)||1;var s=[];var u=[];var c=[];var l=[];var h=0;var f=0;p("z","y","x",-1,-1,r,e,t,a,i,0);p("z","y","x",1,-1,r,e,-t,a,i,1);p("x","z","y",1,1,t,r,e,n,a,2);p("x","z","y",1,-1,t,r,-e,n,a,3);p("x","y","z",1,-1,t,e,r,n,i,4);p("x","y","z",-1,-1,t,e,-r,n,i,5);this.setIndex(s);this.addAttribute("position",new wa(u,3));this.addAttribute("normal",new wa(c,3));this.addAttribute("uv",new wa(l,2));function p(t,e,r,n,i,a,p,d,v,m,g){var y=a/v;var x=p/m;var _=a/2;var b=p/2;var w=d/2;var M=v+1;var E=m+1;var S=0;var T=0;var A,R;var L=new Ge;for(R=0;R<E;R++){var C=R*x-b;for(A=0;A<M;A++){var P=A*y-_;L[t]=P*n;L[e]=C*i;L[r]=w;u.push(L.x,L.y,L.z);L[t]=0;L[e]=0;L[r]=d>0?1:-1;c.push(L.x,L.y,L.z);l.push(A/v);l.push(1-R/m);S+=1}}for(R=0;R<m;R++)for(A=0;A<v;A++){var I=h+A+M*R;var O=h+A+M*(R+1);var N=h+(A+1)+M*(R+1);var U=h+(A+1)+M*R;s.push(I,O,U);s.push(O,N,U);T+=6}o.addGroup(f,T,g);f+=T;h+=S}}La.prototype=Object.create(Aa.prototype);La.prototype.constructor=La;function Ca(t,e,r,n){pa.call(this);this.type="PlaneGeometry";this.parameters={width:t,height:e,widthSegments:r,heightSegments:n};this.fromBufferGeometry(new Pa(t,e,r,n));this.mergeVertices()}Ca.prototype=Object.create(pa.prototype);Ca.prototype.constructor=Ca;function Pa(t,e,r,n){Aa.call(this);this.type="PlaneBufferGeometry";this.parameters={width:t,height:e,widthSegments:r,heightSegments:n};t=t||1;e=e||1;var i=t/2;var a=e/2;var o=Math.floor(r)||1;var s=Math.floor(n)||1;var u=o+1;var c=s+1;var l=t/o;var h=e/s;var f,p;var d=[];var v=[];var m=[];var g=[];for(p=0;p<c;p++){var y=p*h-a;for(f=0;f<u;f++){var x=f*l-i;v.push(x,-y,0);m.push(0,0,1);g.push(f/o);g.push(1-p/s)}}for(p=0;p<s;p++)for(f=0;f<o;f++){var _=f+u*p;var b=f+u*(p+1);var w=f+1+u*(p+1);var M=f+1+u*p;d.push(_,b,M);d.push(b,w,M)}this.setIndex(d);this.addAttribute("position",new wa(v,3));this.addAttribute("normal",new wa(m,3));this.addAttribute("uv",new wa(g,2))}Pa.prototype=Object.create(Aa.prototype);Pa.prototype.constructor=Pa;function Ia(t){Ji.call(this);this.type="MeshBasicMaterial";this.color=new kr(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=nt;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.lights=false;this.setValues(t)}Ia.prototype=Object.create(Ji.prototype);Ia.prototype.constructor=Ia;Ia.prototype.isMeshBasicMaterial=true;Ia.prototype.copy=function(t){Ji.prototype.copy.call(this,t);this.color.copy(t.color);this.map=t.map;this.lightMap=t.lightMap;this.lightMapIntensity=t.lightMapIntensity;this.aoMap=t.aoMap;this.aoMapIntensity=t.aoMapIntensity;this.specularMap=t.specularMap;this.alphaMap=t.alphaMap;this.envMap=t.envMap;this.combine=t.combine;this.reflectivity=t.reflectivity;this.refractionRatio=t.refractionRatio;this.wireframe=t.wireframe;this.wireframeLinewidth=t.wireframeLinewidth;this.wireframeLinecap=t.wireframeLinecap;this.wireframeLinejoin=t.wireframeLinejoin;this.skinning=t.skinning;this.morphTargets=t.morphTargets;return this};function Oa(t){Ji.call(this);this.type="ShaderMaterial";this.defines={};this.uniforms={};this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}";this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";this.linewidth=1;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.clipping=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.extensions={derivatives:false,fragDepth:false,drawBuffers:false,shaderTextureLOD:false};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void 0;this.uniformsNeedUpdate=false;if(void 0!==t){if(void 0!==t.attributes)console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.");this.setValues(t)}}Oa.prototype=Object.create(Ji.prototype);Oa.prototype.constructor=Oa;Oa.prototype.isShaderMaterial=true;Oa.prototype.copy=function(t){Ji.prototype.copy.call(this,t);this.fragmentShader=t.fragmentShader;this.vertexShader=t.vertexShader;this.uniforms=jr.clone(t.uniforms);this.defines=t.defines;this.wireframe=t.wireframe;this.wireframeLinewidth=t.wireframeLinewidth;this.lights=t.lights;this.clipping=t.clipping;this.skinning=t.skinning;this.morphTargets=t.morphTargets;this.morphNormals=t.morphNormals;this.extensions=t.extensions;return this};Oa.prototype.toJSON=function(t){var e=Ji.prototype.toJSON.call(this,t);e.uniforms=this.uniforms;e.vertexShader=this.vertexShader;e.fragmentShader=this.fragmentShader;return e};function Na(t,e){this.origin=void 0!==t?t:new Ge;this.direction=void 0!==e?e:new Ge}Object.assign(Na.prototype,{set:function(t,e){this.origin.copy(t);this.direction.copy(e);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.origin.copy(t.origin);this.direction.copy(t.direction);return this},at:function(t,e){var r=e||new Ge;return r.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){this.direction.copy(t).sub(this.origin).normalize();return this},recast:function(){var t=new Ge;return function e(r){this.origin.copy(this.at(r,t));return this}}(),closestPointToPoint:function(t,e){var r=e||new Ge;r.subVectors(t,this.origin);var n=r.dot(this.direction);if(n<0)return r.copy(this.origin);return r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new Ge;return function e(r){var n=t.subVectors(r,this.origin).dot(this.direction);if(n<0)return this.origin.distanceToSquared(r);t.copy(this.direction).multiplyScalar(n).add(this.origin);return t.distanceToSquared(r)}}(),distanceSqToSegment:function(){var t=new Ge;var e=new Ge;var r=new Ge;return function n(i,a,o,s){t.copy(i).add(a).multiplyScalar(.5);e.copy(a).sub(i).normalize();r.copy(this.origin).sub(t);var u=.5*i.distanceTo(a);var c=-this.direction.dot(e);var l=r.dot(this.direction);var h=-r.dot(e);var f=r.lengthSq();var p=Math.abs(1-c*c);var d,v,m,g;if(p>0){d=c*h-l;v=c*l-h;g=u*p;if(d>=0)if(v>=-g)if(v<=g){var y=1/p;d*=y;v*=y;m=d*(d+c*v+2*l)+v*(c*d+v+2*h)+f}else{v=u;d=Math.max(0,-(c*v+l));m=-d*d+v*(v+2*h)+f}else{v=-u;d=Math.max(0,-(c*v+l));m=-d*d+v*(v+2*h)+f}else if(v<=-g){d=Math.max(0,-(-c*u+l));v=d>0?-u:Math.min(Math.max(-u,-h),u);m=-d*d+v*(v+2*h)+f}else if(v<=g){d=0;v=Math.min(Math.max(-u,-h),u);m=v*(v+2*h)+f}else{d=Math.max(0,-(c*u+l));v=d>0?u:Math.min(Math.max(-u,-h),u);m=-d*d+v*(v+2*h)+f}}else{v=c>0?-u:u;d=Math.max(0,-(c*v+l));m=-d*d+v*(v+2*h)+f}if(o)o.copy(this.direction).multiplyScalar(d).add(this.origin);if(s)s.copy(e).multiplyScalar(v).add(t);return m}}(),intersectSphere:function(){var t=new Ge;return function e(r,n){t.subVectors(r.center,this.origin);var i=t.dot(this.direction);var a=t.dot(t)-i*i;var o=r.radius*r.radius;if(a>o)return null;var s=Math.sqrt(o-a);var u=i-s;var c=i+s;if(u<0&&c<0)return null;if(u<0)return this.at(c,n);return this.at(u,n)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e){if(0===t.distanceToPoint(this.origin))return 0;return null}var r=-(this.origin.dot(t.normal)+t.constant)/e;return r>=0?r:null},intersectPlane:function(t,e){var r=this.distanceToPlane(t);if(null===r)return null;return this.at(r,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return true;var r=t.normal.dot(this.direction);if(r*e<0)return true;return false},intersectBox:function(t,e){var r,n,i,a,o,s;var u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z;var h=this.origin;if(u>=0){r=(t.min.x-h.x)*u;n=(t.max.x-h.x)*u}else{r=(t.max.x-h.x)*u;n=(t.min.x-h.x)*u}if(c>=0){i=(t.min.y-h.y)*c;a=(t.max.y-h.y)*c}else{i=(t.max.y-h.y)*c;a=(t.min.y-h.y)*c}if(r>a||i>n)return null;if(i>r||r!==r)r=i;if(a<n||n!==n)n=a;if(l>=0){o=(t.min.z-h.z)*l;s=(t.max.z-h.z)*l}else{o=(t.max.z-h.z)*l;s=(t.min.z-h.z)*l}if(r>s||o>n)return null;if(o>r||r!==r)r=o;if(s<n||n!==n)n=s;if(n<0)return null;return this.at(r>=0?r:n,e)},intersectsBox:function(){var t=new Ge;return function e(r){return null!==this.intersectBox(r,t)}}(),intersectTriangle:function(){var t=new Ge;var e=new Ge;var r=new Ge;var n=new Ge;return function i(a,o,s,u,c){e.subVectors(o,a);r.subVectors(s,a);n.crossVectors(e,r);var l=this.direction.dot(n);var h;if(l>0){if(u)return null;h=1}else if(l<0){h=-1;l=-l}else return null;t.subVectors(this.origin,a);var f=h*this.direction.dot(r.crossVectors(t,r));if(f<0)return null;var p=h*this.direction.dot(e.cross(t));if(p<0)return null;if(f+p>l)return null;var d=-h*t.dot(n);if(d<0)return null;return this.at(d/l,c)}}(),applyMatrix4:function(t){this.origin.applyMatrix4(t);this.direction.transformDirection(t);return this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});function Ua(t,e){this.start=void 0!==t?t:new Ge;this.end=void 0!==e?e:new Ge}Object.assign(Ua.prototype,{set:function(t,e){this.start.copy(t);this.end.copy(e);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.start.copy(t.start);this.end.copy(t.end);return this},getCenter:function(t){var e=t||new Ge;return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){var e=t||new Ge;return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var r=e||new Ge;return this.delta(r).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new Ge;var e=new Ge;return function r(n,i){t.subVectors(n,this.start);e.subVectors(this.end,this.start);var a=e.dot(e);var o=e.dot(t);var s=o/a;if(i)s=Fe.clamp(s,0,1);return s}}(),closestPointToPoint:function(t,e,r){var n=this.closestPointToPointParameter(t,e);var i=r||new Ge;return this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){this.start.applyMatrix4(t);this.end.applyMatrix4(t);return this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}});function Da(t,e,r){this.a=void 0!==t?t:new Ge;this.b=void 0!==e?e:new Ge;this.c=void 0!==r?r:new Ge}Object.assign(Da,{normal:function(){var t=new Ge;return function e(r,n,i,a){var o=a||new Ge;o.subVectors(i,n);t.subVectors(r,n);o.cross(t);var s=o.lengthSq();if(s>0)return o.multiplyScalar(1/Math.sqrt(s));return o.set(0,0,0)}}(),barycoordFromPoint:function(){var t=new Ge;var e=new Ge;var r=new Ge;return function n(i,a,o,s,u){t.subVectors(s,a);e.subVectors(o,a);r.subVectors(i,a);var c=t.dot(t);var l=t.dot(e);var h=t.dot(r);var f=e.dot(e);var p=e.dot(r);var d=c*f-l*l;var v=u||new Ge;if(0===d)return v.set(-2,-1,-1);var m=1/d;var g=(f*h-l*p)*m;var y=(c*p-l*h)*m;return v.set(1-g-y,y,g)}}(),containsPoint:function(){var t=new Ge;return function e(r,n,i,a){var o=Da.barycoordFromPoint(r,n,i,a,t);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}()});Object.assign(Da.prototype,{set:function(t,e,r){this.a.copy(t);this.b.copy(e);this.c.copy(r);return this},setFromPointsAndIndices:function(t,e,r,n){this.a.copy(t[e]);this.b.copy(t[r]);this.c.copy(t[n]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a.copy(t.a);this.b.copy(t.b);this.c.copy(t.c);return this},area:function(){var t=new Ge;var e=new Ge;return function r(){t.subVectors(this.c,this.b);e.subVectors(this.a,this.b);return.5*t.cross(e).length()}}(),midpoint:function(t){var e=t||new Ge;return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return Da.normal(this.a,this.b,this.c,t)},plane:function(t){var e=t||new ea;return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return Da.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return Da.containsPoint(t,this.a,this.b,this.c)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new ea;var e=[new Ua,new Ua,new Ua];var r=new Ge;var n=new Ge;return function i(a,o){var s=o||new Ge;var u=Infinity;t.setFromCoplanarPoints(this.a,this.b,this.c);t.projectPoint(a,r);if(true===this.containsPoint(r))s.copy(r);else{e[0].set(this.a,this.b);e[1].set(this.b,this.c);e[2].set(this.c,this.a);for(var c=0;c<e.length;c++){e[c].closestPointToPoint(r,true,n);var l=r.distanceToSquared(n);if(l<u){u=l;s.copy(n)}}}return s}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});function za(t,e){ua.call(this);this.type="Mesh";this.geometry=void 0!==t?t:new Aa;this.material=void 0!==e?e:new Ia({color:16777215*Math.random()});this.drawMode=Te;this.updateMorphTargets()}za.prototype=Object.assign(Object.create(ua.prototype),{constructor:za,isMesh:true,setDrawMode:function(t){this.drawMode=t},copy:function(t){ua.prototype.copy.call(this,t);this.drawMode=t.drawMode;if(void 0!==t.morphTargetInfluences)this.morphTargetInfluences=t.morphTargetInfluences.slice();if(void 0!==t.morphTargetDictionary)this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary);return this},updateMorphTargets:function(){var t=this.geometry;var e,r,n;if(t.isBufferGeometry){var i=t.morphAttributes;var a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(void 0!==o){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(e=0,r=o.length;e<r;e++){n=o[e].name||String(e);this.morphTargetInfluences.push(0);this.morphTargetDictionary[n]=e}}}}else{var s=t.morphTargets;if(void 0!==s&&s.length>0){this.morphTargetInfluences=[];this.morphTargetDictionary={};for(e=0,r=s.length;e<r;e++){n=s[e].name||String(e);this.morphTargetInfluences.push(0);this.morphTargetDictionary[n]=e}}}},raycast:function(){var t=new He;var e=new Na;var r=new ta;var n=new Ge;var i=new Ge;var a=new Ge;var o=new Ge;var s=new Ge;var u=new Ge;var c=new ke;var l=new ke;var h=new ke;var f=new Ge;var p=new Ge;var d=new Ge;function v(t,e,r,n,i,a,o){Da.barycoordFromPoint(t,e,r,n,f);i.multiplyScalar(f.x);a.multiplyScalar(f.y);o.multiplyScalar(f.z);i.add(a).add(o);return i.clone()}function m(t,e,r,n,i,a,o,s){var u;if(e.side===_)u=n.intersectTriangle(o,a,i,true,s);else u=n.intersectTriangle(i,a,o,e.side!==b,s);if(null===u)return null;d.copy(s);d.applyMatrix4(t.matrixWorld);var c=r.ray.origin.distanceTo(d);if(c<r.near||c>r.far)return null;return{distance:c,point:d.clone(),object:t}}function g(t,e,r,o,s,u,f,d){n.fromBufferAttribute(o,u);i.fromBufferAttribute(o,f);a.fromBufferAttribute(o,d);var g=m(t,t.material,e,r,n,i,a,p);if(g){if(s){c.fromBufferAttribute(s,u);l.fromBufferAttribute(s,f);h.fromBufferAttribute(s,d);g.uv=v(p,n,i,a,c,l,h)}g.face=new ha(u,f,d,Da.normal(n,i,a));g.faceIndex=u}return g}return function f(d,y){var x=this.geometry;var _=this.material;var b=this.matrixWorld;if(void 0===_)return;if(null===x.boundingSphere)x.computeBoundingSphere();r.copy(x.boundingSphere);r.applyMatrix4(b);if(false===d.ray.intersectsSphere(r))return;t.getInverse(b);e.copy(d.ray).applyMatrix4(t);if(null!==x.boundingBox)if(false===e.intersectsBox(x.boundingBox))return;var w;if(x.isBufferGeometry){var M,E,S;var T=x.index;var A=x.attributes.position;var R=x.attributes.uv;var L,C;if(null!==T)for(L=0,C=T.count;L<C;L+=3){M=T.getX(L);E=T.getX(L+1);S=T.getX(L+2);w=g(this,d,e,A,R,M,E,S);if(w){w.faceIndex=Math.floor(L/3);y.push(w)}}else if(void 0!==A)for(L=0,C=A.count;L<C;L+=3){M=L;E=L+1;S=L+2;w=g(this,d,e,A,R,M,E,S);if(w){w.index=M;y.push(w)}}}else if(x.isGeometry){var P,I,O;var N=Array.isArray(_);var U=x.vertices;var D=x.faces;var z;var B=x.faceVertexUvs[0];if(B.length>0)z=B;for(var F=0,k=D.length;F<k;F++){var H=D[F];var j=N?_[H.materialIndex]:_;if(void 0===j)continue;P=U[H.a];I=U[H.b];O=U[H.c];if(true===j.morphTargets){var G=x.morphTargets;var V=this.morphTargetInfluences;n.set(0,0,0);i.set(0,0,0);a.set(0,0,0);for(var W=0,X=G.length;W<X;W++){var q=V[W];if(0===q)continue;var Y=G[W].vertices;n.addScaledVector(o.subVectors(Y[H.a],P),q);i.addScaledVector(s.subVectors(Y[H.b],I),q);a.addScaledVector(u.subVectors(Y[H.c],O),q)}n.add(P);i.add(I);a.add(O);P=n;I=i;O=a}w=m(this,j,d,e,P,I,O,p);if(w){if(z&&z[F]){var Z=z[F];c.copy(Z[0]);l.copy(Z[1]);h.copy(Z[2]);w.uv=v(p,P,I,O,c,l,h)}w.face=H;w.faceIndex=F;y.push(w)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Ba(t,e,r,n){var i=new kr(0);var a=0;var o,s;var u;function c(e,n,c,h){var f=n.background;if(null===f)l(i,a);else if(f&&f.isColor){l(f,1);h=true}if(t.autoClear||h)t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil);if(f&&f.isCubeTexture){if(void 0===u){u=new za(new La(1,1,1),new Oa({uniforms:Xi.cube.uniforms,vertexShader:Xi.cube.vertexShader,fragmentShader:Xi.cube.fragmentShader,side:_,depthTest:true,depthWrite:false,fog:false}));u.geometry.removeAttribute("normal");u.geometry.removeAttribute("uv");u.onBeforeRender=function(t,e,r){this.matrixWorld.copyPosition(r.matrixWorld)};r.update(u.geometry)}u.material.uniforms.tCube.value=f;e.push(u,u.geometry,u.material,0,null)}else if(f&&f.isTexture){if(void 0===o){o=new la(-1,1,1,-1,0,1);s=new za(new Pa(2,2),new Ia({depthTest:false,depthWrite:false,fog:false}));r.update(s.geometry)}s.material.map=f;t.renderBufferDirect(o,null,s.geometry,s.material,s,null)}}function l(t,r){e.buffers.color.setClear(t.r,t.g,t.b,r,n)}return{getClearColor:function(){return i},setClearColor:function(t,e){i.set(t);a=void 0!==e?e:1;l(i,a)},getClearAlpha:function(){return a},setClearAlpha:function(t){a=t;l(i,a)},render:c}}function Fa(t,e){if(t.renderOrder!==e.renderOrder)return t.renderOrder-e.renderOrder;else if(t.program&&e.program&&t.program!==e.program)return t.program.id-e.program.id;else if(t.material.id!==e.material.id)return t.material.id-e.material.id;else if(t.z!==e.z)return t.z-e.z;else return t.id-e.id}function ka(t,e){if(t.renderOrder!==e.renderOrder)return t.renderOrder-e.renderOrder;if(t.z!==e.z)return e.z-t.z;else return t.id-e.id}function Ha(){var t=[];var e=0;var r=[];var n=[];function i(){e=0;r.length=0;n.length=0}function a(i,a,o,s,u){var c=t[e];if(void 0===c){c={id:i.id,object:i,geometry:a,material:o,program:o.program,renderOrder:i.renderOrder,z:s,group:u};t[e]=c}else{c.id=i.id;c.object=i;c.geometry=a;c.material=o;c.program=o.program;c.renderOrder=i.renderOrder;c.z=s;c.group=u}(true===o.transparent?n:r).push(c);e++}function o(){if(r.length>1)r.sort(Fa);if(n.length>1)n.sort(ka)}return{opaque:r,transparent:n,init:i,push:a,sort:o}}function ja(){var t={};function e(e,r){var n=e.id+","+r.id;var i=t[n];if(void 0===i){i=new Ha;t[n]=i}return i}function r(){t={}}return{get:e,dispose:r}}function Ga(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Va(t){var e={};var r=new Float32Array(8);function n(n,i,a,o){var s=n.morphTargetInfluences;var u=s.length;var c=e[i.id];if(void 0===c){c=[];for(var l=0;l<u;l++)c[l]=[l,0];e[i.id]=c}var h=a.morphTargets&&i.morphAttributes.position;var f=a.morphNormals&&i.morphAttributes.normal;for(var l=0;l<u;l++){var p=c[l];if(0!==p[1]){if(h)i.removeAttribute("morphTarget"+l);if(f)i.removeAttribute("morphNormal"+l)}}for(var l=0;l<u;l++){var p=c[l];p[0]=l;p[1]=s[l]}c.sort(Ga);for(var l=0;l<8;l++){var p=c[l];if(p){var d=p[0];var v=p[1];if(v){if(h)i.addAttribute("morphTarget"+l,h[d]);if(f)i.addAttribute("morphNormal"+l,f[d]);r[l]=v;continue}}r[l]=0}o.getUniforms().setValue(t,"morphTargetInfluences",r)}return{update:n}}function Wa(t,e,r){var n;function i(t){n=t}var a,o;function s(t){a=t.type;o=t.bytesPerElement}function u(e,i){t.drawElements(n,i,a,e*o);r.calls++;r.vertices+=i;if(n===t.TRIANGLES)r.faces+=i/3;else if(n===t.POINTS)r.points+=i}function c(i,s,u){var c=e.get("ANGLE_instanced_arrays");if(null===c){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}c.drawElementsInstancedANGLE(n,u,a,s*o,i.maxInstancedCount);r.calls++;r.vertices+=u*i.maxInstancedCount;if(n===t.TRIANGLES)r.faces+=i.maxInstancedCount*u/3;else if(n===t.POINTS)r.points+=i.maxInstancedCount*u}this.setMode=i;this.setIndex=s;this.render=u;this.renderInstances=c}function Xa(t,e,r){var n;function i(t){n=t}function a(e,i){t.drawArrays(n,e,i);r.calls++;r.vertices+=i;if(n===t.TRIANGLES)r.faces+=i/3;else if(n===t.POINTS)r.points+=i}function o(i,a,o){var s=e.get("ANGLE_instanced_arrays");if(null===s){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}var u=i.attributes.position;if(u.isInterleavedBufferAttribute){o=u.data.count;s.drawArraysInstancedANGLE(n,0,o,i.maxInstancedCount)}else s.drawArraysInstancedANGLE(n,a,o,i.maxInstancedCount);r.calls++;r.vertices+=o*i.maxInstancedCount;if(n===t.TRIANGLES)r.faces+=i.maxInstancedCount*o/3;else if(n===t.POINTS)r.points+=i.maxInstancedCount*o}this.setMode=i;this.render=a;this.renderInstances=o}function qa(t,e,r){var n={};var i={};function a(t){var o=t.target;var s=n[o.id];if(null!==s.index)e.remove(s.index);for(var u in s.attributes)e.remove(s.attributes[u]);o.removeEventListener("dispose",a);delete n[o.id];var c=i[o.id];if(c){e.remove(c);delete i[o.id]}c=i[s.id];if(c){e.remove(c);delete i[s.id]}r.geometries--}function o(t,e){var i=n[e.id];if(i)return i;e.addEventListener("dispose",a);if(e.isBufferGeometry)i=e;else if(e.isGeometry){if(void 0===e._bufferGeometry)e._bufferGeometry=(new Aa).setFromObject(t);i=e._bufferGeometry}n[e.id]=i;r.geometries++;return i}function s(r){var n=r.index;var i=r.attributes;if(null!==n)e.update(n,t.ELEMENT_ARRAY_BUFFER);for(var a in i)e.update(i[a],t.ARRAY_BUFFER);var o=r.morphAttributes;for(var a in o){var s=o[a];for(var u=0,c=s.length;u<c;u++)e.update(s[u],t.ARRAY_BUFFER)}}function u(r){var n=i[r.id];if(n)return n;var a=[];var o=r.index;var s=r.attributes;if(null!==o){var u=o.array;for(var c=0,l=u.length;c<l;c+=3){var h=u[c+0];var f=u[c+1];var p=u[c+2];a.push(h,f,f,p,p,h)}}else{var u=s.position.array;for(var c=0,l=u.length/3-1;c<l;c+=3){var h=c+0;var f=c+1;var p=c+2;a.push(h,f,f,p,p,h)}}n=new(Sa(a)>65535?ba:xa)(a,1);e.update(n,t.ELEMENT_ARRAY_BUFFER);i[r.id]=n;return n}return{get:o,update:s,getWireframeAttribute:u}}function Ya(t,e){var r={};function n(n){var i=e.frame;var a=n.geometry;var o=t.get(n,a);if(r[o.id]!==i){if(a.isGeometry)o.updateFromObject(n);t.update(o);r[o.id]=i}return o}function i(){r={}}return{update:n,dispose:i}}function Za(t){var e=t.split("\n");for(var r=0;r<e.length;r++)e[r]=r+1+": "+e[r];return e.join("\n")}function Ja(t,e,r){var n=t.createShader(e);t.shaderSource(n,r);t.compileShader(n);if(false===t.getShaderParameter(n,t.COMPILE_STATUS))console.error("THREE.WebGLShader: Shader couldn't compile.");if(""!==t.getShaderInfoLog(n))console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(n),Za(r));return n}var Qa=0;function Ka(t){switch(t){case Le:return["Linear","( value )"];case Ce:return["sRGB","( value )"];case Ie:return["RGBE","( value )"];case Ne:return["RGBM","( value, 7.0 )"];case Ue:return["RGBM","( value, 16.0 )"];case De:return["RGBD","( value, 256.0 )"];case Pe:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function $a(t,e){var r=Ka(e);return"vec4 "+t+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function to(t,e){var r=Ka(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function eo(t,e){var r;switch(e){case st:r="Linear";break;case ut:r="Reinhard";break;case ct:r="Uncharted2";break;case lt:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function ro(t,e,r){t=t||{};var n=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return n.filter(ao).join("\n")}function no(t){var e=[];for(var r in t){var n=t[r];if(false===n)continue;e.push("#define "+r+" "+n)}return e.join("\n")}function io(t,e){var r={};var n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(var i=0;i<n;i++){var a=t.getActiveAttrib(e,i);var o=a.name;r[o]=t.getAttribLocation(e,o)}return r}function ao(t){return""!==t}function oo(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function so(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function uo(t){var e=/^[ \t]*#include +<([\w\d.]+)>/gm;function r(t,e){var r=Wi[e];if(void 0===r)throw new Error("Can not resolve #include <"+e+">");return uo(r)}return t.replace(e,r)}function co(t){var e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function r(t,e,r,n){var i="";for(var a=parseInt(e);a<parseInt(r);a++)i+=n.replace(/\[ i \]/g,"[ "+a+" ]");return i}return t.replace(e,r)}function lo(t,e,r,n,i,a){var o=t.context;var s=n.defines;var u=i.vertexShader;var c=i.fragmentShader;var l="SHADOWMAP_TYPE_BASIC";if(a.shadowMapType===g)l="SHADOWMAP_TYPE_PCF";else if(a.shadowMapType===y)l="SHADOWMAP_TYPE_PCF_SOFT";var h="ENVMAP_TYPE_CUBE";var f="ENVMAP_MODE_REFLECTION";var p="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case ft:case pt:h="ENVMAP_TYPE_CUBE";break;case gt:case yt:h="ENVMAP_TYPE_CUBE_UV";break;case dt:case vt:h="ENVMAP_TYPE_EQUIREC";break;case mt:h="ENVMAP_TYPE_SPHERE";break}switch(n.envMap.mapping){case pt:case vt:f="ENVMAP_MODE_REFRACTION";break}switch(n.combine){case nt:p="ENVMAP_BLENDING_MULTIPLY";break;case it:p="ENVMAP_BLENDING_MIX";break;case at:p="ENVMAP_BLENDING_ADD";break}}var d=t.gammaFactor>0?t.gammaFactor:1;var v=ro(n.extensions,a,e);var m=no(s);var x=o.createProgram();var _,b;if(n.isRawShaderMaterial){_=[m].filter(ao).join("\n");if(_.length>0)_+="\n";b=[v,m].filter(ao).join("\n");if(b.length>0)b+="\n"}else{_=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,m,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&false===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+l:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ao).join("\n");b=[v,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,m,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"","#define GAMMA_FACTOR "+d,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+h:"",a.envMap?"#define "+f:"",a.envMap?"#define "+p:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+l:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&e.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&e.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==ot?"#define TONE_MAPPING":"",a.toneMapping!==ot?Wi["tonemapping_pars_fragment"]:"",a.toneMapping!==ot?eo("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Wi["encodings_pars_fragment"]:"",a.mapEncoding?$a("mapTexelToLinear",a.mapEncoding):"",a.envMapEncoding?$a("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?$a("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?to("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ao).join("\n")}u=uo(u);u=oo(u,a);u=so(u,a);c=uo(c);c=oo(c,a);c=so(c,a);u=co(u);c=co(c);var w=_+u;var M=b+c;var E=Ja(o,o.VERTEX_SHADER,w);var S=Ja(o,o.FRAGMENT_SHADER,M);o.attachShader(x,E);o.attachShader(x,S);if(void 0!==n.index0AttributeName)o.bindAttribLocation(x,0,n.index0AttributeName);else if(true===a.morphTargets)o.bindAttribLocation(x,0,"position");o.linkProgram(x);var T=o.getProgramInfoLog(x).trim();var A=o.getShaderInfoLog(E).trim();var R=o.getShaderInfoLog(S).trim();var L=true;var C=true;if(false===o.getProgramParameter(x,o.LINK_STATUS)){L=false;console.error("THREE.WebGLProgram: shader error: ",o.getError(),"gl.VALIDATE_STATUS",o.getProgramParameter(x,o.VALIDATE_STATUS),"gl.getProgramInfoLog",T,A,R)}else if(""!==T)console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T);else if(""===A||""===R)C=false;if(C)this.diagnostics={runnable:L,material:n,programLog:T,vertexShader:{log:A,prefix:_},fragmentShader:{log:R,prefix:b}};o.deleteShader(E);o.deleteShader(S);var P;this.getUniforms=function(){if(void 0===P)P=new Br(o,x,t);return P};var I;this.getAttributes=function(){if(void 0===I)I=io(o,x);return I};this.destroy=function(){o.deleteProgram(x);this.program=void 0};Object.defineProperties(this,{uniforms:{get:function(){console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms().");return this.getUniforms()}},attributes:{get:function(){console.warn("THREE.WebGLProgram: .attributes is now .getAttributes().");return this.getAttributes()}}});this.id=Qa++;this.code=r;this.usedTimes=1;this.program=x;this.vertexShader=E;this.fragmentShader=S;return this}function ho(t,e,r){var n=[];var i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"};var a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(t){var e=t.skeleton;var n=e.bones;if(r.floatVertexTextures)return 1024;else{var i=r.maxVertexUniforms;var a=Math.floor((i-20)/4);var o=Math.min(a,n.length);if(o<n.length){console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+o+".");return 0}return o}}function s(t,e){var r;if(!t)r=Le;else if(t.isTexture)r=t.encoding;else if(t.isWebGLRenderTarget){console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.");r=t.texture.encoding}if(r===Le&&e)r=Pe;return r}this.getParameters=function(e,n,a,u,c,l,h){var f=i[e.type];var p=h.isSkinnedMesh?o(h):0;var d=r.precision;if(null!==e.precision){d=r.getMaxPrecision(e.precision);if(d!==e.precision)console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",d,"instead.")}var v=t.getRenderTarget();var m={shaderID:f,precision:d,supportsVertexTextures:r.vertexTextures,outputEncoding:s(!v?null:v.texture,t.gammaOutput),map:!!e.map,mapEncoding:s(e.map,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:s(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===gt||e.envMap.mapping===yt),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:s(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!u,useFog:e.fog,fogExp:u&&u.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:r.logarithmicDepthBuffer,skinning:e.skinning&&p>0,maxBones:p,useVertexTexture:r.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:n.directional.length,numPointLights:n.point.length,numSpotLights:n.spot.length,numRectAreaLights:n.rectArea.length,numHemiLights:n.hemi.length,numClippingPlanes:c,numClipIntersection:l,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&a.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===b,flipSided:e.side===_,depthPacking:void 0!==e.depthPacking?e.depthPacking:false};return m};this.getProgramCode=function(e,r){var n=[];if(r.shaderID)n.push(r.shaderID);else{n.push(e.fragmentShader);n.push(e.vertexShader)}if(void 0!==e.defines)for(var i in e.defines){n.push(i);n.push(e.defines[i])}for(var o=0;o<a.length;o++)n.push(r[a[o]]);n.push(e.onBeforeCompile.toString());n.push(t.gammaOutput);return n.join()};this.acquireProgram=function(r,i,a,o){var s;for(var u=0,c=n.length;u<c;u++){var l=n[u];if(l.code===o){s=l;++s.usedTimes;break}}if(void 0===s){s=new lo(t,e,o,r,i,a);n.push(s)}return s};this.releaseProgram=function(t){if(0===--t.usedTimes){var e=n.indexOf(t);n[e]=n[n.length-1];n.pop();t.destroy()}};this.programs=n}function fo(t,e,r,n,i,a,o,s){var u="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;var c={};var l;function h(t,e){if(t.width>e||t.height>e){var r=e/Math.max(t.width,t.height);var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(t.width*r);n.height=Math.floor(t.height*r);var i=n.getContext("2d");i.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height);console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+n.width+"x"+n.height,t);return n}return t}function f(t){return Fe.isPowerOfTwo(t.width)&&Fe.isPowerOfTwo(t.height)}function p(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageBitmap){if(void 0===l)l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");l.width=Fe.floorPowerOfTwo(t.width);l.height=Fe.floorPowerOfTwo(t.height);var e=l.getContext("2d");e.drawImage(t,0,0,l.width,l.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+t.width+"x"+t.height+"). Resized to "+l.width+"x"+l.height,t);return l}return t}function d(t){return t.wrapS!==_t||t.wrapT!==_t||t.minFilter!==wt&&t.minFilter!==St}function v(t,e){return t.generateMipmaps&&e&&t.minFilter!==wt&&t.minFilter!==St}function m(e){if(e===wt||e===Mt||e===Et)return t.NEAREST;return t.LINEAR}function g(t){var e=t.target;e.removeEventListener("dispose",g);x(e);if(e.isVideoTexture)delete c[e.id];o.textures--}function y(t){var e=t.target;e.removeEventListener("dispose",y);_(e);o.textures--}function x(e){var r=n.get(e);if(e.image&&r.__image__webglTextureCube)t.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;t.deleteTexture(r.__webglTexture)}n.remove(e)}function _(e){var r=n.get(e);var i=n.get(e.texture);if(!e)return;if(void 0!==i.__webglTexture)t.deleteTexture(i.__webglTexture);if(e.depthTexture)e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var a=0;a<6;a++){t.deleteFramebuffer(r.__webglFramebuffer[a]);if(r.__webglDepthbuffer)t.deleteRenderbuffer(r.__webglDepthbuffer[a])}else{t.deleteFramebuffer(r.__webglFramebuffer);if(r.__webglDepthbuffer)t.deleteRenderbuffer(r.__webglDepthbuffer)}n.remove(e.texture);n.remove(e)}function b(e,i){var a=n.get(e);if(e.isVideoTexture)I(e);if(e.version>0&&a.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else if(false===o.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e);else{S(a,e,i);return}}r.activeTexture(t.TEXTURE0+i);r.bindTexture(t.TEXTURE_2D,a.__webglTexture)}function w(e,s){var u=n.get(e);if(6===e.image.length)if(e.version>0&&u.__version!==e.version){if(!u.__image__webglTextureCube){e.addEventListener("dispose",g);u.__image__webglTextureCube=t.createTexture();o.textures++}r.activeTexture(t.TEXTURE0+s);r.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);var c=e&&e.isCompressedTexture;var l=e.image[0]&&e.image[0].isDataTexture;var p=[];for(var d=0;d<6;d++)if(!c&&!l)p[d]=h(e.image[d],i.maxCubemapSize);else p[d]=l?e.image[d].image:e.image[d];var m=p[0],y=f(m),x=a.convert(e.format),_=a.convert(e.type);E(t.TEXTURE_CUBE_MAP,e,y);for(var d=0;d<6;d++)if(!c)if(l)r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,x,p[d].width,p[d].height,0,x,_,p[d].data);else r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,x,x,_,p[d]);else{var b,w=p[d].mipmaps;for(var M=0,S=w.length;M<S;M++){b=w[M];if(e.format!==jt&&e.format!==Ht)if(r.getCompressedTextureFormats().indexOf(x)>-1)r.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,M,x,b.width,b.height,0,b.data);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()");else r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,M,x,b.width,b.height,0,x,_,b.data)}}if(v(e,y))t.generateMipmap(t.TEXTURE_CUBE_MAP);u.__version=e.version;if(e.onUpdate)e.onUpdate(e)}else{r.activeTexture(t.TEXTURE0+s);r.bindTexture(t.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)}}function M(e,i){r.activeTexture(t.TEXTURE0+i);r.bindTexture(t.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)}function E(r,o,s){var u;if(s){t.texParameteri(r,t.TEXTURE_WRAP_S,a.convert(o.wrapS));t.texParameteri(r,t.TEXTURE_WRAP_T,a.convert(o.wrapT));t.texParameteri(r,t.TEXTURE_MAG_FILTER,a.convert(o.magFilter));t.texParameteri(r,t.TEXTURE_MIN_FILTER,a.convert(o.minFilter))}else{t.texParameteri(r,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE);t.texParameteri(r,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);if(o.wrapS!==_t||o.wrapT!==_t)console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o);t.texParameteri(r,t.TEXTURE_MAG_FILTER,m(o.magFilter));t.texParameteri(r,t.TEXTURE_MIN_FILTER,m(o.minFilter));if(o.minFilter!==wt&&o.minFilter!==St)console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)}u=e.get("EXT_texture_filter_anisotropic");if(u){if(o.type===Nt&&null===e.get("OES_texture_float_linear"))return;if(o.type===Ut&&null===e.get("OES_texture_half_float_linear"))return;if(o.anisotropy>1||n.get(o).__currentAnisotropy){t.texParameterf(r,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy()));n.get(o).__currentAnisotropy=o.anisotropy}}}function S(e,n,s){if(void 0===e.__webglInit){e.__webglInit=true;n.addEventListener("dispose",g);e.__webglTexture=t.createTexture();o.textures++}r.activeTexture(t.TEXTURE0+s);r.bindTexture(t.TEXTURE_2D,e.__webglTexture);t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY);t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha);t.pixelStorei(t.UNPACK_ALIGNMENT,n.unpackAlignment);var c=h(n.image,i.maxTextureSize);if(d(n)&&false===f(c))c=p(c);var l=f(c),m=a.convert(n.format),y=a.convert(n.type);E(t.TEXTURE_2D,n,l);var x,_=n.mipmaps;if(n.isDepthTexture){var b=t.DEPTH_COMPONENT;if(n.type===Nt){if(!u)throw new Error("Float Depth Texture only supported in WebGL2.0");b=t.DEPTH_COMPONENT32F}else if(u)b=t.DEPTH_COMPONENT16;if(n.format===Xt&&b===t.DEPTH_COMPONENT)if(n.type!==Pt&&n.type!==Ot){console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.");n.type=Pt;y=a.convert(n.type)}if(n.format===qt){b=t.DEPTH_STENCIL;if(n.type!==Ft){console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.");n.type=Ft;y=a.convert(n.type)}}r.texImage2D(t.TEXTURE_2D,0,b,c.width,c.height,0,m,y,null)}else if(n.isDataTexture)if(_.length>0&&l){for(var w=0,M=_.length;w<M;w++){x=_[w];r.texImage2D(t.TEXTURE_2D,w,m,x.width,x.height,0,m,y,x.data)}n.generateMipmaps=false}else r.texImage2D(t.TEXTURE_2D,0,m,c.width,c.height,0,m,y,c.data);else if(n.isCompressedTexture)for(var w=0,M=_.length;w<M;w++){x=_[w];if(n.format!==jt&&n.format!==Ht)if(r.getCompressedTextureFormats().indexOf(m)>-1)r.compressedTexImage2D(t.TEXTURE_2D,w,m,x.width,x.height,0,x.data);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else r.texImage2D(t.TEXTURE_2D,w,m,x.width,x.height,0,m,y,x.data)}else if(_.length>0&&l){for(var w=0,M=_.length;w<M;w++){x=_[w];r.texImage2D(t.TEXTURE_2D,w,m,m,y,x)}n.generateMipmaps=false}else r.texImage2D(t.TEXTURE_2D,0,m,m,y,c);if(v(n,l))t.generateMipmap(t.TEXTURE_2D);e.__version=n.version;if(n.onUpdate)n.onUpdate(n)}function T(e,i,o,s){var u=a.convert(i.texture.format);var c=a.convert(i.texture.type);r.texImage2D(s,0,u,i.width,i.height,0,u,c,null);t.bindFramebuffer(t.FRAMEBUFFER,e);t.framebufferTexture2D(t.FRAMEBUFFER,o,s,n.get(i.texture).__webglTexture,0);t.bindFramebuffer(t.FRAMEBUFFER,null)}function A(e,r){t.bindRenderbuffer(t.RENDERBUFFER,e);if(r.depthBuffer&&!r.stencilBuffer){t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,r.width,r.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(r.depthBuffer&&r.stencilBuffer){t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,r.width,r.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,r.width,r.height);t.bindRenderbuffer(t.RENDERBUFFER,null)}function R(e,r){var i=r&&r.isWebGLRenderTargetCube;if(i)throw new Error("Depth Texture with cube render targets is not supported");t.bindFramebuffer(t.FRAMEBUFFER,e);if(!(r.depthTexture&&r.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(!n.get(r.depthTexture).__webglTexture||r.depthTexture.image.width!==r.width||r.depthTexture.image.height!==r.height){r.depthTexture.image.width=r.width;r.depthTexture.image.height=r.height;r.depthTexture.needsUpdate=true}b(r.depthTexture,0);var a=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Xt)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0);else if(r.depthTexture.format===qt)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,a,0);else throw new Error("Unknown depthTexture format")}function L(e){var r=n.get(e);var i=true===e.isWebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");R(r.__webglFramebuffer,e)}else if(i){r.__webglDepthbuffer=[];for(var a=0;a<6;a++){t.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[a]);r.__webglDepthbuffer[a]=t.createRenderbuffer();A(r.__webglDepthbuffer[a],e)}}else{t.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer);r.__webglDepthbuffer=t.createRenderbuffer();A(r.__webglDepthbuffer,e)}t.bindFramebuffer(t.FRAMEBUFFER,null)}function C(e){var i=n.get(e);var a=n.get(e.texture);e.addEventListener("dispose",y);a.__webglTexture=t.createTexture();o.textures++;var s=true===e.isWebGLRenderTargetCube;var u=f(e);if(s){i.__webglFramebuffer=[];for(var c=0;c<6;c++)i.__webglFramebuffer[c]=t.createFramebuffer()}else i.__webglFramebuffer=t.createFramebuffer();if(s){r.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture);E(t.TEXTURE_CUBE_MAP,e.texture,u);for(var c=0;c<6;c++)T(i.__webglFramebuffer[c],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+c);if(v(e.texture,u))t.generateMipmap(t.TEXTURE_CUBE_MAP);r.bindTexture(t.TEXTURE_CUBE_MAP,null)}else{r.bindTexture(t.TEXTURE_2D,a.__webglTexture);E(t.TEXTURE_2D,e.texture,u);T(i.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D);if(v(e.texture,u))t.generateMipmap(t.TEXTURE_2D);r.bindTexture(t.TEXTURE_2D,null)}if(e.depthBuffer)L(e)}function P(e){var i=e.texture;var a=f(e);if(v(i,a)){var o=e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D;var s=n.get(i).__webglTexture;r.bindTexture(o,s);t.generateMipmap(o);r.bindTexture(o,null)}}function I(t){var e=t.id;var r=s.frame;if(c[e]!==r){c[e]=r;t.update()}}this.setTexture2D=b;this.setTextureCube=w;this.setTextureCubeDynamic=M;this.setupRenderTarget=C;this.updateRenderTargetMipmap=P}function po(){var t={};function e(e){var r=e.uuid;var n=t[r];if(void 0===n){n={};t[r]=n}return n}function r(e){delete t[e.uuid]}function n(e,r,n){var i=e.uuid;var a=t[i];a[r]=n}function i(){t={}}return{get:e,remove:r,update:n,dispose:i}}function vo(t,e,r){function n(){var e=false;var r=new qe;var n=null;var i=new qe(0,0,0,0);return{setMask:function(r){if(n!==r&&!e){t.colorMask(r,r,r,r);n=r}},setLocked:function(t){e=t},setClear:function(e,n,a,o,s){if(true===s){e*=o;n*=o;a*=o}r.set(e,n,a,o);if(false===i.equals(r)){t.clearColor(e,n,a,o);i.copy(r)}},reset:function(){e=false;n=null;i.set(-1,0,0,0)}}}function i(){var e=false;var r=null;var n=null;var i=null;return{setTest:function(e){if(e)ut(t.DEPTH_TEST);else ct(t.DEPTH_TEST)},setMask:function(n){if(r!==n&&!e){t.depthMask(n);r=n}},setFunc:function(e){if(n!==e){if(e)switch(e){case Z:t.depthFunc(t.NEVER);break;case J:t.depthFunc(t.ALWAYS);break;case Q:t.depthFunc(t.LESS);break;case K:t.depthFunc(t.LEQUAL);break;case $:t.depthFunc(t.EQUAL);break;case tt:t.depthFunc(t.GEQUAL);break;case et:t.depthFunc(t.GREATER);break;case rt:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){if(i!==e){t.clearDepth(e);i=e}},reset:function(){e=false;r=null;n=null;i=null}}}function a(){var e=false;var r=null;var n=null;var i=null;var a=null;var o=null;var s=null;var u=null;var c=null;return{setTest:function(e){if(e)ut(t.STENCIL_TEST);else ct(t.STENCIL_TEST)},setMask:function(n){if(r!==n&&!e){t.stencilMask(n);r=n}},setFunc:function(e,r,o){if(n!==e||i!==r||a!==o){t.stencilFunc(e,r,o);n=e;i=r;a=o}},setOp:function(e,r,n){if(o!==e||s!==r||u!==n){t.stencilOp(e,r,n);o=e;s=r;u=n}},setLocked:function(t){e=t},setClear:function(e){if(c!==e){t.clearStencil(e);c=e}},reset:function(){e=false;r=null;n=null;i=null;a=null;o=null;s=null;u=null;c=null}}}var o=new n;var s=new i;var u=new a;var c=t.getParameter(t.MAX_VERTEX_ATTRIBS);var p=new Uint8Array(c);var d=new Uint8Array(c);var v=new Uint8Array(c);var m={};var g=null;var y=null;var x=null;var w=null;var M=null;var E=null;var S=null;var T=null;var O=null;var N=false;var U=null;var D=null;var z=null;var B=null;var F=null;var k=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);var H=false;var j=0;var G=t.getParameter(t.VERSION);if(-1!==G.indexOf("WebGL")){j=parseFloat(/^WebGL\ ([0-9])/.exec(G)[1]);H=j>=1}else if(-1!==G.indexOf("OpenGL ES")){j=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(G)[1]);H=j>=2}var V=null;var W={};var X=new qe;var q=new qe;function Y(e,r,n){var i=new Uint8Array(4);var a=t.createTexture();t.bindTexture(e,a);t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST);t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var o=0;o<n;o++)t.texImage2D(r+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return a}var nt={};nt[t.TEXTURE_2D]=Y(t.TEXTURE_2D,t.TEXTURE_2D,1);nt[t.TEXTURE_CUBE_MAP]=Y(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6);o.setClear(0,0,0,1);s.setClear(1);u.setClear(0);ut(t.DEPTH_TEST);s.setFunc(K);dt(false);vt(h);ut(t.CULL_FACE);ut(t.BLEND);ft(R);function it(){for(var t=0,e=p.length;t<e;t++)p[t]=0}function at(r){p[r]=1;if(0===d[r]){t.enableVertexAttribArray(r);d[r]=1}if(0!==v[r]){var n=e.get("ANGLE_instanced_arrays");n.vertexAttribDivisorANGLE(r,0);v[r]=0}}function ot(r,n){p[r]=1;if(0===d[r]){t.enableVertexAttribArray(r);d[r]=1}if(v[r]!==n){var i=e.get("ANGLE_instanced_arrays");i.vertexAttribDivisorANGLE(r,n);v[r]=n}}function st(){for(var e=0,r=d.length;e!==r;++e)if(d[e]!==p[e]){t.disableVertexAttribArray(e);d[e]=0}}function ut(e){if(true!==m[e]){t.enable(e);m[e]=true}}function ct(e){if(false!==m[e]){t.disable(e);m[e]=false}}function lt(){if(null===g){g=[];if(e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")){var r=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS);for(var n=0;n<r.length;n++)g.push(r[n])}}return g}function ht(e){if(y!==e){t.useProgram(e);y=e;return true}return false}function ft(e,n,i,a,o,s,u,c){if(e!==A)ut(t.BLEND);else ct(t.BLEND);if(e!==I){if(e!==x||c!==N)switch(e){case L:if(c){t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD);t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)}else{t.blendEquation(t.FUNC_ADD);t.blendFunc(t.SRC_ALPHA,t.ONE)}break;case C:if(c){t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD);t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)}else{t.blendEquation(t.FUNC_ADD);t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)}break;case P:if(c){t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD);t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)}else{t.blendEquation(t.FUNC_ADD);t.blendFunc(t.ZERO,t.SRC_COLOR)}break;default:if(c){t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD);t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)}else{t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD);t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)}}w=null;M=null;E=null;S=null;T=null;O=null}else{o=o||n;s=s||i;u=u||a;if(n!==w||o!==S){t.blendEquationSeparate(r.convert(n),r.convert(o));w=n;S=o}if(i!==M||a!==E||s!==T||u!==O){t.blendFuncSeparate(r.convert(i),r.convert(a),r.convert(s),r.convert(u));M=i;E=a;T=s;O=u}}x=e;N=c}function pt(e,r){e.side===b?ct(t.CULL_FACE):ut(t.CULL_FACE);var n=e.side===_;if(r)n=!n;dt(n);true===e.transparent?ft(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):ft(A);s.setFunc(e.depthFunc);s.setTest(e.depthTest);s.setMask(e.depthWrite);o.setMask(e.colorWrite);gt(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function dt(e){if(U!==e){if(e)t.frontFace(t.CW);else t.frontFace(t.CCW);U=e}}function vt(e){if(e!==l){ut(t.CULL_FACE);if(e!==D)if(e===h)t.cullFace(t.BACK);else if(e===f)t.cullFace(t.FRONT);else t.cullFace(t.FRONT_AND_BACK)}else ct(t.CULL_FACE);D=e}function mt(e){if(e!==z){if(H)t.lineWidth(e);z=e}}function gt(e,r,n){if(e){ut(t.POLYGON_OFFSET_FILL);if(B!==r||F!==n){t.polygonOffset(r,n);B=r;F=n}}else ct(t.POLYGON_OFFSET_FILL)}function yt(e){if(e)ut(t.SCISSOR_TEST);else ct(t.SCISSOR_TEST)}function xt(e){if(void 0===e)e=t.TEXTURE0+k-1;if(V!==e){t.activeTexture(e);V=e}}function _t(e,r){if(null===V)xt();var n=W[V];if(void 0===n){n={type:void 0,texture:void 0};W[V]=n}if(n.type!==e||n.texture!==r){t.bindTexture(e,r||nt[e]);n.type=e;n.texture=r}}function bt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function wt(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function Mt(e){if(false===X.equals(e)){t.scissor(e.x,e.y,e.z,e.w);X.copy(e)}}function Et(e){if(false===q.equals(e)){t.viewport(e.x,e.y,e.z,e.w);q.copy(e)}}function St(){for(var e=0;e<d.length;e++)if(1===d[e]){t.disableVertexAttribArray(e);d[e]=0}m={};g=null;V=null;W={};y=null;x=null;U=null;D=null;o.reset();s.reset();u.reset()}return{buffers:{color:o,depth:s,stencil:u},initAttributes:it,enableAttribute:at,enableAttributeAndDivisor:ot,disableUnusedAttributes:st,enable:ut,disable:ct,getCompressedTextureFormats:lt,useProgram:ht,setBlending:ft,setMaterial:pt,setFlipSided:dt,setCullFace:vt,setLineWidth:mt,setPolygonOffset:gt,setScissorTest:yt,activeTexture:xt,bindTexture:_t,compressedTexImage2D:bt,texImage2D:wt,scissor:Mt,viewport:Et,reset:St}}function mo(t,e,r){var n;function i(){if(void 0!==n)return n;var r=e.get("EXT_texture_filter_anisotropic");if(null!==r)n=t.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT);else n=0;return n}function a(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}if("mediump"===e)if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0)return"mediump";return"lowp"}var o=void 0!==r.precision?r.precision:"highp";var s=a(o);if(s!==o){console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead.");o=s}var u=true===r.logarithmicDepthBuffer;var c=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);var l=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);var h=t.getParameter(t.MAX_TEXTURE_SIZE);var f=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE);var p=t.getParameter(t.MAX_VERTEX_ATTRIBS);var d=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS);var v=t.getParameter(t.MAX_VARYING_VECTORS);var m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS);var g=l>0;var y=!!e.get("OES_texture_float");var x=g&&y;return{getMaxAnisotropy:i,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:d,maxVaryings:v,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:x}}function go(t,e,r,n){ca.call(this);this.type="PerspectiveCamera";this.fov=void 0!==t?t:50;this.zoom=1;this.near=void 0!==r?r:.1;this.far=void 0!==n?n:2e3;this.focus=10;this.aspect=void 0!==e?e:1;this.view=null;this.filmGauge=35;this.filmOffset=0;this.updateProjectionMatrix()}go.prototype=Object.assign(Object.create(ca.prototype),{constructor:go,isPerspectiveCamera:true,copy:function(t,e){ca.prototype.copy.call(this,t,e);this.fov=t.fov;this.zoom=t.zoom;this.near=t.near;this.far=t.far;this.focus=t.focus;this.aspect=t.aspect;this.view=null===t.view?null:Object.assign({},t.view);this.filmGauge=t.filmGauge;this.filmOffset=t.filmOffset;return this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Fe.RAD2DEG*Math.atan(e);this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Fe.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Fe.RAD2DEG*Math.atan(Math.tan(.5*Fe.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,r,n,i,a){this.aspect=t/e;if(null===this.view)this.view={enabled:true,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1};this.view.enabled=true;this.view.fullWidth=t;this.view.fullHeight=e;this.view.offsetX=r;this.view.offsetY=n;this.view.width=i;this.view.height=a;this.updateProjectionMatrix()},clearViewOffset:function(){if(null!==this.view)this.view.enabled=false;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Fe.DEG2RAD*this.fov)/this.zoom,r=2*e,n=this.aspect*r,i=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*n/o;e-=a.offsetY*r/s;n*=a.width/o;r*=a.height/s}var u=this.filmOffset;if(0!==u)i+=t*u/this.getFilmWidth();this.projectionMatrix.makePerspective(i,i+n,e,e-r,t,this.far)},toJSON:function(t){var e=ua.prototype.toJSON.call(this,t);e.object.fov=this.fov;e.object.zoom=this.zoom;e.object.near=this.near;e.object.far=this.far;e.object.focus=this.focus;e.object.aspect=this.aspect;if(null!==this.view)e.object.view=Object.assign({},this.view);e.object.filmGauge=this.filmGauge;e.object.filmOffset=this.filmOffset;return e}});function yo(t){go.call(this);this.cameras=t||[]}yo.prototype=Object.assign(Object.create(go.prototype),{constructor:yo,isArrayCamera:true});function xo(t){var e=this;var r=null;var n=null;var i=null;var a=new He;var o=new He;if("undefined"!==typeof window&&"VRFrameData"in window)n=new window.VRFrameData;var s=new He;var u=new go;u.bounds=new qe(0,0,.5,1);u.layers.enable(1);var c=new go;c.bounds=new qe(.5,0,.5,1);c.layers.enable(2);var l=new yo([u,c]);l.layers.enable(1);l.layers.enable(2);var h,f;function p(){if(null!==r&&r.isPresenting){var n=r.getEyeParameters("left");var i=n.renderWidth;var a=n.renderHeight;f=t.getPixelRatio();h=t.getSize();t.setDrawingBufferSize(2*i,a,1)}else if(e.enabled)t.setDrawingBufferSize(h.width,h.height,f)}if("undefined"!==typeof window)window.addEventListener("vrdisplaypresentchange",p,false);this.enabled=false;this.userHeight=1.6;this.getDevice=function(){return r};this.setDevice=function(t){if(void 0!==t)r=t};this.setPoseTarget=function(t){if(void 0!==t)i=t};this.getCamera=function(t){if(null===r)return t;r.depthNear=t.near;r.depthFar=t.far;r.getFrameData(n);var h=n.pose;var f=null!==i?i:t;if(null!==h.position)f.position.fromArray(h.position);else f.position.set(0,0,0);if(null!==h.orientation)f.quaternion.fromArray(h.orientation);var p=r.stageParameters;if(p)a.fromArray(p.sittingToStandingTransform);else a.makeTranslation(0,e.userHeight,0);f.position.applyMatrix4(a);f.updateMatrixWorld();if(false===r.isPresenting)return t;u.near=t.near;c.near=t.near;u.far=t.far;c.far=t.far;l.matrixWorld.copy(t.matrixWorld);l.matrixWorldInverse.copy(t.matrixWorldInverse);u.matrixWorldInverse.fromArray(n.leftViewMatrix);c.matrixWorldInverse.fromArray(n.rightViewMatrix);o.getInverse(a);u.matrixWorldInverse.multiply(o);c.matrixWorldInverse.multiply(o);var d=f.parent;if(null!==d){s.getInverse(d.matrixWorld);u.matrixWorldInverse.multiply(s);c.matrixWorldInverse.multiply(s)}u.matrixWorld.getInverse(u.matrixWorldInverse);c.matrixWorld.getInverse(c.matrixWorldInverse);u.projectionMatrix.fromArray(n.leftProjectionMatrix);c.projectionMatrix.fromArray(n.rightProjectionMatrix);l.projectionMatrix.copy(u.projectionMatrix);var v=r.getLayers();if(v.length){var m=v[0];if(null!==m.leftBounds&&4===m.leftBounds.length)u.bounds.fromArray(m.leftBounds);if(null!==m.rightBounds&&4===m.rightBounds.length)c.bounds.fromArray(m.rightBounds)}return l};this.getStandingMatrix=function(){return a};this.submitFrame=function(){if(r&&r.isPresenting)r.submitFrame()};this.dispose=function(){if("undefined"!==typeof window)window.removeEventListener("vrdisplaypresentchange",p)}}function _o(t){var e={};return{get:function(r){if(void 0!==e[r])return e[r];var n;switch(r){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=t.getExtension("WEBGL_compressed_texture_etc1");break;default:n=t.getExtension(r)}if(null===n)console.warn("THREE.WebGLRenderer: "+r+" extension not supported.");e[r]=n;return n}}}function bo(){var t=this,e=null,r=0,n=false,i=false,a=new ea,o=new Ve,s={value:null,needsUpdate:false};this.uniform=s;this.numPlanes=0;this.numIntersection=0;this.init=function(t,i,a){var o=0!==t.length||i||0!==r||n;n=i;e=c(t,a,0);r=t.length;return o};this.beginShadows=function(){i=true;c(null)};this.endShadows=function(){i=false;u()};this.setState=function(t,a,o,l,h,f){if(!n||null===t||0===t.length||i&&!o)if(i)c(null);else u();else{var p=i?0:r,d=4*p,v=h.clippingState||null;s.value=v;v=c(t,l,d,f);for(var m=0;m!==d;++m)v[m]=e[m];h.clippingState=v;this.numIntersection=a?this.numPlanes:0;this.numPlanes+=p}};function u(){if(s.value!==e){s.value=e;s.needsUpdate=r>0}t.numPlanes=r;t.numIntersection=0}function c(e,r,n,i){var u=null!==e?e.length:0,c=null;if(0!==u){c=s.value;if(true!==i||null===c){var l=n+4*u,h=r.matrixWorldInverse;o.getNormalMatrix(h);if(null===c||c.length<l)c=new Float32Array(l);for(var f=0,p=n;f!==u;++f,p+=4){a.copy(e[f]).applyMatrix4(h,o);a.normal.toArray(c,p);c[p+3]=a.constant}}s.value=c;s.needsUpdate=true}t.numPlanes=u;return c}}function wo(t,e){function r(r){var n;if(r===xt)return t.REPEAT;if(r===_t)return t.CLAMP_TO_EDGE;if(r===bt)return t.MIRRORED_REPEAT;if(r===wt)return t.NEAREST;if(r===Mt)return t.NEAREST_MIPMAP_NEAREST;if(r===Et)return t.NEAREST_MIPMAP_LINEAR;if(r===St)return t.LINEAR;if(r===Tt)return t.LINEAR_MIPMAP_NEAREST;if(r===At)return t.LINEAR_MIPMAP_LINEAR;if(r===Rt)return t.UNSIGNED_BYTE;if(r===Dt)return t.UNSIGNED_SHORT_4_4_4_4;if(r===zt)return t.UNSIGNED_SHORT_5_5_5_1;if(r===Bt)return t.UNSIGNED_SHORT_5_6_5;if(r===Lt)return t.BYTE;if(r===Ct)return t.SHORT;if(r===Pt)return t.UNSIGNED_SHORT;if(r===It)return t.INT;if(r===Ot)return t.UNSIGNED_INT;if(r===Nt)return t.FLOAT;if(r===Ut){n=e.get("OES_texture_half_float");if(null!==n)return n.HALF_FLOAT_OES}if(r===kt)return t.ALPHA;if(r===Ht)return t.RGB;if(r===jt)return t.RGBA;if(r===Gt)return t.LUMINANCE;if(r===Vt)return t.LUMINANCE_ALPHA;if(r===Xt)return t.DEPTH_COMPONENT;if(r===qt)return t.DEPTH_STENCIL;if(r===O)return t.FUNC_ADD;if(r===N)return t.FUNC_SUBTRACT;if(r===U)return t.FUNC_REVERSE_SUBTRACT;if(r===B)return t.ZERO;if(r===F)return t.ONE;if(r===k)return t.SRC_COLOR;if(r===H)return t.ONE_MINUS_SRC_COLOR;if(r===j)return t.SRC_ALPHA;if(r===G)return t.ONE_MINUS_SRC_ALPHA;if(r===V)return t.DST_ALPHA;if(r===W)return t.ONE_MINUS_DST_ALPHA;if(r===X)return t.DST_COLOR;if(r===q)return t.ONE_MINUS_DST_COLOR;if(r===Y)return t.SRC_ALPHA_SATURATE;if(r===Yt||r===Zt||r===Jt||r===Qt){n=e.get("WEBGL_compressed_texture_s3tc");if(null!==n){if(r===Yt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Zt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Jt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Qt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(r===Kt||r===$t||r===te||r===ee){n=e.get("WEBGL_compressed_texture_pvrtc");if(null!==n){if(r===Kt)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===$t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===te)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===ee)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}}if(r===re){n=e.get("WEBGL_compressed_texture_etc1");if(null!==n)return n.COMPRESSED_RGB_ETC1_WEBGL}if(r===ne||r===ie||r===ae||r===oe||r===se||r===ue||r===ce||r===le||r===he||r===fe||r===pe||r===de||r===ve||r===me){n=e.get("WEBGL_compressed_texture_astc");if(null!==n)return r}if(r===D||r===z){n=e.get("EXT_blend_minmax");if(null!==n){if(r===D)return n.MIN_EXT;if(r===z)return n.MAX_EXT}}if(r===Ft){n=e.get("WEBGL_depth_texture");if(null!==n)return n.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:r}}function Mo(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var r;switch(e.type){case"DirectionalLight":r={direction:new Ge,color:new kr,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"SpotLight":r={position:new Ge,direction:new Ge,color:new kr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new ke};break;case"PointLight":r={position:new Ge,color:new kr,distance:0,decay:0,shadow:false,shadowBias:0,shadowRadius:1,shadowMapSize:new ke,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new Ge,skyColor:new kr,groundColor:new kr};break;case"RectAreaLight":r={color:new kr,position:new Ge,halfWidth:new Ge,halfHeight:new Ge};break}t[e.id]=r;return r}}}var Eo=0;function So(){var t=new Mo;var e={id:Eo++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};var r=new Ge;var n=new He;var i=new He;function a(a,o,s){var u=0,c=0,l=0;var h=0;var f=0;var p=0;var d=0;var v=0;var m=s.matrixWorldInverse;for(var g=0,y=a.length;g<y;g++){var x=a[g];var _=x.color;var b=x.intensity;var w=x.distance;var M=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight){u+=_.r*b;c+=_.g*b;l+=_.b*b}else if(x.isDirectionalLight){var E=t.get(x);E.color.copy(x.color).multiplyScalar(x.intensity);E.direction.setFromMatrixPosition(x.matrixWorld);r.setFromMatrixPosition(x.target.matrixWorld);E.direction.sub(r);E.direction.transformDirection(m);E.shadow=x.castShadow;if(x.castShadow){var S=x.shadow;E.shadowBias=S.bias;E.shadowRadius=S.radius;E.shadowMapSize=S.mapSize}e.directionalShadowMap[h]=M;e.directionalShadowMatrix[h]=x.shadow.matrix;e.directional[h]=E;h++}else if(x.isSpotLight){var E=t.get(x);E.position.setFromMatrixPosition(x.matrixWorld);E.position.applyMatrix4(m);E.color.copy(_).multiplyScalar(b);E.distance=w;E.direction.setFromMatrixPosition(x.matrixWorld);r.setFromMatrixPosition(x.target.matrixWorld);E.direction.sub(r);E.direction.transformDirection(m);E.coneCos=Math.cos(x.angle);E.penumbraCos=Math.cos(x.angle*(1-x.penumbra));E.decay=0===x.distance?0:x.decay;E.shadow=x.castShadow;if(x.castShadow){var S=x.shadow;E.shadowBias=S.bias;E.shadowRadius=S.radius;E.shadowMapSize=S.mapSize}e.spotShadowMap[p]=M;e.spotShadowMatrix[p]=x.shadow.matrix;e.spot[p]=E;p++}else if(x.isRectAreaLight){var E=t.get(x);E.color.copy(_).multiplyScalar(b);E.position.setFromMatrixPosition(x.matrixWorld);E.position.applyMatrix4(m);i.identity();n.copy(x.matrixWorld);n.premultiply(m);i.extractRotation(n);E.halfWidth.set(.5*x.width,0,0);E.halfHeight.set(0,.5*x.height,0);E.halfWidth.applyMatrix4(i);E.halfHeight.applyMatrix4(i);e.rectArea[d]=E;d++}else if(x.isPointLight){var E=t.get(x);E.position.setFromMatrixPosition(x.matrixWorld);E.position.applyMatrix4(m);E.color.copy(x.color).multiplyScalar(x.intensity);E.distance=x.distance;E.decay=0===x.distance?0:x.decay;E.shadow=x.castShadow;if(x.castShadow){var S=x.shadow;E.shadowBias=S.bias;E.shadowRadius=S.radius;E.shadowMapSize=S.mapSize;E.shadowCameraNear=S.camera.near;E.shadowCameraFar=S.camera.far}e.pointShadowMap[f]=M;e.pointShadowMatrix[f]=x.shadow.matrix;e.point[f]=E;f++}else if(x.isHemisphereLight){var E=t.get(x);E.direction.setFromMatrixPosition(x.matrixWorld);E.direction.transformDirection(m);E.direction.normalize();E.skyColor.copy(x.color).multiplyScalar(b);E.groundColor.copy(x.groundColor).multiplyScalar(b);e.hemi[v]=E;v++}}e.ambient[0]=u;e.ambient[1]=c;e.ambient[2]=l;e.directional.length=h;e.spot.length=p;e.rectArea.length=d;e.point.length=f;e.hemi.length=v;e.hash=e.id+","+h+","+f+","+p+","+d+","+v+","+o.length}return{setup:a,state:e}}function To(){var t=new So;var e=[];var r=[];var n=[];function i(){e.length=0;r.length=0;n.length=0}function a(t){e.push(t)}function o(t){r.push(t)}function s(t){n.push(t)}function u(n){t.setup(e,r,n)}var c={lightsArray:e,shadowsArray:r,spritesArray:n,lights:t};return{init:i,state:c,setupLights:u,pushLight:a,pushShadow:o,pushSprite:s}}function Ao(){var t={};function e(e,r){var n=e.id+","+r.id;var i=t[n];if(void 0===i){i=new To;t[n]=i}return i}function r(){t={}}return{get:e,dispose:r}}function Ro(t){console.log("THREE.WebGLRenderer",u);t=t||{};var e=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==t.context?t.context:null,n=void 0!==t.alpha?t.alpha:false,i=void 0!==t.depth?t.depth:true,a=void 0!==t.stencil?t.stencil:true,o=void 0!==t.antialias?t.antialias:false,s=void 0!==t.premultipliedAlpha?t.premultipliedAlpha:true,c=void 0!==t.preserveDrawingBuffer?t.preserveDrawingBuffer:false,l=void 0!==t.powerPreference?t.powerPreference:"default";var h=null;var f=null;this.domElement=e;this.context=null;this.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;this.sortObjects=true;this.clippingPlanes=[];this.localClippingEnabled=false;this.gammaFactor=2;this.gammaInput=false;this.gammaOutput=false;this.physicallyCorrectLights=false;this.toneMapping=st;this.toneMappingExposure=1;this.toneMappingWhitePoint=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var p=this,d=false,v=null,m=null,g=-1,y="",x=null,_=null,b=new qe,w=new qe,M=null,S=0,T=e.width,A=e.height,R=1,L=new qe(0,0,T,A),C=new qe(0,0,T,A),P=false,I=new ra,O=new bo,N=false,U=false,D=new He,z=new Ge,B={geometries:0,textures:0},F={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:F,memory:B,programs:null,autoReset:true,reset:k};function k(){F.frame++;F.calls=0;F.vertices=0;F.faces=0;F.points=0}function H(){return null===v?R:1}var j;try{var G={alpha:n,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l};e.addEventListener("webglcontextlost",ht,false);e.addEventListener("webglcontextrestored",ft,false);j=r||e.getContext("webgl",G)||e.getContext("experimental-webgl",G);if(null===j)if(null!==e.getContext("webgl"))throw new Error("Error creating WebGL context with your selected attributes.");else throw new Error("Error creating WebGL context.");if(void 0===j.getShaderPrecisionFormat)j.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}catch(t){console.error("THREE.WebGLRenderer: "+t.message)}var V,W,X;var q,Y,Z,J,Q;var K,$,tt;var et,rt,nt,it;var at;var ot;function ut(){V=new _o(j);V.get("WEBGL_depth_texture");V.get("OES_texture_float");V.get("OES_texture_float_linear");V.get("OES_texture_half_float");V.get("OES_texture_half_float_linear");V.get("OES_standard_derivatives");V.get("OES_element_index_uint");V.get("ANGLE_instanced_arrays");ot=new wo(j,V);W=new mo(j,V,t);X=new vo(j,V,ot);X.scissor(w.copy(C).multiplyScalar(R));X.viewport(b.copy(L).multiplyScalar(R));q=new po;Y=new fo(j,V,X,q,W,ot,B,F);Z=new ia(j);J=new qa(j,Z,B);Q=new Ya(J,F);rt=new Va(j);K=new ho(p,V,W);$=new ja;tt=new Ao;et=new Ba(p,X,J,s);nt=new Xa(j,V,F);it=new Wa(j,V,F);at=new Yi(p,j,X,Y,W);p.info.programs=K.programs;p.context=j;p.capabilities=W;p.extensions=V;p.properties=q;p.renderLists=$;p.state=X}ut();var ct=new xo(p);this.vr=ct;var lt=new na(p,Q,W.maxTextureSize);this.shadowMap=lt;this.getContext=function(){return j};this.getContextAttributes=function(){return j.getContextAttributes()};this.forceContextLoss=function(){var t=V.get("WEBGL_lose_context");if(t)t.loseContext()};this.forceContextRestore=function(){var t=V.get("WEBGL_lose_context");if(t)t.restoreContext()};this.getPixelRatio=function(){return R};this.setPixelRatio=function(t){if(void 0===t)return;R=t;this.setSize(T,A,false)};this.getSize=function(){return{width:T,height:A}};this.setSize=function(t,r,n){var i=ct.getDevice();if(i&&i.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}T=t;A=r;e.width=t*R;e.height=r*R;if(false!==n){e.style.width=t+"px";e.style.height=r+"px"}this.setViewport(0,0,t,r)};this.getDrawingBufferSize=function(){return{width:T*R,height:A*R}};this.setDrawingBufferSize=function(t,r,n){T=t;A=r;R=n;e.width=t*n;e.height=r*n;this.setViewport(0,0,t,r)};this.getCurrentViewport=function(){return b};this.setViewport=function(t,e,r,n){L.set(t,A-e-n,r,n);X.viewport(b.copy(L).multiplyScalar(R))};this.setScissor=function(t,e,r,n){C.set(t,A-e-n,r,n);X.scissor(w.copy(C).multiplyScalar(R))};this.setScissorTest=function(t){X.setScissorTest(P=t)};this.getClearColor=function(){return et.getClearColor()};this.setClearColor=function(){et.setClearColor.apply(et,arguments)};this.getClearAlpha=function(){return et.getClearAlpha()};this.setClearAlpha=function(){et.setClearAlpha.apply(et,arguments)};this.clear=function(t,e,r){var n=0;if(void 0===t||t)n|=j.COLOR_BUFFER_BIT;if(void 0===e||e)n|=j.DEPTH_BUFFER_BIT;if(void 0===r||r)n|=j.STENCIL_BUFFER_BIT;j.clear(n)};this.clearColor=function(){this.clear(true,false,false)};this.clearDepth=function(){this.clear(false,true,false)};this.clearStencil=function(){this.clear(false,false,true)};this.clearTarget=function(t,e,r,n){this.setRenderTarget(t);this.clear(e,r,n)};this.dispose=function(){e.removeEventListener("webglcontextlost",ht,false);e.removeEventListener("webglcontextrestored",ft,false);$.dispose();tt.dispose();q.dispose();Q.dispose();ct.dispose();bt()};function ht(t){t.preventDefault();console.log("THREE.WebGLRenderer: Context Lost.");d=true}function ft(){console.log("THREE.WebGLRenderer: Context Restored.");d=false;ut()}function pt(t){var e=t.target;e.removeEventListener("dispose",pt);dt(e)}function dt(t){vt(t);q.remove(t)}function vt(t){var e=q.get(t).program;t.program=void 0;if(void 0!==e)K.releaseProgram(e)}function mt(t,e,r){t.render(function(t){p.renderBufferImmediate(t,e,r)})}this.renderBufferImmediate=function(t,e,r){X.initAttributes();var n=q.get(t);if(t.hasPositions&&!n.position)n.position=j.createBuffer();if(t.hasNormals&&!n.normal)n.normal=j.createBuffer();if(t.hasUvs&&!n.uv)n.uv=j.createBuffer();if(t.hasColors&&!n.color)n.color=j.createBuffer();var i=e.getAttributes();if(t.hasPositions){j.bindBuffer(j.ARRAY_BUFFER,n.position);j.bufferData(j.ARRAY_BUFFER,t.positionArray,j.DYNAMIC_DRAW);X.enableAttribute(i.position);j.vertexAttribPointer(i.position,3,j.FLOAT,false,0,0)}if(t.hasNormals){j.bindBuffer(j.ARRAY_BUFFER,n.normal);if(!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&!r.isMeshNormalMaterial&&true===r.flatShading)for(var a=0,o=3*t.count;a<o;a+=9){var s=t.normalArray;var u=(s[a+0]+s[a+3]+s[a+6])/3;var c=(s[a+1]+s[a+4]+s[a+7])/3;var l=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=u;s[a+1]=c;s[a+2]=l;s[a+3]=u;s[a+4]=c;s[a+5]=l;s[a+6]=u;s[a+7]=c;s[a+8]=l}j.bufferData(j.ARRAY_BUFFER,t.normalArray,j.DYNAMIC_DRAW);X.enableAttribute(i.normal);j.vertexAttribPointer(i.normal,3,j.FLOAT,false,0,0)}if(t.hasUvs&&r.map){j.bindBuffer(j.ARRAY_BUFFER,n.uv);j.bufferData(j.ARRAY_BUFFER,t.uvArray,j.DYNAMIC_DRAW);X.enableAttribute(i.uv);j.vertexAttribPointer(i.uv,2,j.FLOAT,false,0,0)}if(t.hasColors&&r.vertexColors!==E){j.bindBuffer(j.ARRAY_BUFFER,n.color);j.bufferData(j.ARRAY_BUFFER,t.colorArray,j.DYNAMIC_DRAW);X.enableAttribute(i.color);j.vertexAttribPointer(i.color,3,j.FLOAT,false,0,0)}X.disableUnusedAttributes();j.drawArrays(j.TRIANGLES,0,t.count);t.count=0};this.renderBufferDirect=function(t,e,r,n,i,a){var o=i.isMesh&&i.matrixWorld.determinant()<0;X.setMaterial(n,o);var s=Lt(t,e,n,i);var u=r.id+"_"+s.id+"_"+(true===n.wireframe);var c=false;if(u!==y){y=u;c=true}if(i.morphTargetInfluences){rt.update(i,r,n,s);c=true}var l=r.index;var h=r.attributes.position;var f=1;if(true===n.wireframe){l=J.getWireframeAttribute(r);f=2}var p;var d=nt;if(null!==l){p=Z.get(l);d=it;d.setIndex(p)}if(c){gt(n,s,r);if(null!==l)j.bindBuffer(j.ELEMENT_ARRAY_BUFFER,p.buffer)}var v=Infinity;if(null!==l)v=l.count;else if(void 0!==h)v=h.count;var m=r.drawRange.start*f;var g=r.drawRange.count*f;var x=null!==a?a.start*f:0;var _=null!==a?a.count*f:Infinity;var b=Math.max(m,x);var w=Math.min(v,m+g,x+_)-1;var M=Math.max(0,w-b+1);if(0===M)return;if(i.isMesh)if(true===n.wireframe){X.setLineWidth(n.wireframeLinewidth*H());d.setMode(j.LINES)}else switch(i.drawMode){case Te:d.setMode(j.TRIANGLES);break;case Ae:d.setMode(j.TRIANGLE_STRIP);break;case Re:d.setMode(j.TRIANGLE_FAN);break}else if(i.isLine){var E=n.linewidth;if(void 0===E)E=1;X.setLineWidth(E*H());if(i.isLineSegments)d.setMode(j.LINES);else if(i.isLineLoop)d.setMode(j.LINE_LOOP);else d.setMode(j.LINE_STRIP)}else if(i.isPoints)d.setMode(j.POINTS);if(r&&r.isInstancedBufferGeometry){if(r.maxInstancedCount>0)d.renderInstances(r,b,M)}else d.render(b,M)};function gt(t,e,r,n){if(r&&r.isInstancedBufferGeometry)if(null===V.get("ANGLE_instanced_arrays")){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}if(void 0===n)n=0;X.initAttributes();var i=r.attributes;var a=e.getAttributes();var o=t.defaultAttributeValues;for(var s in a){var u=a[s];if(u>=0){var c=i[s];if(void 0!==c){var l=c.normalized;var h=c.itemSize;var f=Z.get(c);if(void 0===f)continue;var p=f.buffer;var d=f.type;var v=f.bytesPerElement;if(c.isInterleavedBufferAttribute){var m=c.data;var g=m.stride;var y=c.offset;if(m&&m.isInstancedInterleavedBuffer){X.enableAttributeAndDivisor(u,m.meshPerAttribute);if(void 0===r.maxInstancedCount)r.maxInstancedCount=m.meshPerAttribute*m.count}else X.enableAttribute(u);j.bindBuffer(j.ARRAY_BUFFER,p);j.vertexAttribPointer(u,h,d,l,g*v,(n*g+y)*v)}else{if(c.isInstancedBufferAttribute){X.enableAttributeAndDivisor(u,c.meshPerAttribute);if(void 0===r.maxInstancedCount)r.maxInstancedCount=c.meshPerAttribute*c.count}else X.enableAttribute(u);j.bindBuffer(j.ARRAY_BUFFER,p);j.vertexAttribPointer(u,h,d,l,0,n*h*v)}}else if(void 0!==o){var x=o[s];if(void 0!==x)switch(x.length){case 2:j.vertexAttrib2fv(u,x);break;case 3:j.vertexAttrib3fv(u,x);break;case 4:j.vertexAttrib4fv(u,x);break;default:j.vertexAttrib1fv(u,x)}}}}X.disableUnusedAttributes()}this.compile=function(t,e){f=tt.get(t,e);f.init();t.traverse(function(t){if(t.isLight){f.pushLight(t);if(t.castShadow)f.pushShadow(t)}});f.setupLights(e);t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var r=0;r<e.material.length;r++)At(e.material[r],t.fog,e);else At(e.material,t.fog,e)})};var yt=false;var xt=null;function _t(){if(yt)return;wt();yt=true}function bt(){yt=false}function wt(){var t=ct.getDevice();if(t&&t.isPresenting)t.requestAnimationFrame(Mt);else window.requestAnimationFrame(Mt)}function Mt(t){if(false===yt)return;xt(t);wt()}this.animate=function(t){xt=t;null!==xt?_t():bt()};this.render=function(t,e,r,n){if(!(e&&e.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(d)return;y="";g=-1;x=null;if(true===t.autoUpdate)t.updateMatrixWorld();if(null===e.parent)e.updateMatrixWorld();if(ct.enabled)e=ct.getCamera(e);f=tt.get(t,e);f.init();t.onBeforeRender(p,t,e,r);D.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse);I.setFromMatrix(D);U=this.localClippingEnabled;N=O.init(this.clippingPlanes,U,e);h=$.get(t,e);h.init();Et(t,e,p.sortObjects);if(true===p.sortObjects)h.sort();if(N)O.beginShadows();var i=f.state.shadowsArray;lt.render(i,t,e);f.setupLights(e);if(N)O.endShadows();if(this.info.autoReset)this.info.reset();if(void 0===r)r=null;this.setRenderTarget(r);et.render(h,t,e,n);var a=h.opaque;var o=h.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;if(a.length)St(a,t,e,s);if(o.length)St(o,t,e,s)}else{if(a.length)St(a,t,e);if(o.length)St(o,t,e)}var u=f.state.spritesArray;at.render(u,t,e);if(r)Y.updateRenderTargetMipmap(r);X.buffers.depth.setTest(true);X.buffers.depth.setMask(true);X.buffers.color.setMask(true);X.setPolygonOffset(false);t.onAfterRender(p,t,e);if(ct.enabled)ct.submitFrame();h=null;f=null};function Et(t,e,r){if(false===t.visible)return;var n=t.layers.test(e.layers);if(n)if(t.isLight){f.pushLight(t);if(t.castShadow)f.pushShadow(t)}else if(t.isSprite){if(!t.frustumCulled||I.intersectsSprite(t))f.pushSprite(t)}else if(t.isImmediateRenderObject){if(r)z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(D);h.push(t,null,t.material,z.z,null)}else if(t.isMesh||t.isLine||t.isPoints){if(t.isSkinnedMesh)t.skeleton.update();if(!t.frustumCulled||I.intersectsObject(t)){if(r)z.setFromMatrixPosition(t.matrixWorld).applyMatrix4(D);var i=Q.update(t);var a=t.material;if(Array.isArray(a)){var o=i.groups;for(var s=0,u=o.length;s<u;s++){var c=o[s];var l=a[c.materialIndex];if(l&&l.visible)h.push(t,i,l,z.z,c)}}else if(a.visible)h.push(t,i,a,z.z,null)}}var p=t.children;for(var s=0,u=p.length;s<u;s++)Et(p[s],e,r)}function St(t,e,r,n){for(var i=0,a=t.length;i<a;i++){var o=t[i];var s=o.object;var u=o.geometry;var c=void 0===n?o.material:n;var l=o.group;if(r.isArrayCamera){_=r;var h=r.cameras;for(var f=0,p=h.length;f<p;f++){var d=h[f];if(s.layers.test(d.layers)){var v=d.bounds;var m=v.x*T;var g=v.y*A;var y=v.z*T;var x=v.w*A;X.viewport(b.set(m,g,y,x).multiplyScalar(R));Tt(s,e,d,u,c,l)}}}else{_=null;Tt(s,e,r,u,c,l)}}}function Tt(t,e,r,n,i,a){t.onBeforeRender(p,e,r,n,i,a);f=tt.get(e,_||r);t.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,t.matrixWorld);t.normalMatrix.getNormalMatrix(t.modelViewMatrix);if(t.isImmediateRenderObject){var o=t.isMesh&&t.matrixWorld.determinant()<0;X.setMaterial(i,o);var s=Lt(r,e.fog,i,t);y="";mt(t,s,i)}else p.renderBufferDirect(r,e.fog,n,i,t,a);t.onAfterRender(p,e,r,n,i,a);f=tt.get(e,_||r)}function At(t,e,r){var n=q.get(t);var i=f.state.lights;var a=f.state.shadowsArray;var o=K.getParameters(t,i.state,a,e,O.numPlanes,O.numIntersection,r);var s=K.getProgramCode(t,o);var u=n.program;var c=true;if(void 0===u)t.addEventListener("dispose",pt);else if(u.code!==s)vt(t);else if(n.lightsHash!==i.state.hash){q.update(t,"lightsHash",i.state.hash);c=false}else if(void 0!==o.shaderID)return;else c=false;if(c){if(o.shaderID){var l=Xi[o.shaderID];n.shader={name:t.type,uniforms:jr.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else n.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(n.shader);u=K.acquireProgram(t,n.shader,o,s);n.program=u;t.program=u}var h=u.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var d=0;d<p.maxMorphTargets;d++)if(h["morphTarget"+d]>=0)t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var d=0;d<p.maxMorphNormals;d++)if(h["morphNormal"+d]>=0)t.numSupportedMorphNormals++}var v=n.shader.uniforms;if(!t.isShaderMaterial&&!t.isRawShaderMaterial||true===t.clipping){n.numClippingPlanes=O.numPlanes;n.numIntersection=O.numIntersection;v.clippingPlanes=O.uniform}n.fog=e;n.lightsHash=i.state.hash;if(t.lights){v.ambientLightColor.value=i.state.ambient;v.directionalLights.value=i.state.directional;v.spotLights.value=i.state.spot;v.rectAreaLights.value=i.state.rectArea;v.pointLights.value=i.state.point;v.hemisphereLights.value=i.state.hemi;v.directionalShadowMap.value=i.state.directionalShadowMap;v.directionalShadowMatrix.value=i.state.directionalShadowMatrix;v.spotShadowMap.value=i.state.spotShadowMap;v.spotShadowMatrix.value=i.state.spotShadowMatrix;v.pointShadowMap.value=i.state.pointShadowMap;v.pointShadowMatrix.value=i.state.pointShadowMatrix}var m=n.program.getUniforms(),g=Br.seqWithValue(m.seq,v);n.uniformsList=g}function Lt(t,e,r,n){S=0;var i=q.get(r);var a=f.state.lights;if(N)if(U||t!==x){var o=t===x&&r.id===g;O.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,t,i,o)}if(false===r.needsUpdate)if(void 0===i.program)r.needsUpdate=true;else if(r.fog&&i.fog!==e)r.needsUpdate=true;else if(r.lights&&i.lightsHash!==a.state.hash)r.needsUpdate=true;else if(void 0!==i.numClippingPlanes&&(i.numClippingPlanes!==O.numPlanes||i.numIntersection!==O.numIntersection))r.needsUpdate=true;if(r.needsUpdate){At(r,e,n);r.needsUpdate=false}var s=false;var u=false;var c=false;var l=i.program,h=l.getUniforms(),d=i.shader.uniforms;if(X.useProgram(l.program)){s=true;u=true;c=true}if(r.id!==g){g=r.id;u=true}if(s||t!==x){h.setValue(j,"projectionMatrix",t.projectionMatrix);if(W.logarithmicDepthBuffer)h.setValue(j,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2));if(x!==(_||t)){x=_||t;u=true;c=true}if(r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var v=h.map.cameraPosition;if(void 0!==v)v.setValue(j,z.setFromMatrixPosition(t.matrixWorld))}if(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)h.setValue(j,"viewMatrix",t.matrixWorldInverse)}if(r.skinning){h.setOptional(j,n,"bindMatrix");h.setOptional(j,n,"bindMatrixInverse");var m=n.skeleton;if(m){var y=m.bones;if(W.floatVertexTextures){if(void 0===m.boneTexture){var b=Math.sqrt(4*y.length);b=Fe.ceilPowerOfTwo(b);b=Math.max(b,4);var w=new Float32Array(b*b*4);w.set(m.boneMatrices);var M=new Je(w,b,b,jt,Nt);M.needsUpdate=true;m.boneMatrices=w;m.boneTexture=M;m.boneTextureSize=b}h.setValue(j,"boneTexture",m.boneTexture);h.setValue(j,"boneTextureSize",m.boneTextureSize)}else h.setOptional(j,m,"boneMatrices")}}if(u){h.setValue(j,"toneMappingExposure",p.toneMappingExposure);h.setValue(j,"toneMappingWhitePoint",p.toneMappingWhitePoint);if(r.lights)Xt(d,c);if(e&&r.fog)Dt(d,e);if(r.isMeshBasicMaterial)Ct(d,r);else if(r.isMeshLambertMaterial){Ct(d,r);zt(d,r)}else if(r.isMeshPhongMaterial){Ct(d,r);if(r.isMeshToonMaterial)Ft(d,r);else Bt(d,r)}else if(r.isMeshStandardMaterial){Ct(d,r);if(r.isMeshPhysicalMaterial)Ht(d,r);else kt(d,r)}else if(r.isMeshDepthMaterial){Ct(d,r);Gt(d,r)}else if(r.isMeshDistanceMaterial){Ct(d,r);Vt(d,r)}else if(r.isMeshNormalMaterial){Ct(d,r);Wt(d,r)}else if(r.isLineBasicMaterial){Pt(d,r);if(r.isLineDashedMaterial)It(d,r)}else if(r.isPointsMaterial)Ot(d,r);else if(r.isShadowMaterial){d.color.value=r.color;d.opacity.value=r.opacity}if(void 0!==d.ltc_1)d.ltc_1.value=Hr.LTC_1;if(void 0!==d.ltc_2)d.ltc_2.value=Hr.LTC_2;Br.upload(j,i.uniformsList,d,p)}if(r.isShaderMaterial&&true===r.uniformsNeedUpdate){Br.upload(j,i.uniformsList,d,p);r.uniformsNeedUpdate=false}h.setValue(j,"modelViewMatrix",n.modelViewMatrix);h.setValue(j,"normalMatrix",n.normalMatrix);h.setValue(j,"modelMatrix",n.matrixWorld);return l}function Ct(t,e){t.opacity.value=e.opacity;if(e.color)t.diffuse.value=e.color;if(e.emissive)t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity);if(e.map)t.map.value=e.map;if(e.alphaMap)t.alphaMap.value=e.alphaMap;if(e.specularMap)t.specularMap.value=e.specularMap;if(e.envMap){t.envMap.value=e.envMap;t.flipEnvMap.value=!(e.envMap&&e.envMap.isCubeTexture)?1:-1;t.reflectivity.value=e.reflectivity;t.refractionRatio.value=e.refractionRatio}if(e.lightMap){t.lightMap.value=e.lightMap;t.lightMapIntensity.value=e.lightMapIntensity}if(e.aoMap){t.aoMap.value=e.aoMap;t.aoMapIntensity.value=e.aoMapIntensity}var r;if(e.map)r=e.map;else if(e.specularMap)r=e.specularMap;else if(e.displacementMap)r=e.displacementMap;else if(e.normalMap)r=e.normalMap;else if(e.bumpMap)r=e.bumpMap;else if(e.roughnessMap)r=e.roughnessMap;else if(e.metalnessMap)r=e.metalnessMap;else if(e.alphaMap)r=e.alphaMap;else if(e.emissiveMap)r=e.emissiveMap;if(void 0!==r){if(r.isWebGLRenderTarget)r=r.texture;if(true===r.matrixAutoUpdate){var n=r.offset;var i=r.repeat;var a=r.rotation;var o=r.center;r.matrix.setUvTransform(n.x,n.y,i.x,i.y,a,o.x,o.y)}t.uvTransform.value.copy(r.matrix)}}function Pt(t,e){t.diffuse.value=e.color;t.opacity.value=e.opacity}function It(t,e){t.dashSize.value=e.dashSize;t.totalSize.value=e.dashSize+e.gapSize;t.scale.value=e.scale}function Ot(t,e){t.diffuse.value=e.color;t.opacity.value=e.opacity;t.size.value=e.size*R;t.scale.value=.5*A;t.map.value=e.map;if(null!==e.map){if(true===e.map.matrixAutoUpdate){var r=e.map.offset;var n=e.map.repeat;var i=e.map.rotation;var a=e.map.center;e.map.matrix.setUvTransform(r.x,r.y,n.x,n.y,i,a.x,a.y)}t.uvTransform.value.copy(e.map.matrix)}}function Dt(t,e){t.fogColor.value=e.color;if(e.isFog){t.fogNear.value=e.near;t.fogFar.value=e.far}else if(e.isFogExp2)t.fogDensity.value=e.density}function zt(t,e){if(e.emissiveMap)t.emissiveMap.value=e.emissiveMap}function Bt(t,e){t.specular.value=e.specular;t.shininess.value=Math.max(e.shininess,1e-4);if(e.emissiveMap)t.emissiveMap.value=e.emissiveMap;if(e.bumpMap){t.bumpMap.value=e.bumpMap;t.bumpScale.value=e.bumpScale}if(e.normalMap){t.normalMap.value=e.normalMap;t.normalScale.value.copy(e.normalScale)}if(e.displacementMap){t.displacementMap.value=e.displacementMap;t.displacementScale.value=e.displacementScale;t.displacementBias.value=e.displacementBias}}function Ft(t,e){Bt(t,e);if(e.gradientMap)t.gradientMap.value=e.gradientMap}function kt(t,e){t.roughness.value=e.roughness;t.metalness.value=e.metalness;if(e.roughnessMap)t.roughnessMap.value=e.roughnessMap;if(e.metalnessMap)t.metalnessMap.value=e.metalnessMap;if(e.emissiveMap)t.emissiveMap.value=e.emissiveMap;if(e.bumpMap){t.bumpMap.value=e.bumpMap;t.bumpScale.value=e.bumpScale}if(e.normalMap){t.normalMap.value=e.normalMap;t.normalScale.value.copy(e.normalScale)}if(e.displacementMap){t.displacementMap.value=e.displacementMap;t.displacementScale.value=e.displacementScale;t.displacementBias.value=e.displacementBias}if(e.envMap)t.envMapIntensity.value=e.envMapIntensity}function Ht(t,e){t.clearCoat.value=e.clearCoat;t.clearCoatRoughness.value=e.clearCoatRoughness;kt(t,e)}function Gt(t,e){if(e.displacementMap){t.displacementMap.value=e.displacementMap;t.displacementScale.value=e.displacementScale;t.displacementBias.value=e.displacementBias}}function Vt(t,e){if(e.displacementMap){t.displacementMap.value=e.displacementMap;t.displacementScale.value=e.displacementScale;t.displacementBias.value=e.displacementBias}t.referencePosition.value.copy(e.referencePosition);t.nearDistance.value=e.nearDistance;t.farDistance.value=e.farDistance}function Wt(t,e){if(e.bumpMap){t.bumpMap.value=e.bumpMap;t.bumpScale.value=e.bumpScale}if(e.normalMap){t.normalMap.value=e.normalMap;t.normalScale.value.copy(e.normalScale)}if(e.displacementMap){t.displacementMap.value=e.displacementMap;t.displacementScale.value=e.displacementScale;t.displacementBias.value=e.displacementBias}}function Xt(t,e){t.ambientLightColor.needsUpdate=e;t.directionalLights.needsUpdate=e;t.pointLights.needsUpdate=e;t.spotLights.needsUpdate=e;t.rectAreaLights.needsUpdate=e;t.hemisphereLights.needsUpdate=e}function qt(){var t=S;if(t>=W.maxTextures)console.warn("THREE.WebGLRenderer: Trying to use "+t+" texture units while this GPU supports only "+W.maxTextures);S+=1;return t}this.allocTextureUnit=qt;this.setTexture2D=function(){var t=false;return function e(r,n){if(r&&r.isWebGLRenderTarget){if(!t){console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.");t=true}r=r.texture}Y.setTexture2D(r,n)}}();this.setTexture=function(){var t=false;return function e(r,n){if(!t){console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.");t=true}Y.setTexture2D(r,n)}}();this.setTextureCube=function(){var t=false;return function e(r,n){if(r&&r.isWebGLRenderTargetCube){if(!t){console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.");t=true}r=r.texture}if(r&&r.isCubeTexture||Array.isArray(r.image)&&6===r.image.length)Y.setTextureCube(r,n);else Y.setTextureCubeDynamic(r,n)}}();this.getRenderTarget=function(){return v};this.setRenderTarget=function(t){v=t;if(t&&void 0===q.get(t).__webglFramebuffer)Y.setupRenderTarget(t);var e=null;var r=false;if(t){var n=q.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube){e=n[t.activeCubeFace];r=true}else e=n;b.copy(t.viewport);w.copy(t.scissor);M=t.scissorTest}else{b.copy(L).multiplyScalar(R);w.copy(C).multiplyScalar(R);M=P}if(m!==e){j.bindFramebuffer(j.FRAMEBUFFER,e);m=e}X.viewport(b);X.scissor(w);X.setScissorTest(M);if(r){var i=q.get(t.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel)}};this.readRenderTargetPixels=function(t,e,r,n,i,a){if(!(t&&t.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var o=q.get(t).__webglFramebuffer;if(o){var s=false;if(o!==m){j.bindFramebuffer(j.FRAMEBUFFER,o);s=true}try{var u=t.texture;var c=u.format;var l=u.type;if(c!==jt&&ot.convert(c)!==j.getParameter(j.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(l!==Rt&&ot.convert(l)!==j.getParameter(j.IMPLEMENTATION_COLOR_READ_TYPE)&&!(l===Nt&&(V.get("OES_texture_float")||V.get("WEBGL_color_buffer_float")))&&!(l===Ut&&V.get("EXT_color_buffer_half_float"))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}if(j.checkFramebufferStatus(j.FRAMEBUFFER)===j.FRAMEBUFFER_COMPLETE){if(e>=0&&e<=t.width-n&&r>=0&&r<=t.height-i)j.readPixels(e,r,n,i,ot.convert(c),ot.convert(l),a)}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{if(s)j.bindFramebuffer(j.FRAMEBUFFER,m)}}};this.copyFramebufferToTexture=function(t,e,r){var n=e.image.width;var i=e.image.height;var a=ot.convert(e.format);this.setTexture2D(e,0);j.copyTexImage2D(j.TEXTURE_2D,r||0,a,t.x,t.y,n,i,0)}}function Lo(t,e){this.name="";this.color=new kr(t);this.density=void 0!==e?e:25e-5}Lo.prototype.isFogExp2=true;Lo.prototype.clone=function(){return new Lo(this.color.getHex(),this.density)};Lo.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};function Co(t,e,r){this.name="";this.color=new kr(t);this.near=void 0!==e?e:1;this.far=void 0!==r?r:1e3}Co.prototype.isFog=true;Co.prototype.clone=function(){return new Co(this.color.getHex(),this.near,this.far)};Co.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};function Po(){ua.call(this);this.type="Scene";this.background=null;this.fog=null;this.overrideMaterial=null;this.autoUpdate=true}Po.prototype=Object.assign(Object.create(ua.prototype),{constructor:Po,copy:function(t,e){ua.prototype.copy.call(this,t,e);if(null!==t.background)this.background=t.background.clone();if(null!==t.fog)this.fog=t.fog.clone();if(null!==t.overrideMaterial)this.overrideMaterial=t.overrideMaterial.clone();this.autoUpdate=t.autoUpdate;this.matrixAutoUpdate=t.matrixAutoUpdate;return this},toJSON:function(t){var e=ua.prototype.toJSON.call(this,t);if(null!==this.background)e.object.background=this.background.toJSON(t);if(null!==this.fog)e.object.fog=this.fog.toJSON();return e}});function Io(t){Ji.call(this);this.type="SpriteMaterial";this.color=new kr(16777215);this.map=null;this.rotation=0;this.fog=false;this.lights=false;this.setValues(t)}Io.prototype=Object.create(Ji.prototype);Io.prototype.constructor=Io;Io.prototype.isSpriteMaterial=true;Io.prototype.copy=function(t){Ji.prototype.copy.call(this,t);this.color.copy(t.color);this.map=t.map;this.rotation=t.rotation;return this};function Oo(t){ua.call(this);this.type="Sprite";this.material=void 0!==t?t:new Io;this.center=new ke(.5,.5)}Oo.prototype=Object.assign(Object.create(ua.prototype),{constructor:Oo,isSprite:true,raycast:function(){var t=new Ge;var e=new Ge;var r=new Ge;return function n(i,a){e.setFromMatrixPosition(this.matrixWorld);i.ray.closestPointToPoint(e,t);r.setFromMatrixScale(this.matrixWorld);var o=r.x*r.y/4;if(e.distanceToSquared(t)>o)return;var s=i.ray.origin.distanceTo(t);if(s<i.near||s>i.far)return;a.push({distance:s,point:t.clone(),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){ua.prototype.copy.call(this,t);if(void 0!==t.center)this.center.copy(t.center);return this}});function No(){ua.call(this);this.type="LOD";Object.defineProperties(this,{levels:{enumerable:true,value:[]}})}No.prototype=Object.assign(Object.create(ua.prototype),{constructor:No,copy:function(t){ua.prototype.copy.call(this,t,false);var e=t.levels;for(var r=0,n=e.length;r<n;r++){var i=e[r];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){if(void 0===e)e=0;e=Math.abs(e);var r=this.levels;for(var n=0;n<r.length;n++)if(e<r[n].distance)break;r.splice(n,0,{distance:e,object:t});this.add(t)},getObjectForDistance:function(t){var e=this.levels;for(var r=1,n=e.length;r<n;r++)if(t<e[r].distance)break;return e[r-1].object},raycast:function(){var t=new Ge;return function e(r,n){t.setFromMatrixPosition(this.matrixWorld);var i=r.ray.origin.distanceTo(t);this.getObjectForDistance(i).raycast(r,n)}}(),update:function(){var t=new Ge;var e=new Ge;return function r(n){var i=this.levels;if(i.length>1){t.setFromMatrixPosition(n.matrixWorld);e.setFromMatrixPosition(this.matrixWorld);var a=t.distanceTo(e);i[0].object.visible=true;for(var o=1,s=i.length;o<s;o++)if(a>=i[o].distance){i[o-1].object.visible=false;i[o].object.visible=true}else break;for(;o<s;o++)i[o].object.visible=false}}}(),toJSON:function(t){var e=ua.prototype.toJSON.call(this,t);e.object.levels=[];var r=this.levels;for(var n=0,i=r.length;n<i;n++){var a=r[n];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}});function Uo(t,e){t=t||[];this.bones=t.slice(0);this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length.");this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new He)}}Object.assign(Uo.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var r=new He;if(this.bones[t])r.getInverse(this.bones[t].matrixWorld);this.boneInverses.push(r)}},pose:function(){var t,e,r;for(e=0,r=this.bones.length;e<r;e++){t=this.bones[e];if(t)t.matrixWorld.getInverse(this.boneInverses[e])}for(e=0,r=this.bones.length;e<r;e++){t=this.bones[e];if(t){if(t.parent&&t.parent.isBone){t.matrix.getInverse(t.parent.matrixWorld);t.matrix.multiply(t.matrixWorld)}else t.matrix.copy(t.matrixWorld);t.matrix.decompose(t.position,t.quaternion,t.scale)}}},update:function(){var t=new He;var e=new He;return function r(){var n=this.bones;var i=this.boneInverses;var a=this.boneMatrices;var o=this.boneTexture;for(var s=0,u=n.length;s<u;s++){var c=n[s]?n[s].matrixWorld:e;t.multiplyMatrices(c,i[s]);t.toArray(a,16*s)}if(void 0!==o)o.needsUpdate=true}}(),clone:function(){return new Uo(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,r=this.bones.length;e<r;e++){var n=this.bones[e];if(n.name===t)return n}return}});function Do(){ua.call(this);this.type="Bone"}Do.prototype=Object.assign(Object.create(ua.prototype),{constructor:Do,isBone:true});function zo(t,e){za.call(this,t,e);this.type="SkinnedMesh";this.bindMode="attached";this.bindMatrix=new He;this.bindMatrixInverse=new He;var r=this.initBones();var n=new Uo(r);this.bind(n,this.matrixWorld);this.normalizeSkinWeights()}zo.prototype=Object.assign(Object.create(za.prototype),{constructor:zo,isSkinnedMesh:true,initBones:function(){var t=[],e,r;var n,i;if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++){r=this.geometry.bones[n];e=new Do;t.push(e);e.name=r.name;e.position.fromArray(r.pos);e.quaternion.fromArray(r.rotq);if(void 0!==r.scl)e.scale.fromArray(r.scl)}for(n=0,i=this.geometry.bones.length;n<i;n++){r=this.geometry.bones[n];if(-1!==r.parent&&null!==r.parent&&void 0!==t[r.parent])t[r.parent].add(t[n]);else this.add(t[n])}}this.updateMatrixWorld(true);return t},bind:function(t,e){this.skeleton=t;if(void 0===e){this.updateMatrixWorld(true);this.skeleton.calculateInverses();e=this.matrixWorld}this.bindMatrix.copy(e);this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var t,e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var r=this.geometry.skinWeights[e];t=1/r.manhattanLength();if(Infinity!==t)r.multiplyScalar(t);else r.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new qe;var i=this.geometry.attributes.skinWeight;for(e=0;e<i.count;e++){n.x=i.getX(e);n.y=i.getY(e);n.z=i.getZ(e);n.w=i.getW(e);t=1/n.manhattanLength();if(Infinity!==t)n.multiplyScalar(t);else n.set(1,0,0,0);i.setXYZW(e,n.x,n.y,n.z,n.w)}}},updateMatrixWorld:function(t){za.prototype.updateMatrixWorld.call(this,t);if("attached"===this.bindMode)this.bindMatrixInverse.getInverse(this.matrixWorld);else if("detached"===this.bindMode)this.bindMatrixInverse.getInverse(this.bindMatrix);else console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Bo(t){Ji.call(this);this.type="LineBasicMaterial";this.color=new kr(16777215);this.linewidth=1;this.linecap="round";this.linejoin="round";this.lights=false;this.setValues(t)}Bo.prototype=Object.create(Ji.prototype);Bo.prototype.constructor=Bo;Bo.prototype.isLineBasicMaterial=true;Bo.prototype.copy=function(t){Ji.prototype.copy.call(this,t);this.color.copy(t.color);this.linewidth=t.linewidth;this.linecap=t.linecap;this.linejoin=t.linejoin;return this};function Fo(t,e,r){if(1===r){console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.");return new ko(t,e)}ua.call(this);this.type="Line";this.geometry=void 0!==t?t:new Aa;this.material=void 0!==e?e:new Bo({color:16777215*Math.random()})}Fo.prototype=Object.assign(Object.create(ua.prototype),{constructor:Fo,isLine:true,computeLineDistances:function(){var t=new Ge;var e=new Ge;return function r(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){var i=n.attributes.position;var a=[0];for(var o=1,s=i.count;o<s;o++){t.fromBufferAttribute(i,o-1);e.fromBufferAttribute(i,o);a[o]=a[o-1];a[o]+=t.distanceTo(e)}n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(a,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var u=n.vertices;var a=n.lineDistances;a[0]=0;for(var o=1,s=u.length;o<s;o++){a[o]=a[o-1];a[o]+=u[o-1].distanceTo(u[o])}}return this}}(),raycast:function(){var t=new He;var e=new Na;var r=new ta;return function n(i,a){var o=i.linePrecision;var s=o*o;var u=this.geometry;var c=this.matrixWorld;if(null===u.boundingSphere)u.computeBoundingSphere();r.copy(u.boundingSphere);r.applyMatrix4(c);if(false===i.ray.intersectsSphere(r))return;t.getInverse(c);e.copy(i.ray).applyMatrix4(t);var l=new Ge;var h=new Ge;var f=new Ge;var p=new Ge;var d=this&&this.isLineSegments?2:1;if(u.isBufferGeometry){var v=u.index;var m=u.attributes;var g=m.position.array;if(null!==v){var y=v.array;for(var x=0,_=y.length-1;x<_;x+=d){var b=y[x];var w=y[x+1];l.fromArray(g,3*b);h.fromArray(g,3*w);var M=e.distanceSqToSegment(l,h,p,f);if(M>s)continue;p.applyMatrix4(this.matrixWorld);var E=i.ray.origin.distanceTo(p);if(E<i.near||E>i.far)continue;a.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else for(var x=0,_=g.length/3-1;x<_;x+=d){l.fromArray(g,3*x);h.fromArray(g,3*x+3);var M=e.distanceSqToSegment(l,h,p,f);if(M>s)continue;p.applyMatrix4(this.matrixWorld);var E=i.ray.origin.distanceTo(p);if(E<i.near||E>i.far)continue;a.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else if(u.isGeometry){var S=u.vertices;var T=S.length;for(var x=0;x<T-1;x+=d){var M=e.distanceSqToSegment(S[x],S[x+1],p,f);if(M>s)continue;p.applyMatrix4(this.matrixWorld);var E=i.ray.origin.distanceTo(p);if(E<i.near||E>i.far)continue;a.push({distance:E,point:f.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function ko(t,e){Fo.call(this,t,e);this.type="LineSegments"}ko.prototype=Object.assign(Object.create(Fo.prototype),{constructor:ko,isLineSegments:true,computeLineDistances:function(){var t=new Ge;var e=new Ge;return function r(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){var i=n.attributes.position;var a=[];for(var o=0,s=i.count;o<s;o+=2){t.fromBufferAttribute(i,o);e.fromBufferAttribute(i,o+1);a[o]=0===o?0:a[o-1];a[o+1]=a[o]+t.distanceTo(e)}n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(a,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var u=n.vertices;var a=n.lineDistances;for(var o=0,s=u.length;o<s;o+=2){t.copy(u[o]);e.copy(u[o+1]);a[o]=0===o?0:a[o-1];a[o+1]=a[o]+t.distanceTo(e)}}return this}}()});function Ho(t,e){Fo.call(this,t,e);this.type="LineLoop"}Ho.prototype=Object.assign(Object.create(Fo.prototype),{constructor:Ho,isLineLoop:true});function jo(t){Ji.call(this);this.type="PointsMaterial";this.color=new kr(16777215);this.map=null;this.size=1;this.sizeAttenuation=true;this.lights=false;this.setValues(t)}jo.prototype=Object.create(Ji.prototype);jo.prototype.constructor=jo;jo.prototype.isPointsMaterial=true;jo.prototype.copy=function(t){Ji.prototype.copy.call(this,t);this.color.copy(t.color);this.map=t.map;this.size=t.size;this.sizeAttenuation=t.sizeAttenuation;return this};function Go(t,e){ua.call(this);this.type="Points";this.geometry=void 0!==t?t:new Aa;this.material=void 0!==e?e:new jo({color:16777215*Math.random()})}Go.prototype=Object.assign(Object.create(ua.prototype),{constructor:Go,isPoints:true,raycast:function(){var t=new He;var e=new Na;var r=new ta;return function n(i,a){var o=this;var s=this.geometry;var u=this.matrixWorld;var c=i.params.Points.threshold;if(null===s.boundingSphere)s.computeBoundingSphere();r.copy(s.boundingSphere);r.applyMatrix4(u);r.radius+=c;if(false===i.ray.intersectsSphere(r))return;t.getInverse(u);e.copy(i.ray).applyMatrix4(t);var l=c/((this.scale.x+this.scale.y+this.scale.z)/3);var h=l*l;var f=new Ge;function p(t,r){var n=e.distanceSqToPoint(t);if(n<h){var s=e.closestPointToPoint(t);s.applyMatrix4(u);var c=i.ray.origin.distanceTo(s);if(c<i.near||c>i.far)return;a.push({distance:c,distanceToRay:Math.sqrt(n),point:s.clone(),index:r,face:null,object:o})}}if(s.isBufferGeometry){var d=s.index;var v=s.attributes;var m=v.position.array;if(null!==d){var g=d.array;for(var y=0,x=g.length;y<x;y++){var _=g[y];f.fromArray(m,3*_);p(f,_)}}else for(var y=0,b=m.length/3;y<b;y++){f.fromArray(m,3*y);p(f,y)}}else{var w=s.vertices;for(var y=0,b=w.length;y<b;y++)p(w[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Vo(){ua.call(this);this.type="Group"}Vo.prototype=Object.assign(Object.create(ua.prototype),{constructor:Vo,isGroup:true});function Wo(t,e,r,n,i,a,o,s,u){Xe.call(this,t,e,r,n,i,a,o,s,u);this.generateMipmaps=false}Wo.prototype=Object.assign(Object.create(Xe.prototype),{constructor:Wo,isVideoTexture:true,update:function(){var t=this.image;if(t.readyState>=t.HAVE_CURRENT_DATA)this.needsUpdate=true}});function Xo(t,e,r,n,i,a,o,s,u,c,l,h){Xe.call(this,null,a,o,s,u,c,n,i,l,h);this.image={width:e,height:r};this.mipmaps=t;this.flipY=false;this.generateMipmaps=false}Xo.prototype=Object.create(Xe.prototype);Xo.prototype.constructor=Xo;Xo.prototype.isCompressedTexture=true;function qo(t,e,r,n,i,a,o,s,u,c){c=void 0!==c?c:Xt;if(c!==Xt&&c!==qt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");if(void 0===r&&c===Xt)r=Pt;if(void 0===r&&c===qt)r=Ft;Xe.call(this,null,n,i,a,o,s,c,r,u);this.image={width:t,height:e};this.magFilter=void 0!==o?o:wt;this.minFilter=void 0!==s?s:wt;this.flipY=false;this.generateMipmaps=false}qo.prototype=Object.create(Xe.prototype);qo.prototype.constructor=qo;qo.prototype.isDepthTexture=true;function Yo(t){Aa.call(this);this.type="WireframeGeometry";var e=[];var r,n,i,a,o;var s=[0,0],u={},c,l,h;var f,p=["a","b","c"];var d;if(t&&t.isGeometry){var v=t.faces;for(r=0,i=v.length;r<i;r++){var m=v[r];for(n=0;n<3;n++){l=m[p[n]];h=m[p[(n+1)%3]];s[0]=Math.min(l,h);s[1]=Math.max(l,h);f=s[0]+","+s[1];if(void 0===u[f])u[f]={index1:s[0],index2:s[1]}}}for(f in u){c=u[f];d=t.vertices[c.index1];e.push(d.x,d.y,d.z);d=t.vertices[c.index2];e.push(d.x,d.y,d.z)}}else if(t&&t.isBufferGeometry){var g,y,x;var _,b,w;var M,E;d=new Ge;if(null!==t.index){g=t.attributes.position;y=t.index;x=t.groups;if(0===x.length)x=[{start:0,count:y.count,materialIndex:0}];for(a=0,o=x.length;a<o;++a){_=x[a];b=_.start;w=_.count;for(r=b,i=b+w;r<i;r+=3)for(n=0;n<3;n++){l=y.getX(r+n);h=y.getX(r+(n+1)%3);s[0]=Math.min(l,h);s[1]=Math.max(l,h);f=s[0]+","+s[1];if(void 0===u[f])u[f]={index1:s[0],index2:s[1]}}}for(f in u){c=u[f];d.fromBufferAttribute(g,c.index1);e.push(d.x,d.y,d.z);d.fromBufferAttribute(g,c.index2);e.push(d.x,d.y,d.z)}}else{g=t.attributes.position;for(r=0,i=g.count/3;r<i;r++)for(n=0;n<3;n++){M=3*r+n;d.fromBufferAttribute(g,M);e.push(d.x,d.y,d.z);E=3*r+(n+1)%3;d.fromBufferAttribute(g,E);e.push(d.x,d.y,d.z)}}}this.addAttribute("position",new wa(e,3))}Yo.prototype=Object.create(Aa.prototype);Yo.prototype.constructor=Yo;function Zo(t,e,r){pa.call(this);this.type="ParametricGeometry";this.parameters={func:t,slices:e,stacks:r};this.fromBufferGeometry(new Jo(t,e,r));this.mergeVertices()}Zo.prototype=Object.create(pa.prototype);Zo.prototype.constructor=Zo;function Jo(t,e,r){Aa.call(this);this.type="ParametricBufferGeometry";this.parameters={func:t,slices:e,stacks:r};var n=[];var i=[];var a=[];var o=[];var s=1e-5;var u=new Ge;var c=new Ge,l=new Ge;var h=new Ge,f=new Ge;var p,d;var v=e+1;for(p=0;p<=r;p++){var m=p/r;for(d=0;d<=e;d++){var g=d/e;c=t(g,m,c);i.push(c.x,c.y,c.z);if(g-s>=0){l=t(g-s,m,l);h.subVectors(c,l)}else{l=t(g+s,m,l);h.subVectors(l,c)}if(m-s>=0){l=t(g,m-s,l);f.subVectors(c,l)}else{l=t(g,m+s,l);f.subVectors(l,c)}u.crossVectors(h,f).normalize();a.push(u.x,u.y,u.z);o.push(g,m)}}for(p=0;p<r;p++)for(d=0;d<e;d++){var y=p*v+d;var x=p*v+d+1;var _=(p+1)*v+d+1;var b=(p+1)*v+d;n.push(y,x,b);n.push(x,_,b)}this.setIndex(n);this.addAttribute("position",new wa(i,3));this.addAttribute("normal",new wa(a,3));this.addAttribute("uv",new wa(o,2))}Jo.prototype=Object.create(Aa.prototype);Jo.prototype.constructor=Jo;function Qo(t,e,r,n){pa.call(this);this.type="PolyhedronGeometry";this.parameters={vertices:t,indices:e,radius:r,detail:n};this.fromBufferGeometry(new Ko(t,e,r,n));this.mergeVertices()}Qo.prototype=Object.create(pa.prototype);Qo.prototype.constructor=Qo;function Ko(t,e,r,n){Aa.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:t,indices:e,radius:r,detail:n};r=r||1;n=n||0;var i=[];var a=[];o(n);u(r);c();this.addAttribute("position",new wa(i,3));this.addAttribute("normal",new wa(i.slice(),3));this.addAttribute("uv",new wa(a,2));if(0===n)this.computeVertexNormals();else this.normalizeNormals();function o(t){var r=new Ge;var n=new Ge;var i=new Ge;for(var a=0;a<e.length;a+=3){f(e[a+0],r);f(e[a+1],n);f(e[a+2],i);s(r,n,i,t)}}function s(t,e,r,n){var i=Math.pow(2,n);var a=[];var o,s;for(o=0;o<=i;o++){a[o]=[];var u=t.clone().lerp(r,o/i);var c=e.clone().lerp(r,o/i);var l=i-o;for(s=0;s<=l;s++)if(0===s&&o===i)a[o][s]=u;else a[o][s]=u.clone().lerp(c,s/l)}for(o=0;o<i;o++)for(s=0;s<2*(i-o)-1;s++){var f=Math.floor(s/2);if(s%2===0){h(a[o][f+1]);h(a[o+1][f]);h(a[o][f])}else{h(a[o][f+1]);h(a[o+1][f+1]);h(a[o+1][f])}}}function u(t){var e=new Ge;for(var r=0;r<i.length;r+=3){e.x=i[r+0];e.y=i[r+1];e.z=i[r+2];e.normalize().multiplyScalar(t);i[r+0]=e.x;i[r+1]=e.y;i[r+2]=e.z}}function c(){var t=new Ge;for(var e=0;e<i.length;e+=3){t.x=i[e+0];t.y=i[e+1];t.z=i[e+2];var r=v(t)/2/Math.PI+.5;var n=m(t)/Math.PI+.5;a.push(r,1-n)}p();l()}function l(){for(var t=0;t<a.length;t+=6){var e=a[t+0];var r=a[t+2];var n=a[t+4];var i=Math.max(e,r,n);var o=Math.min(e,r,n);if(i>.9&&o<.1){if(e<.2)a[t+0]+=1;if(r<.2)a[t+2]+=1;if(n<.2)a[t+4]+=1}}}function h(t){i.push(t.x,t.y,t.z)}function f(e,r){var n=3*e;r.x=t[n+0];r.y=t[n+1];r.z=t[n+2]}function p(){var t=new Ge;var e=new Ge;var r=new Ge;var n=new Ge;var o=new ke;var s=new ke;var u=new ke;for(var c=0,l=0;c<i.length;c+=9,l+=6){t.set(i[c+0],i[c+1],i[c+2]);e.set(i[c+3],i[c+4],i[c+5]);r.set(i[c+6],i[c+7],i[c+8]);o.set(a[l+0],a[l+1]);s.set(a[l+2],a[l+3]);u.set(a[l+4],a[l+5]);n.copy(t).add(e).add(r).divideScalar(3);var h=v(n);d(o,l+0,t,h);d(s,l+2,e,h);d(u,l+4,r,h)}}function d(t,e,r,n){if(n<0&&1===t.x)a[e]=t.x-1;if(0===r.x&&0===r.z)a[e]=n/2/Math.PI+.5}function v(t){return Math.atan2(t.z,-t.x)}function m(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}}Ko.prototype=Object.create(Aa.prototype);Ko.prototype.constructor=Ko;function $o(t,e){pa.call(this);this.type="TetrahedronGeometry";this.parameters={radius:t,detail:e};this.fromBufferGeometry(new ts(t,e));this.mergeVertices()}$o.prototype=Object.create(pa.prototype);$o.prototype.constructor=$o;function ts(t,e){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1];var n=[2,1,0,0,3,2,1,3,0,2,3,1];Ko.call(this,r,n,t,e);this.type="TetrahedronBufferGeometry";this.parameters={radius:t,detail:e}}ts.prototype=Object.create(Ko.prototype);ts.prototype.constructor=ts;function es(t,e){pa.call(this);this.type="OctahedronGeometry";this.parameters={radius:t,detail:e};this.fromBufferGeometry(new rs(t,e));this.mergeVertices()}es.prototype=Object.create(pa.prototype);es.prototype.constructor=es;function rs(t,e){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1];var n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ko.call(this,r,n,t,e);this.type="OctahedronBufferGeometry";this.parameters={radius:t,detail:e}}rs.prototype=Object.create(Ko.prototype);rs.prototype.constructor=rs;function ns(t,e){pa.call(this);this.type="IcosahedronGeometry";this.parameters={radius:t,detail:e};this.fromBufferGeometry(new is(t,e));this.mergeVertices()}ns.prototype=Object.create(pa.prototype);ns.prototype.constructor=ns;function is(t,e){var r=(1+Math.sqrt(5))/2;var n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];var i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ko.call(this,n,i,t,e);this.type="IcosahedronBufferGeometry";this.parameters={radius:t,detail:e}}is.prototype=Object.create(Ko.prototype);is.prototype.constructor=is;function as(t,e){pa.call(this);this.type="DodecahedronGeometry";this.parameters={radius:t,detail:e};this.fromBufferGeometry(new os(t,e));this.mergeVertices()}as.prototype=Object.create(pa.prototype);as.prototype.constructor=as;function os(t,e){var r=(1+Math.sqrt(5))/2;var n=1/r;var i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n];var a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ko.call(this,i,a,t,e);this.type="DodecahedronBufferGeometry";this.parameters={radius:t,detail:e}}os.prototype=Object.create(Ko.prototype);os.prototype.constructor=os;function ss(t,e,r,n,i,a){pa.call(this);this.type="TubeGeometry";this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:n,closed:i};if(void 0!==a)console.warn("THREE.TubeGeometry: taper has been removed.");var o=new us(t,e,r,n,i);this.tangents=o.tangents;this.normals=o.normals;this.binormals=o.binormals;this.fromBufferGeometry(o);this.mergeVertices()}ss.prototype=Object.create(pa.prototype);ss.prototype.constructor=ss;function us(t,e,r,n,i){Aa.call(this);this.type="TubeBufferGeometry";this.parameters={path:t,tubularSegments:e,radius:r,radialSegments:n,closed:i};e=e||64;r=r||1;n=n||8;i=i||false;var a=t.computeFrenetFrames(e,i);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;var o=new Ge;var s=new Ge;var u=new ke;var c=new Ge;var l,h;var f=[];var p=[];var d=[];var v=[];m();this.setIndex(v);this.addAttribute("position",new wa(f,3));this.addAttribute("normal",new wa(p,3));this.addAttribute("uv",new wa(d,2));function m(){for(l=0;l<e;l++)g(l);g(false===i?e:0);x();y()}function g(i){c=t.getPointAt(i/e,c);var u=a.normals[i];var l=a.binormals[i];for(h=0;h<=n;h++){var d=h/n*Math.PI*2;var v=Math.sin(d);var m=-Math.cos(d);s.x=m*u.x+v*l.x;s.y=m*u.y+v*l.y;s.z=m*u.z+v*l.z;s.normalize();p.push(s.x,s.y,s.z);o.x=c.x+r*s.x;o.y=c.y+r*s.y;o.z=c.z+r*s.z;f.push(o.x,o.y,o.z)}}function y(){for(h=1;h<=e;h++)for(l=1;l<=n;l++){var t=(n+1)*(h-1)+(l-1);var r=(n+1)*h+(l-1);var i=(n+1)*h+l;var a=(n+1)*(h-1)+l;v.push(t,r,a);v.push(r,i,a)}}function x(){for(l=0;l<=e;l++)for(h=0;h<=n;h++){u.x=l/e;u.y=h/n;d.push(u.x,u.y)}}}us.prototype=Object.create(Aa.prototype);us.prototype.constructor=us;function cs(t,e,r,n,i,a,o){pa.call(this);this.type="TorusKnotGeometry";this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:n,p:i,q:a};if(void 0!==o)console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.");this.fromBufferGeometry(new ls(t,e,r,n,i,a));this.mergeVertices()}cs.prototype=Object.create(pa.prototype);cs.prototype.constructor=cs;function ls(t,e,r,n,i,a){Aa.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:n,p:i,q:a};t=t||1;e=e||.4;r=Math.floor(r)||64;n=Math.floor(n)||8;i=i||2;a=a||3;var o=[];var s=[];var u=[];var c=[];var l,h;var f=new Ge;var p=new Ge;var d=new Ge;var v=new Ge;var m=new Ge;var g=new Ge;var y=new Ge;for(l=0;l<=r;++l){var x=l/r*i*Math.PI*2;A(x,i,a,t,d);A(x+.01,i,a,t,v);g.subVectors(v,d);y.addVectors(v,d);m.crossVectors(g,y);y.crossVectors(m,g);m.normalize();y.normalize();for(h=0;h<=n;++h){var _=h/n*Math.PI*2;var b=-e*Math.cos(_);var w=e*Math.sin(_);f.x=d.x+(b*y.x+w*m.x);f.y=d.y+(b*y.y+w*m.y);f.z=d.z+(b*y.z+w*m.z);s.push(f.x,f.y,f.z);p.subVectors(f,d).normalize();u.push(p.x,p.y,p.z);c.push(l/r);c.push(h/n)}}for(h=1;h<=r;h++)for(l=1;l<=n;l++){var M=(n+1)*(h-1)+(l-1);var E=(n+1)*h+(l-1);var S=(n+1)*h+l;var T=(n+1)*(h-1)+l;o.push(M,E,T);o.push(E,S,T)}this.setIndex(o);this.addAttribute("position",new wa(s,3));this.addAttribute("normal",new wa(u,3));this.addAttribute("uv",new wa(c,2));function A(t,e,r,n,i){var a=Math.cos(t);var o=Math.sin(t);var s=r/e*t;var u=Math.cos(s);i.x=n*(2+u)*.5*a;i.y=n*(2+u)*o*.5;i.z=n*Math.sin(s)*.5}}ls.prototype=Object.create(Aa.prototype);ls.prototype.constructor=ls;function hs(t,e,r,n,i){pa.call(this);this.type="TorusGeometry";this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,arc:i};this.fromBufferGeometry(new fs(t,e,r,n,i));this.mergeVertices()}hs.prototype=Object.create(pa.prototype);hs.prototype.constructor=hs;function fs(t,e,r,n,i){Aa.call(this);this.type="TorusBufferGeometry";this.parameters={radius:t,tube:e,radialSegments:r,tubularSegments:n,arc:i};t=t||1;e=e||.4;r=Math.floor(r)||8;n=Math.floor(n)||6;i=i||2*Math.PI;var a=[];var o=[];var s=[];var u=[];var c=new Ge;var l=new Ge;var h=new Ge;var f,p;for(f=0;f<=r;f++)for(p=0;p<=n;p++){var d=p/n*i;var v=f/r*Math.PI*2;l.x=(t+e*Math.cos(v))*Math.cos(d);l.y=(t+e*Math.cos(v))*Math.sin(d);l.z=e*Math.sin(v);o.push(l.x,l.y,l.z);c.x=t*Math.cos(d);c.y=t*Math.sin(d);h.subVectors(l,c).normalize();s.push(h.x,h.y,h.z);u.push(p/n);u.push(f/r)}for(f=1;f<=r;f++)for(p=1;p<=n;p++){var m=(n+1)*f+p-1;var g=(n+1)*(f-1)+p-1;var y=(n+1)*(f-1)+p;var x=(n+1)*f+p;a.push(m,g,x);a.push(g,y,x)}this.setIndex(a);this.addAttribute("position",new wa(o,3));this.addAttribute("normal",new wa(s,3));this.addAttribute("uv",new wa(u,2))}fs.prototype=Object.create(Aa.prototype);fs.prototype.constructor=fs;var ps={triangulate:function(t,e,r){r=r||2;var n=e&&e.length,i=n?e[0]*r:t.length,a=ds(t,0,i,r,true),o=[];if(!a)return o;var s,u,c,l,h,f,p;if(n)a=bs(t,e,a,r);if(t.length>80*r){s=c=t[0];u=l=t[1];for(var d=r;d<i;d+=r){h=t[d];f=t[d+1];if(h<s)s=h;if(f<u)u=f;if(h>c)c=h;if(f>l)l=f}p=Math.max(c-s,l-u);p=0!==p?1/p:0}ms(a,o,r,s,u,p);return o}};function ds(t,e,r,n,i){var a,o;if(i===Hs(t,e,r,n)>0)for(a=e;a<r;a+=n)o=Bs(a,t[a],t[a+1],o);else for(a=r-n;a>=e;a-=n)o=Bs(a,t[a],t[a+1],o);if(o&&Is(o,o.next)){Fs(o);o=o.next}return o}function vs(t,e){if(!t)return t;if(!e)e=t;var r=t,n;do{n=false;if(!r.steiner&&(Is(r,r.next)||0===Ps(r.prev,r,r.next))){Fs(r);r=e=r.prev;if(r===r.next)break;n=true}else r=r.next}while(n||r!==e);return e}function ms(t,e,r,n,i,a,o){if(!t)return;if(!o&&a)Ss(t,n,i,a);var s=t,u,c;while(t.prev!==t.next){u=t.prev;c=t.next;if(a?ys(t,n,i,a):gs(t)){e.push(u.i/r);e.push(t.i/r);e.push(c.i/r);Fs(t);t=c.next;s=c.next;continue}t=c;if(t===s){if(!o)ms(vs(t),e,r,n,i,a,1);else if(1===o){t=xs(t,e,r);ms(t,e,r,n,i,a,2)}else if(2===o)_s(t,e,r,n,i,a);break}}}function gs(t){var e=t.prev,r=t,n=t.next;if(Ps(e,r,n)>=0)return false;var i=t.next.next;while(i!==t.prev){if(Ls(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&Ps(i.prev,i,i.next)>=0)return false;i=i.next}return true}function ys(t,e,r,n){var i=t.prev,a=t,o=t.next;if(Ps(i,a,o)>=0)return false;var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,l=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y;var h=As(s,u,e,r,n),f=As(c,l,e,r,n);var p=t.nextZ;while(p&&p.z<=f){if(p!==t.prev&&p!==t.next&&Ls(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Ps(p.prev,p,p.next)>=0)return false;p=p.nextZ}p=t.prevZ;while(p&&p.z>=h){if(p!==t.prev&&p!==t.next&&Ls(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Ps(p.prev,p,p.next)>=0)return false;p=p.prevZ}return true}function xs(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;if(!Is(i,a)&&Os(i,n,n.next,a)&&Us(i,a)&&Us(a,i)){e.push(i.i/r);e.push(n.i/r);e.push(a.i/r);Fs(n);Fs(n.next);n=t=a}n=n.next}while(n!==t);return n}function _s(t,e,r,n,i,a){var o=t;do{var s=o.next.next;while(s!==o.prev){if(o.i!==s.i&&Cs(o,s)){var u=zs(o,s);o=vs(o,o.next);u=vs(u,u.next);ms(o,e,r,n,i,a);ms(u,e,r,n,i,a);return}s=s.next}o=o.next}while(o!==t)}function bs(t,e,r,n){var i=[],a,o,s,u,c;for(a=0,o=e.length;a<o;a++){s=e[a]*n;u=a<o-1?e[a+1]*n:t.length;c=ds(t,s,u,n,false);if(c===c.next)c.steiner=true;i.push(Rs(c))}i.sort(ws);for(a=0;a<i.length;a++){Ms(i[a],r);r=vs(r,r.next)}return r}function ws(t,e){return t.x-e.x}function Ms(t,e){e=Es(t,e);if(e){var r=zs(e,t);vs(r,r.next)}}function Es(t,e){var r=e,n=t.x,i=t.y,a=-Infinity,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a){a=s;if(s===n){if(i===r.y)return r;if(i===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!o)return null;if(n===a)return o.prev;var u=o,c=o.x,l=o.y,h=Infinity,f;r=o.next;while(r!==u){if(n>=r.x&&r.x>=c&&n!==r.x&&Ls(i<l?n:a,i,c,l,i<l?a:n,i,r.x,r.y)){f=Math.abs(i-r.y)/(n-r.x);if((f<h||f===h&&r.x>o.x)&&Us(r,t)){o=r;h=f}}r=r.next}return o}function Ss(t,e,r,n){var i=t;do{if(null===i.z)i.z=As(i.x,i.y,e,r,n);i.prevZ=i.prev;i.nextZ=i.next;i=i.next}while(i!==t);i.prevZ.nextZ=null;i.prevZ=null;Ts(i)}function Ts(t){var e,r,n,i,a,o,s,u,c=1;do{r=t;t=null;a=null;o=0;while(r){o++;n=r;s=0;for(e=0;e<c;e++){s++;n=n.nextZ;if(!n)break}u=c;while(s>0||u>0&&n){if(0!==s&&(0===u||!n||r.z<=n.z)){i=r;r=r.nextZ;s--}else{i=n;n=n.nextZ;u--}if(a)a.nextZ=i;else t=i;i.prevZ=a;a=i}r=n}a.nextZ=null;c*=2}while(o>1);return t}function As(t,e,r,n,i){t=32767*(t-r)*i;e=32767*(e-n)*i;t=16711935&(t|t<<8);t=252645135&(t|t<<4);t=858993459&(t|t<<2);t=1431655765&(t|t<<1);e=16711935&(e|e<<8);e=252645135&(e|e<<4);e=858993459&(e|e<<2);e=1431655765&(e|e<<1);return t|e<<1}function Rs(t){var e=t,r=t;do{if(e.x<r.x)r=e;e=e.next}while(e!==t);return r}function Ls(t,e,r,n,i,a,o,s){return(i-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(n-s)-(r-o)*(e-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function Cs(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Ns(t,e)&&Us(t,e)&&Us(e,t)&&Ds(t,e)}function Ps(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Is(t,e){return t.x===e.x&&t.y===e.y}function Os(t,e,r,n){if(Is(t,e)&&Is(r,n)||Is(t,n)&&Is(r,e))return true;return Ps(t,e,r)>0!==Ps(t,e,n)>0&&Ps(r,n,t)>0!==Ps(r,n,e)>0}function Ns(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Os(r,r.next,t,e))return true;r=r.next}while(r!==t);return false}function Us(t,e){return Ps(t.prev,t,t.next)<0?Ps(t,e,t.next)>=0&&Ps(t,t.prev,e)>=0:Ps(t,e,t.prev)<0||Ps(t,t.next,e)<0}function Ds(t,e){var r=t,n=false,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{if(r.y>a!==r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x)n=!n;r=r.next}while(r!==t);return n}function zs(t,e){var r=new ks(t.i,t.x,t.y),n=new ks(e.i,e.x,e.y),i=t.next,a=e.prev;t.next=e;e.prev=t;r.next=i;i.prev=r;n.next=r;r.prev=n;a.next=n;n.prev=a;return n}function Bs(t,e,r,n){var i=new ks(t,e,r);if(!n){i.prev=i;i.next=i}else{i.next=n.next;i.prev=n;n.next.prev=i;n.next=i}return i}function Fs(t){t.next.prev=t.prev;t.prev.next=t.next;if(t.prevZ)t.prevZ.nextZ=t.nextZ;if(t.nextZ)t.nextZ.prevZ=t.prevZ}function ks(t,e,r){this.i=t;this.x=e;this.y=r;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}function Hs(t,e,r,n){var i=0;for(var a=e,o=r-n;a<r;a+=n){i+=(t[o]-t[a])*(t[a+1]+t[o+1]);o=a}return i}var js={area:function(t){var e=t.length;var r=0;for(var n=e-1,i=0;i<e;n=i++)r+=t[n].x*t[i].y-t[i].x*t[n].y;return.5*r},isClockWise:function(t){return js.area(t)<0},triangulateShape:function(t,e){var r=[];var n=[];var i=[];Gs(t);Vs(r,t);var a=t.length;e.forEach(Gs);for(var o=0;o<e.length;o++){n.push(a);a+=e[o].length;Vs(r,e[o])}var s=ps.triangulate(r,n);for(var o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}};function Gs(t){var e=t.length;if(e>2&&t[e-1].equals(t[0]))t.pop()}function Vs(t,e){for(var r=0;r<e.length;r++){t.push(e[r].x);t.push(e[r].y)}}function Ws(t,e){pa.call(this);this.type="ExtrudeGeometry";this.parameters={shapes:t,options:e};this.fromBufferGeometry(new Xs(t,e));this.mergeVertices()}Ws.prototype=Object.create(pa.prototype);Ws.prototype.constructor=Ws;function Xs(t,e){if("undefined"===typeof t)return;Aa.call(this);this.type="ExtrudeBufferGeometry";t=Array.isArray(t)?t:[t];this.addShapeList(t,e);this.computeVertexNormals()}Xs.prototype=Object.create(Aa.prototype);Xs.prototype.constructor=Xs;Xs.prototype.getArrays=function(){var t=this.getAttribute("position");var e=t?Array.prototype.slice.call(t.array):[];var r=this.getAttribute("uv");var n=r?Array.prototype.slice.call(r.array):[];var i=this.index;var a=i?Array.prototype.slice.call(i.array):[];return{position:e,uv:n,index:a}};Xs.prototype.addShapeList=function(t,e){var r=t.length;e.arrays=this.getArrays();for(var n=0;n<r;n++){var i=t[n];this.addShape(i,e)}this.setIndex(e.arrays.index);this.addAttribute("position",new wa(e.arrays.position,3));this.addAttribute("uv",new wa(e.arrays.uv,2))};Xs.prototype.addShape=function(t,e){var r=e.arrays?e.arrays:this.getArrays();var n=r.position;var i=r.index;var a=r.uv;var o=[];var s=void 0!==e.amount?e.amount:100;var u=void 0!==e.bevelThickness?e.bevelThickness:6;var c=void 0!==e.bevelSize?e.bevelSize:u-2;var l=void 0!==e.bevelSegments?e.bevelSegments:3;var h=void 0!==e.bevelEnabled?e.bevelEnabled:true;var f=void 0!==e.curveSegments?e.curveSegments:12;var p=void 0!==e.steps?e.steps:1;var d=e.extrudePath;var v,m=false;var g=void 0!==e.UVGenerator?e.UVGenerator:Ws.WorldUVGenerator;var y,x,_,b;if(d){v=d.getSpacedPoints(p);m=true;h=false;y=void 0!==e.frames?e.frames:d.computeFrenetFrames(p,false);x=new Ge;_=new Ge;b=new Ge}if(!h){l=0;u=0;c=0}var w,M,E;var S=this;var T=t.extractPoints(f);var A=T.shape;var R=T.holes;var L=!js.isClockWise(A);if(L){A=A.reverse();for(M=0,E=R.length;M<E;M++){w=R[M];if(js.isClockWise(w))R[M]=w.reverse()}}var C=js.triangulateShape(A,R);var P=A;for(M=0,E=R.length;M<E;M++){w=R[M];A=A.concat(w)}function I(t,e,r){if(!e)console.error("THREE.ExtrudeGeometry: vec does not exist");return e.clone().multiplyScalar(r).add(t)}var O,N,U,D,z,B=A.length,F,k=C.length;function H(t,e,r){var n,i,a;var o=t.x-e.x,s=t.y-e.y;var u=r.x-t.x,c=r.y-t.y;var l=o*o+s*s;var h=o*c-s*u;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(l);var p=Math.sqrt(u*u+c*c);var d=e.x-s/f;var v=e.y+o/f;var m=r.x-c/p;var g=r.y+u/p;var y=((m-d)*c-(g-v)*u)/(o*c-s*u);n=d+o*y-t.x;i=v+s*y-t.y;var x=n*n+i*i;if(x<=2)return new ke(n,i);else a=Math.sqrt(x/2)}else{var _=false;if(o>Number.EPSILON){if(u>Number.EPSILON)_=true}else if(o<-Number.EPSILON){if(u<-Number.EPSILON)_=true}else if(Math.sign(s)===Math.sign(c))_=true;if(_){n=-s;i=o;a=Math.sqrt(l)}else{n=o;i=s;a=Math.sqrt(l/2)}}return new ke(n/a,i/a)}var j=[];for(var G=0,V=P.length,W=V-1,X=G+1;G<V;G++,W++,X++){if(W===V)W=0;if(X===V)X=0;j[G]=H(P[G],P[W],P[X])}var q=[],Y,Z=j.concat();for(M=0,E=R.length;M<E;M++){w=R[M];Y=[];for(G=0,V=w.length,W=V-1,X=G+1;G<V;G++,W++,X++){if(W===V)W=0;if(X===V)X=0;Y[G]=H(w[G],w[W],w[X])}q.push(Y);Z=Z.concat(Y)}for(O=0;O<l;O++){U=O/l;D=u*Math.cos(U*Math.PI/2);N=c*Math.sin(U*Math.PI/2);for(G=0,V=P.length;G<V;G++){z=I(P[G],j[G],N);tt(z.x,z.y,-D)}for(M=0,E=R.length;M<E;M++){w=R[M];Y=q[M];for(G=0,V=w.length;G<V;G++){z=I(w[G],Y[G],N);tt(z.x,z.y,-D)}}}N=c;for(G=0;G<B;G++){z=h?I(A[G],Z[G],N):A[G];if(!m)tt(z.x,z.y,0);else{_.copy(y.normals[0]).multiplyScalar(z.x);x.copy(y.binormals[0]).multiplyScalar(z.y);b.copy(v[0]).add(_).add(x);tt(b.x,b.y,b.z)}}var J;for(J=1;J<=p;J++)for(G=0;G<B;G++){z=h?I(A[G],Z[G],N):A[G];if(!m)tt(z.x,z.y,s/p*J);else{_.copy(y.normals[J]).multiplyScalar(z.x);x.copy(y.binormals[J]).multiplyScalar(z.y);b.copy(v[J]).add(_).add(x);tt(b.x,b.y,b.z)}}for(O=l-1;O>=0;O--){U=O/l;D=u*Math.cos(U*Math.PI/2);N=c*Math.sin(U*Math.PI/2);for(G=0,V=P.length;G<V;G++){z=I(P[G],j[G],N);tt(z.x,z.y,s+D)}for(M=0,E=R.length;M<E;M++){w=R[M];Y=q[M];for(G=0,V=w.length;G<V;G++){z=I(w[G],Y[G],N);if(!m)tt(z.x,z.y,s+D);else tt(z.x,z.y+v[p-1].y,v[p-1].x+D)}}}Q();K();function Q(){var t=n.length/3;if(h){var r=0;var i=B*r;for(G=0;G<k;G++){F=C[G];et(F[2]+i,F[1]+i,F[0]+i)}r=p+2*l;i=B*r;for(G=0;G<k;G++){F=C[G];et(F[0]+i,F[1]+i,F[2]+i)}}else{for(G=0;G<k;G++){F=C[G];et(F[2],F[1],F[0])}for(G=0;G<k;G++){F=C[G];et(F[0]+B*p,F[1]+B*p,F[2]+B*p)}}S.addGroup(t,n.length/3-t,void 0!==e.material?e.material:0)}function K(){var t=n.length/3;var r=0;$(P,r);r+=P.length;for(M=0,E=R.length;M<E;M++){w=R[M];$(w,r);r+=w.length}S.addGroup(t,n.length/3-t,void 0!==e.extrudeMaterial?e.extrudeMaterial:1)}function $(t,e){var r,n;G=t.length;while(--G>=0){r=G;n=G-1;if(n<0)n=t.length-1;var i=0,a=p+2*l;for(i=0;i<a;i++){var o=B*i;var s=B*(i+1);var u=e+r+o,c=e+n+o,h=e+n+s,f=e+r+s;rt(u,c,h,f)}}}function tt(t,e,r){o.push(t);o.push(e);o.push(r)}function et(t,e,r){nt(t);nt(e);nt(r);var i=n.length/3;var a=g.generateTopUV(S,n,i-3,i-2,i-1);it(a[0]);it(a[1]);it(a[2])}function rt(t,e,r,i){nt(t);nt(e);nt(i);nt(e);nt(r);nt(i);var a=n.length/3;var o=g.generateSideWallUV(S,n,a-6,a-3,a-2,a-1);it(o[0]);it(o[1]);it(o[3]);it(o[1]);it(o[2]);it(o[3])}function nt(t){i.push(n.length/3);n.push(o[3*t+0]);n.push(o[3*t+1]);n.push(o[3*t+2])}function it(t){a.push(t.x);a.push(t.y)}if(!e.arrays){this.setIndex(i);this.addAttribute("position",new wa(n,3));this.addAttribute("uv",new wa(a,2))}};Ws.WorldUVGenerator={generateTopUV:function(t,e,r,n,i){var a=e[3*r];var o=e[3*r+1];var s=e[3*n];var u=e[3*n+1];var c=e[3*i];var l=e[3*i+1];return[new ke(a,o),new ke(s,u),new ke(c,l)]},generateSideWallUV:function(t,e,r,n,i,a){var o=e[3*r];var s=e[3*r+1];var u=e[3*r+2];var c=e[3*n];var l=e[3*n+1];var h=e[3*n+2];var f=e[3*i];var p=e[3*i+1];var d=e[3*i+2];var v=e[3*a];var m=e[3*a+1];var g=e[3*a+2];if(Math.abs(s-l)<.01)return[new ke(o,1-u),new ke(c,1-h),new ke(f,1-d),new ke(v,1-g)];else return[new ke(s,1-u),new ke(l,1-h),new ke(p,1-d),new ke(m,1-g)]}};function qs(t,e){pa.call(this);this.type="TextGeometry";this.parameters={text:t,parameters:e};this.fromBufferGeometry(new Ys(t,e));this.mergeVertices()}qs.prototype=Object.create(pa.prototype);qs.prototype.constructor=qs;function Ys(t,e){e=e||{};var r=e.font;if(!(r&&r.isFont)){console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font.");return new pa}var n=r.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50;if(void 0===e.bevelThickness)e.bevelThickness=10;if(void 0===e.bevelSize)e.bevelSize=8;if(void 0===e.bevelEnabled)e.bevelEnabled=false;Xs.call(this,n,e);this.type="TextBufferGeometry"}Ys.prototype=Object.create(Xs.prototype);Ys.prototype.constructor=Ys;function Zs(t,e,r,n,i,a,o){pa.call(this);this.type="SphereGeometry";this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o};this.fromBufferGeometry(new Js(t,e,r,n,i,a,o));this.mergeVertices()}Zs.prototype=Object.create(pa.prototype);Zs.prototype.constructor=Zs;function Js(t,e,r,n,i,a,o){Aa.call(this);this.type="SphereBufferGeometry";this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o};t=t||1;e=Math.max(3,Math.floor(e)||8);r=Math.max(2,Math.floor(r)||6);n=void 0!==n?n:0;i=void 0!==i?i:2*Math.PI;a=void 0!==a?a:0;o=void 0!==o?o:Math.PI;var s=a+o;var u,c;var l=0;var h=[];var f=new Ge;var p=new Ge;var d=[];var v=[];var m=[];var g=[];for(c=0;c<=r;c++){var y=[];var x=c/r;for(u=0;u<=e;u++){var _=u/e;f.x=-t*Math.cos(n+_*i)*Math.sin(a+x*o);f.y=t*Math.cos(a+x*o);f.z=t*Math.sin(n+_*i)*Math.sin(a+x*o);v.push(f.x,f.y,f.z);p.set(f.x,f.y,f.z).normalize();m.push(p.x,p.y,p.z);g.push(_,1-x);y.push(l++)}h.push(y)}for(c=0;c<r;c++)for(u=0;u<e;u++){var b=h[c][u+1];var w=h[c][u];var M=h[c+1][u];var E=h[c+1][u+1];if(0!==c||a>0)d.push(b,w,E);if(c!==r-1||s<Math.PI)d.push(w,M,E)}this.setIndex(d);this.addAttribute("position",new wa(v,3));this.addAttribute("normal",new wa(m,3));this.addAttribute("uv",new wa(g,2))}Js.prototype=Object.create(Aa.prototype);Js.prototype.constructor=Js;function Qs(t,e,r,n,i,a){pa.call(this);this.type="RingGeometry";this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a};this.fromBufferGeometry(new Ks(t,e,r,n,i,a));this.mergeVertices()}Qs.prototype=Object.create(pa.prototype);Qs.prototype.constructor=Qs;function Ks(t,e,r,n,i,a){Aa.call(this);this.type="RingBufferGeometry";this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a};t=t||.5;e=e||1;i=void 0!==i?i:0;a=void 0!==a?a:2*Math.PI;r=void 0!==r?Math.max(3,r):8;n=void 0!==n?Math.max(1,n):1;var o=[];var s=[];var u=[];var c=[];var l;var h=t;var f=(e-t)/n;var p=new Ge;var d=new ke;var v,m;for(v=0;v<=n;v++){for(m=0;m<=r;m++){l=i+m/r*a;p.x=h*Math.cos(l);p.y=h*Math.sin(l);s.push(p.x,p.y,p.z);u.push(0,0,1);d.x=(p.x/e+1)/2;d.y=(p.y/e+1)/2;c.push(d.x,d.y)}h+=f}for(v=0;v<n;v++){var g=v*(r+1);for(m=0;m<r;m++){l=m+g;var y=l;var x=l+r+1;var _=l+r+2;var b=l+1;o.push(y,x,b);o.push(x,_,b)}}this.setIndex(o);this.addAttribute("position",new wa(s,3));this.addAttribute("normal",new wa(u,3));this.addAttribute("uv",new wa(c,2))}Ks.prototype=Object.create(Aa.prototype);Ks.prototype.constructor=Ks;function $s(t,e,r,n){pa.call(this);this.type="LatheGeometry";this.parameters={points:t,segments:e,phiStart:r,phiLength:n};this.fromBufferGeometry(new tu(t,e,r,n));this.mergeVertices()}$s.prototype=Object.create(pa.prototype);$s.prototype.constructor=$s;function tu(t,e,r,n){Aa.call(this);this.type="LatheBufferGeometry";this.parameters={points:t,segments:e,phiStart:r,phiLength:n};e=Math.floor(e)||12;r=r||0;n=n||2*Math.PI;n=Fe.clamp(n,0,2*Math.PI);var i=[];var a=[];var o=[];var s;var u=1/e;var c=new Ge;var l=new ke;var h,f;for(h=0;h<=e;h++){var p=r+h*u*n;var d=Math.sin(p);var v=Math.cos(p);for(f=0;f<=t.length-1;f++){c.x=t[f].x*d;c.y=t[f].y;c.z=t[f].x*v;a.push(c.x,c.y,c.z);l.x=h/e;l.y=f/(t.length-1);o.push(l.x,l.y)}}for(h=0;h<e;h++)for(f=0;f<t.length-1;f++){s=f+h*t.length;var m=s;var g=s+t.length;var y=s+t.length+1;var x=s+1;i.push(m,g,x);i.push(g,y,x)}this.setIndex(i);this.addAttribute("position",new wa(a,3));this.addAttribute("uv",new wa(o,2));this.computeVertexNormals();if(n===2*Math.PI){var _=this.attributes.normal.array;var b=new Ge;var w=new Ge;var M=new Ge;s=e*t.length*3;for(h=0,f=0;h<t.length;h++,f+=3){b.x=_[f+0];b.y=_[f+1];b.z=_[f+2];w.x=_[s+f+0];w.y=_[s+f+1];w.z=_[s+f+2];M.addVectors(b,w).normalize();_[f+0]=_[s+f+0]=M.x;_[f+1]=_[s+f+1]=M.y;_[f+2]=_[s+f+2]=M.z}}}tu.prototype=Object.create(Aa.prototype);tu.prototype.constructor=tu;function eu(t,e){pa.call(this);this.type="ShapeGeometry";if("object"===typeof e){console.warn("THREE.ShapeGeometry: Options parameter has been removed.");e=e.curveSegments}this.parameters={shapes:t,curveSegments:e};this.fromBufferGeometry(new ru(t,e));this.mergeVertices()}eu.prototype=Object.create(pa.prototype);eu.prototype.constructor=eu;eu.prototype.toJSON=function(){var t=pa.prototype.toJSON.call(this);var e=this.parameters.shapes;return nu(e,t)};function ru(t,e){Aa.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:t,curveSegments:e};e=e||12;var r=[];var n=[];var i=[];var a=[];var o=0;var s=0;if(false===Array.isArray(t))c(t);else for(var u=0;u<t.length;u++){c(t[u]);this.addGroup(o,s,u);o+=s;s=0}this.setIndex(r);this.addAttribute("position",new wa(n,3));this.addAttribute("normal",new wa(i,3));this.addAttribute("uv",new wa(a,2));function c(t){var o,u,c;var l=n.length/3;var h=t.extractPoints(e);var f=h.shape;var p=h.holes;if(false===js.isClockWise(f)){f=f.reverse();for(o=0,u=p.length;o<u;o++){c=p[o];if(true===js.isClockWise(c))p[o]=c.reverse()}}var d=js.triangulateShape(f,p);for(o=0,u=p.length;o<u;o++){c=p[o];f=f.concat(c)}for(o=0,u=f.length;o<u;o++){var v=f[o];n.push(v.x,v.y,0);i.push(0,0,1);a.push(v.x,v.y)}for(o=0,u=d.length;o<u;o++){var m=d[o];var g=m[0]+l;var y=m[1]+l;var x=m[2]+l;r.push(g,y,x);s+=3}}}ru.prototype=Object.create(Aa.prototype);ru.prototype.constructor=ru;ru.prototype.toJSON=function(){var t=Aa.prototype.toJSON.call(this);var e=this.parameters.shapes;return nu(e,t)};function nu(t,e){e.shapes=[];if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++){var i=t[r];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}function iu(t,e){Aa.call(this);this.type="EdgesGeometry";this.parameters={thresholdAngle:e};e=void 0!==e?e:1;var r=[];var n=Math.cos(Fe.DEG2RAD*e);var i=[0,0],a={},o,s;var u,c=["a","b","c"];var l;if(t.isBufferGeometry){l=new pa;l.fromBufferGeometry(t)}else l=t.clone();l.mergeVertices();l.computeFaceNormals();var h=l.vertices;var f=l.faces;for(var p=0,d=f.length;p<d;p++){var v=f[p];for(var m=0;m<3;m++){o=v[c[m]];s=v[c[(m+1)%3]];i[0]=Math.min(o,s);i[1]=Math.max(o,s);u=i[0]+","+i[1];if(void 0===a[u])a[u]={index1:i[0],index2:i[1],face1:p,face2:void 0};else a[u].face2=p}}for(u in a){var g=a[u];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=n){var y=h[g.index1];r.push(y.x,y.y,y.z);y=h[g.index2];r.push(y.x,y.y,y.z)}}this.addAttribute("position",new wa(r,3))}iu.prototype=Object.create(Aa.prototype);iu.prototype.constructor=iu;function au(t,e,r,n,i,a,o,s){pa.call(this);this.type="CylinderGeometry";this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};this.fromBufferGeometry(new ou(t,e,r,n,i,a,o,s));this.mergeVertices()}au.prototype=Object.create(pa.prototype);au.prototype.constructor=au;function ou(t,e,r,n,i,a,o,s){Aa.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var u=this;t=void 0!==t?t:1;e=void 0!==e?e:1;r=r||1;n=Math.floor(n)||8;i=Math.floor(i)||1;a=void 0!==a?a:false;o=void 0!==o?o:0;s=void 0!==s?s:2*Math.PI;var c=[];var l=[];var h=[];var f=[];var p=0;var d=[];var v=r/2;var m=0;g();if(false===a){if(t>0)y(true);if(e>0)y(false)}this.setIndex(c);this.addAttribute("position",new wa(l,3));this.addAttribute("normal",new wa(h,3));this.addAttribute("uv",new wa(f,2));function g(){var a,g;var y=new Ge;var x=new Ge;var _=0;var b=(e-t)/r;for(g=0;g<=i;g++){var w=[];var M=g/i;var E=M*(e-t)+t;for(a=0;a<=n;a++){var S=a/n;var T=S*s+o;var A=Math.sin(T);var R=Math.cos(T);x.x=E*A;x.y=-M*r+v;x.z=E*R;l.push(x.x,x.y,x.z);y.set(A,b,R).normalize();h.push(y.x,y.y,y.z);f.push(S,1-M);w.push(p++)}d.push(w)}for(a=0;a<n;a++)for(g=0;g<i;g++){var L=d[g][a];var C=d[g+1][a];var P=d[g+1][a+1];var I=d[g][a+1];c.push(L,C,I);c.push(C,P,I);_+=6}u.addGroup(m,_,0);m+=_}function y(r){var i,a,d;var g=new ke;var y=new Ge;var x=0;var _=true===r?t:e;var b=true===r?1:-1;a=p;for(i=1;i<=n;i++){l.push(0,v*b,0);h.push(0,b,0);f.push(.5,.5);p++}d=p;for(i=0;i<=n;i++){var w=i/n;var M=w*s+o;var E=Math.cos(M);var S=Math.sin(M);y.x=_*S;y.y=v*b;y.z=_*E;l.push(y.x,y.y,y.z);h.push(0,b,0);g.x=.5*E+.5;g.y=.5*S*b+.5;f.push(g.x,g.y);p++}for(i=0;i<n;i++){var T=a+i;var A=d+i;if(true===r)c.push(A,A+1,T);else c.push(A+1,A,T);x+=3}u.addGroup(m,x,true===r?1:2);m+=x}}ou.prototype=Object.create(Aa.prototype);ou.prototype.constructor=ou;function su(t,e,r,n,i,a,o){au.call(this,0,t,e,r,n,i,a,o);this.type="ConeGeometry";this.parameters={radius:t,height:e,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}su.prototype=Object.create(au.prototype);su.prototype.constructor=su;function uu(t,e,r,n,i,a,o){ou.call(this,0,t,e,r,n,i,a,o);this.type="ConeBufferGeometry";this.parameters={radius:t,height:e,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}uu.prototype=Object.create(ou.prototype);uu.prototype.constructor=uu;function cu(t,e,r,n){pa.call(this);this.type="CircleGeometry";this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:n};this.fromBufferGeometry(new lu(t,e,r,n));this.mergeVertices()}cu.prototype=Object.create(pa.prototype);cu.prototype.constructor=cu;function lu(t,e,r,n){Aa.call(this);this.type="CircleBufferGeometry";this.parameters={radius:t,segments:e,thetaStart:r,thetaLength:n};t=t||1;e=void 0!==e?Math.max(3,e):8;r=void 0!==r?r:0;n=void 0!==n?n:2*Math.PI;var i=[];var a=[];var o=[];var s=[];var u,c;var l=new Ge;var h=new ke;a.push(0,0,0);o.push(0,0,1);s.push(.5,.5);for(c=0,u=3;c<=e;c++,u+=3){var f=r+c/e*n;l.x=t*Math.cos(f);l.y=t*Math.sin(f);a.push(l.x,l.y,l.z);o.push(0,0,1);h.x=(a[u]/t+1)/2;h.y=(a[u+1]/t+1)/2;s.push(h.x,h.y)}for(u=1;u<=e;u++)i.push(u,u+1,0);this.setIndex(i);this.addAttribute("position",new wa(a,3));this.addAttribute("normal",new wa(o,3));this.addAttribute("uv",new wa(s,2))}lu.prototype=Object.create(Aa.prototype);lu.prototype.constructor=lu;var hu=Object.freeze({WireframeGeometry:Yo,ParametricGeometry:Zo,ParametricBufferGeometry:Jo,TetrahedronGeometry:$o,TetrahedronBufferGeometry:ts,OctahedronGeometry:es,OctahedronBufferGeometry:rs,IcosahedronGeometry:ns,IcosahedronBufferGeometry:is,DodecahedronGeometry:as,DodecahedronBufferGeometry:os,PolyhedronGeometry:Qo,PolyhedronBufferGeometry:Ko,TubeGeometry:ss,TubeBufferGeometry:us,TorusKnotGeometry:cs,TorusKnotBufferGeometry:ls,TorusGeometry:hs,TorusBufferGeometry:fs,TextGeometry:qs,TextBufferGeometry:Ys,SphereGeometry:Zs,SphereBufferGeometry:Js,RingGeometry:Qs,RingBufferGeometry:Ks,PlaneGeometry:Ca,PlaneBufferGeometry:Pa,LatheGeometry:$s,LatheBufferGeometry:tu,ShapeGeometry:eu,ShapeBufferGeometry:ru,ExtrudeGeometry:Ws,ExtrudeBufferGeometry:Xs,EdgesGeometry:iu,ConeGeometry:su,ConeBufferGeometry:uu,CylinderGeometry:au,CylinderBufferGeometry:ou,CircleGeometry:cu,CircleBufferGeometry:lu,BoxGeometry:Ra,BoxBufferGeometry:La});function fu(t){Ji.call(this);this.type="ShadowMaterial";this.color=new kr(0);this.opacity=1;this.lights=true;this.transparent=true;this.setValues(t)}fu.prototype=Object.create(Ji.prototype);fu.prototype.constructor=fu;fu.prototype.isShadowMaterial=true;function pu(t){Oa.call(this,t);this.type="RawShaderMaterial"}pu.prototype=Object.create(Oa.prototype);pu.prototype.constructor=pu;pu.prototype.isRawShaderMaterial=true;function du(t){Ji.call(this);this.defines={STANDARD:""};this.type="MeshStandardMaterial";this.color=new kr(16777215);this.roughness=.5;this.metalness=.5;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new kr(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new ke(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.roughnessMap=null;this.metalnessMap=null;this.alphaMap=null;this.envMap=null;this.envMapIntensity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(t)}du.prototype=Object.create(Ji.prototype);du.prototype.constructor=du;du.prototype.isMeshStandardMaterial=true;du.prototype.copy=function(t){Ji.prototype.copy.call(this,t);this.defines={STANDARD:""};this.color.copy(t.color);this.roughness=t.roughness;this.metalness=t.metalness;this.map=t.map;this.lightMap=t.lightMap;this.lightMapIntensity=t.lightMapIntensity;this.aoMap=t.aoMap;this.aoMapIntensity=t.aoMapIntensity;this.emissive.copy(t.emissive);this.emissiveMap=t.emissiveMap;this.emissiveIntensity=t.emissiveIntensity;this.bumpMap=t.bumpMap;this.bumpScale=t.bumpScale;this.normalMap=t.normalMap;this.normalScale.copy(t.normalScale);this.displacementMap=t.displacementMap;this.displacementScale=t.displacementScale;this.displacementBias=t.displacementBias;this.roughnessMap=t.roughnessMap;this.metalnessMap=t.metalnessMap;this.alphaMap=t.alphaMap;this.envMap=t.envMap;this.envMapIntensity=t.envMapIntensity;this.refractionRatio=t.refractionRatio;this.wireframe=t.wireframe;this.wireframeLinewidth=t.wireframeLinewidth;this.wireframeLinecap=t.wireframeLinecap;this.wireframeLinejoin=t.wireframeLinejoin;this.skinning=t.skinning;this.morphTargets=t.morphTargets;this.morphNormals=t.morphNormals;return this};function vu(t){du.call(this);this.defines={PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoat=0;this.clearCoatRoughness=0;this.setValues(t)}vu.prototype=Object.create(du.prototype);vu.prototype.constructor=vu;vu.prototype.isMeshPhysicalMaterial=true;vu.prototype.copy=function(t){du.prototype.copy.call(this,t);this.defines={PHYSICAL:""};this.reflectivity=t.reflectivity;this.clearCoat=t.clearCoat;this.clearCoatRoughness=t.clearCoatRoughness;return this};function mu(t){Ji.call(this);this.type="MeshPhongMaterial";this.color=new kr(16777215);this.specular=new kr(1118481);this.shininess=30;this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new kr(0);this.emissiveIntensity=1;this.emissiveMap=null;this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new ke(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=nt;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(t)}mu.prototype=Object.create(Ji.prototype);mu.prototype.constructor=mu;mu.prototype.isMeshPhongMaterial=true;mu.prototype.copy=function(t){Ji.prototype.copy.call(this,t);this.color.copy(t.color);this.specular.copy(t.specular);this.shininess=t.shininess;this.map=t.map;this.lightMap=t.lightMap;this.lightMapIntensity=t.lightMapIntensity;this.aoMap=t.aoMap;this.aoMapIntensity=t.aoMapIntensity;this.emissive.copy(t.emissive);this.emissiveMap=t.emissiveMap;this.emissiveIntensity=t.emissiveIntensity;this.bumpMap=t.bumpMap;this.bumpScale=t.bumpScale;this.normalMap=t.normalMap;this.normalScale.copy(t.normalScale);this.displacementMap=t.displacementMap;this.displacementScale=t.displacementScale;this.displacementBias=t.displacementBias;this.specularMap=t.specularMap;this.alphaMap=t.alphaMap;this.envMap=t.envMap;this.combine=t.combine;this.reflectivity=t.reflectivity;this.refractionRatio=t.refractionRatio;this.wireframe=t.wireframe;this.wireframeLinewidth=t.wireframeLinewidth;this.wireframeLinecap=t.wireframeLinecap;this.wireframeLinejoin=t.wireframeLinejoin;this.skinning=t.skinning;this.morphTargets=t.morphTargets;this.morphNormals=t.morphNormals;return this};function gu(t){mu.call(this);this.defines={TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(t)}gu.prototype=Object.create(mu.prototype);gu.prototype.constructor=gu;gu.prototype.isMeshToonMaterial=true;gu.prototype.copy=function(t){mu.prototype.copy.call(this,t);this.gradientMap=t.gradientMap;return this};function yu(t){Ji.call(this);this.type="MeshNormalMaterial";this.bumpMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new ke(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=false;this.wireframeLinewidth=1;this.fog=false;this.lights=false;this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(t)}yu.prototype=Object.create(Ji.prototype);yu.prototype.constructor=yu;yu.prototype.isMeshNormalMaterial=true;yu.prototype.copy=function(t){Ji.prototype.copy.call(this,t);this.bumpMap=t.bumpMap;this.bumpScale=t.bumpScale;this.normalMap=t.normalMap;this.normalScale.copy(t.normalScale);this.displacementMap=t.displacementMap;this.displacementScale=t.displacementScale;this.displacementBias=t.displacementBias;this.wireframe=t.wireframe;this.wireframeLinewidth=t.wireframeLinewidth;this.skinning=t.skinning;this.morphTargets=t.morphTargets;this.morphNormals=t.morphNormals;return this};function xu(t){Ji.call(this);this.type="MeshLambertMaterial";this.color=new kr(16777215);this.map=null;this.lightMap=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new kr(0);this.emissiveIntensity=1;this.emissiveMap=null;this.specularMap=null;this.alphaMap=null;this.envMap=null;this.combine=nt;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=false;this.wireframeLinewidth=1;this.wireframeLinecap="round";this.wireframeLinejoin="round";this.skinning=false;this.morphTargets=false;this.morphNormals=false;this.setValues(t)}xu.prototype=Object.create(Ji.prototype);xu.prototype.constructor=xu;xu.prototype.isMeshLambertMaterial=true;xu.prototype.copy=function(t){Ji.prototype.copy.call(this,t);this.color.copy(t.color);this.map=t.map;this.lightMap=t.lightMap;this.lightMapIntensity=t.lightMapIntensity;this.aoMap=t.aoMap;this.aoMapIntensity=t.aoMapIntensity;this.emissive.copy(t.emissive);this.emissiveMap=t.emissiveMap;this.emissiveIntensity=t.emissiveIntensity;this.specularMap=t.specularMap;this.alphaMap=t.alphaMap;this.envMap=t.envMap;this.combine=t.combine;this.reflectivity=t.reflectivity;this.refractionRatio=t.refractionRatio;this.wireframe=t.wireframe;this.wireframeLinewidth=t.wireframeLinewidth;this.wireframeLinecap=t.wireframeLinecap;this.wireframeLinejoin=t.wireframeLinejoin;this.skinning=t.skinning;this.morphTargets=t.morphTargets;this.morphNormals=t.morphNormals;return this};function _u(t){Bo.call(this);this.type="LineDashedMaterial";this.scale=1;this.dashSize=3;this.gapSize=1;this.setValues(t)}_u.prototype=Object.create(Bo.prototype);_u.prototype.constructor=_u;_u.prototype.isLineDashedMaterial=true;_u.prototype.copy=function(t){Bo.prototype.copy.call(this,t);this.scale=t.scale;this.dashSize=t.dashSize;this.gapSize=t.gapSize;return this};var bu=Object.freeze({ShadowMaterial:fu,SpriteMaterial:Io,RawShaderMaterial:pu,ShaderMaterial:Oa,PointsMaterial:jo,MeshPhysicalMaterial:vu,MeshStandardMaterial:du,MeshPhongMaterial:mu,MeshToonMaterial:gu,MeshNormalMaterial:yu,MeshLambertMaterial:xu,MeshDepthMaterial:Qi,MeshDistanceMaterial:Ki,MeshBasicMaterial:Ia,LineDashedMaterial:_u,LineBasicMaterial:Bo,Material:Ji});var wu={enabled:false,files:{},add:function(t,e){if(false===this.enabled)return;this.files[t]=e},get:function(t){if(false===this.enabled)return;return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Mu(t,e,r){var n=this;var i=false;var a=0;var o=0;var s=void 0;this.onStart=void 0;this.onLoad=t;this.onProgress=e;this.onError=r;this.itemStart=function(t){o++;if(false===i)if(void 0!==n.onStart)n.onStart(t,a,o);i=true};this.itemEnd=function(t){a++;if(void 0!==n.onProgress)n.onProgress(t,a,o);if(a===o){i=false;if(void 0!==n.onLoad)n.onLoad()}};this.itemError=function(t){if(void 0!==n.onError)n.onError(t)};this.resolveURL=function(t){if(s)return s(t);return t};this.setURLModifier=function(t){s=t;return this}}var Eu=new Mu;var Su={};function Tu(t){this.manager=void 0!==t?t:Eu}Object.assign(Tu.prototype,{load:function(t,e,r,n){if(void 0===t)t="";if(void 0!==this.path)t=this.path+t;t=this.manager.resolveURL(t);var i=this;var a=wu.get(t);if(void 0!==a){i.manager.itemStart(t);setTimeout(function(){if(e)e(a);i.manager.itemEnd(t)},0);return a}if(void 0!==Su[t]){Su[t].push({onLoad:e,onProgress:r,onError:n});return}var o=/^data:(.*?)(;base64)?,(.*)$/;var s=t.match(o);if(s){var u=s[1];var c=!!s[2];var l=s[3];l=window.decodeURIComponent(l);if(c)l=window.atob(l);try{var h;var f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":var p=new Uint8Array(l.length);for(var d=0;d<l.length;d++)p[d]=l.charCodeAt(d);if("blob"===f)h=new Blob([p.buffer],{type:u});else h=p.buffer;break;case"document":var v=new DOMParser;h=v.parseFromString(l,u);break;case"json":h=JSON.parse(l);break;default:h=l;break}window.setTimeout(function(){if(e)e(h);i.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){if(n)n(e);i.manager.itemEnd(t);i.manager.itemError(t)},0)}}else{Su[t]=[];Su[t].push({onLoad:e,onProgress:r,onError:n});var m=new XMLHttpRequest;m.open("GET",t,true);m.addEventListener("load",function(e){var r=this.response;wu.add(t,r);var n=Su[t];delete Su[t];if(200===this.status){for(var a=0,o=n.length;a<o;a++){var s=n[a];if(s.onLoad)s.onLoad(r)}i.manager.itemEnd(t)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=n.length;a<o;a++){var s=n[a];if(s.onLoad)s.onLoad(r)}i.manager.itemEnd(t)}else{for(var a=0,o=n.length;a<o;a++){var s=n[a];if(s.onError)s.onError(e)}i.manager.itemEnd(t);i.manager.itemError(t)}},false);m.addEventListener("progress",function(e){var r=Su[t];for(var n=0,i=r.length;n<i;n++){var a=r[n];if(a.onProgress)a.onProgress(e)}},false);m.addEventListener("error",function(e){var r=Su[t];delete Su[t];for(var n=0,a=r.length;n<a;n++){var o=r[n];if(o.onError)o.onError(e)}i.manager.itemEnd(t);i.manager.itemError(t)},false);if(void 0!==this.responseType)m.responseType=this.responseType;if(void 0!==this.withCredentials)m.withCredentials=this.withCredentials;if(m.overrideMimeType)m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(var g in this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}i.manager.itemStart(t);return m},setPath:function(t){this.path=t;return this},setResponseType:function(t){this.responseType=t;return this},setWithCredentials:function(t){this.withCredentials=t;return this},setMimeType:function(t){this.mimeType=t;return this},setRequestHeader:function(t){this.requestHeader=t;return this}});function Au(t){this.manager=void 0!==t?t:Eu;this._parser=null}Object.assign(Au.prototype,{load:function(t,e,r,n){var i=this;var a=[];var o=new Xo;o.image=a;var s=new Tu(this.manager);s.setPath(this.path);s.setResponseType("arraybuffer");function u(u){s.load(t[u],function(t){var r=i._parser(t,true);a[u]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps};c+=1;if(6===c){if(1===r.mipmapCount)o.minFilter=St;o.format=r.format;o.needsUpdate=true;if(e)e(o)}},r,n)}if(Array.isArray(t)){var c=0;for(var l=0,h=t.length;l<h;++l)u(l)}else s.load(t,function(t){var r=i._parser(t,true);if(r.isCubemap){var n=r.mipmaps.length/r.mipmapCount;for(var s=0;s<n;s++){a[s]={mipmaps:[]};for(var u=0;u<r.mipmapCount;u++){a[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+u]);a[s].format=r.format;a[s].width=r.width;a[s].height=r.height}}}else{o.image.width=r.width;o.image.height=r.height;o.mipmaps=r.mipmaps}if(1===r.mipmapCount)o.minFilter=St;o.format=r.format;o.needsUpdate=true;if(e)e(o)},r,n);return o},setPath:function(t){this.path=t;return this}});function Ru(t){this.manager=void 0!==t?t:Eu;this._parser=null}Object.assign(Ru.prototype,{load:function(t,e,r,n){var i=this;var a=new Je;var o=new Tu(this.manager);o.setResponseType("arraybuffer");o.load(t,function(t){var r=i._parser(t);if(!r)return;if(void 0!==r.image)a.image=r.image;else if(void 0!==r.data){a.image.width=r.width;a.image.height=r.height;a.image.data=r.data}a.wrapS=void 0!==r.wrapS?r.wrapS:_t;a.wrapT=void 0!==r.wrapT?r.wrapT:_t;a.magFilter=void 0!==r.magFilter?r.magFilter:St;a.minFilter=void 0!==r.minFilter?r.minFilter:At;a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1;if(void 0!==r.format)a.format=r.format;if(void 0!==r.type)a.type=r.type;if(void 0!==r.mipmaps)a.mipmaps=r.mipmaps;if(1===r.mipmapCount)a.minFilter=St;a.needsUpdate=true;if(e)e(a,r)},r,n);return a}});function Lu(t){this.manager=void 0!==t?t:Eu}Object.assign(Lu.prototype,{crossOrigin:"Anonymous",load:function(t,e,r,n){if(void 0===t)t="";if(void 0!==this.path)t=this.path+t;t=this.manager.resolveURL(t);var i=this;var a=wu.get(t);if(void 0!==a){i.manager.itemStart(t);setTimeout(function(){if(e)e(a);i.manager.itemEnd(t)},0);return a}var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");o.addEventListener("load",function(){wu.add(t,this);if(e)e(this);i.manager.itemEnd(t)},false);o.addEventListener("error",function(e){if(n)n(e);i.manager.itemEnd(t);i.manager.itemError(t)},false);if("data:"!==t.substr(0,5))if(void 0!==this.crossOrigin)o.crossOrigin=this.crossOrigin;i.manager.itemStart(t);o.src=t;return o},setCrossOrigin:function(t){this.crossOrigin=t;return this},setPath:function(t){this.path=t;return this}});function Cu(t){this.manager=void 0!==t?t:Eu}Object.assign(Cu.prototype,{crossOrigin:"Anonymous",load:function(t,e,r,n){var i=new Qe;var a=new Lu(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);var o=0;function s(r){a.load(t[r],function(t){i.images[r]=t;o++;if(6===o){i.needsUpdate=true;if(e)e(i)}},void 0,n)}for(var u=0;u<t.length;++u)s(u);return i},setCrossOrigin:function(t){this.crossOrigin=t;return this},setPath:function(t){this.path=t;return this}});function Pu(t){this.manager=void 0!==t?t:Eu}Object.assign(Pu.prototype,{crossOrigin:"Anonymous",load:function(t,e,r,n){var i=new Xe;var a=new Lu(this.manager);a.setCrossOrigin(this.crossOrigin);a.setPath(this.path);a.load(t,function(r){i.image=r;var n=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);i.format=n?Ht:jt;i.needsUpdate=true;if(void 0!==e)e(i)},r,n);return i},setCrossOrigin:function(t){this.crossOrigin=t;return this},setPath:function(t){this.path=t;return this}});function Iu(){this.type="Curve";this.arcLengthDivisions=200}Object.assign(Iu.prototype,{getPoint:function(){console.warn("THREE.Curve: .getPoint() not implemented.");return null},getPointAt:function(t,e){var r=this.getUtoTmapping(t);return this.getPoint(r,e)},getPoints:function(t){if(void 0===t)t=5;var e=[];for(var r=0;r<=t;r++)e.push(this.getPoint(r/t));return e},getSpacedPoints:function(t){if(void 0===t)t=5;var e=[];for(var r=0;r<=t;r++)e.push(this.getPointAt(r/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t)t=this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=false;var e=[];var r,n=this.getPoint(0);var i,a=0;e.push(0);for(i=1;i<=t;i++){r=this.getPoint(i/t);a+=r.distanceTo(n);e.push(a);n=r}this.cacheArcLengths=e;return e},updateArcLengths:function(){this.needsUpdate=true;this.getLengths()},getUtoTmapping:function(t,e){var r=this.getLengths();var n=0,i=r.length;var a;if(e)a=e;else a=t*r[i-1];var o=0,s=i-1,u;while(o<=s){n=Math.floor(o+(s-o)/2);u=r[n]-a;if(u<0)o=n+1;else if(u>0)s=n-1;else{s=n;break}}n=s;if(r[n]===a)return n/(i-1);var c=r[n];var l=r[n+1];var h=l-c;var f=(a-c)/h;var p=(n+f)/(i-1);return p},getTangent:function(t){var e=1e-4;var r=t-e;var n=t+e;if(r<0)r=0;if(n>1)n=1;var i=this.getPoint(r);var a=this.getPoint(n);var o=a.clone().sub(i);return o.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var r=new Ge;var n=[];var i=[];var a=[];var o=new Ge;var s=new He;var u,c,l;for(u=0;u<=t;u++){c=u/t;n[u]=this.getTangentAt(c);n[u].normalize()}i[0]=new Ge;a[0]=new Ge;var h=Number.MAX_VALUE;var f=Math.abs(n[0].x);var p=Math.abs(n[0].y);var d=Math.abs(n[0].z);if(f<=h){h=f;r.set(1,0,0)}if(p<=h){h=p;r.set(0,1,0)}if(d<=h)r.set(0,0,1);o.crossVectors(n[0],r).normalize();i[0].crossVectors(n[0],o);a[0].crossVectors(n[0],i[0]);for(u=1;u<=t;u++){i[u]=i[u-1].clone();a[u]=a[u-1].clone();o.crossVectors(n[u-1],n[u]);if(o.length()>Number.EPSILON){o.normalize();l=Math.acos(Fe.clamp(n[u-1].dot(n[u]),-1,1));i[u].applyMatrix4(s.makeRotationAxis(o,l))}a[u].crossVectors(n[u],i[u])}if(true===e){l=Math.acos(Fe.clamp(i[0].dot(i[t]),-1,1));l/=t;if(n[0].dot(o.crossVectors(i[0],i[t]))>0)l=-l;for(u=1;u<=t;u++){i[u].applyMatrix4(s.makeRotationAxis(n[u],l*u));a[u].crossVectors(n[u],i[u])}}return{tangents:n,normals:i,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.arcLengthDivisions=t.arcLengthDivisions;return this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};t.arcLengthDivisions=this.arcLengthDivisions;t.type=this.type;return t},fromJSON:function(t){this.arcLengthDivisions=t.arcLengthDivisions;return this}});function Ou(t,e,r,n,i,a,o,s){Iu.call(this);this.type="EllipseCurve";this.aX=t||0;this.aY=e||0;this.xRadius=r||1;this.yRadius=n||1;this.aStartAngle=i||0;this.aEndAngle=a||2*Math.PI;this.aClockwise=o||false;this.aRotation=s||0}Ou.prototype=Object.create(Iu.prototype);Ou.prototype.constructor=Ou;Ou.prototype.isEllipseCurve=true;Ou.prototype.getPoint=function(t,e){var r=e||new ke;var n=2*Math.PI;var i=this.aEndAngle-this.aStartAngle;var a=Math.abs(i)<Number.EPSILON;while(i<0)i+=n;while(i>n)i-=n;if(i<Number.EPSILON)if(a)i=0;else i=n;if(true===this.aClockwise&&!a)if(i===n)i=-n;else i-=n;var o=this.aStartAngle+t*i;var s=this.aX+this.xRadius*Math.cos(o);var u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation);var l=Math.sin(this.aRotation);var h=s-this.aX;var f=u-this.aY;s=h*c-f*l+this.aX;u=h*l+f*c+this.aY}return r.set(s,u)};Ou.prototype.copy=function(t){Iu.prototype.copy.call(this,t);this.aX=t.aX;this.aY=t.aY;this.xRadius=t.xRadius;this.yRadius=t.yRadius;this.aStartAngle=t.aStartAngle;this.aEndAngle=t.aEndAngle;this.aClockwise=t.aClockwise;this.aRotation=t.aRotation;return this};Ou.prototype.toJSON=function(){var t=Iu.prototype.toJSON.call(this);t.aX=this.aX;t.aY=this.aY;t.xRadius=this.xRadius;t.yRadius=this.yRadius;t.aStartAngle=this.aStartAngle;t.aEndAngle=this.aEndAngle;t.aClockwise=this.aClockwise;t.aRotation=this.aRotation;return t};Ou.prototype.fromJSON=function(t){Iu.prototype.fromJSON.call(this,t);this.aX=t.aX;this.aY=t.aY;this.xRadius=t.xRadius;this.yRadius=t.yRadius;this.aStartAngle=t.aStartAngle;this.aEndAngle=t.aEndAngle;this.aClockwise=t.aClockwise;this.aRotation=t.aRotation;return this};function Nu(t,e,r,n,i,a){Ou.call(this,t,e,r,r,n,i,a);this.type="ArcCurve"}Nu.prototype=Object.create(Ou.prototype);Nu.prototype.constructor=Nu;Nu.prototype.isArcCurve=true;function Uu(){var t=0,e=0,r=0,n=0;function i(i,a,o,s){t=i;e=o;r=-3*i+3*a-2*o-s;n=2*i-2*a+o+s}return{initCatmullRom:function(t,e,r,n,a){i(e,r,a*(r-t),a*(n-e))},initNonuniformCatmullRom:function(t,e,r,n,a,o,s){var u=(e-t)/a-(r-t)/(a+o)+(r-e)/o;var c=(r-e)/o-(n-e)/(o+s)+(n-r)/s;u*=o;c*=o;i(e,r,u,c)},calc:function(i){var a=i*i;var o=a*i;return t+e*i+r*a+n*o}}}var Du=new Ge;var zu=new Uu;var Bu=new Uu;var Fu=new Uu;function ku(t,e,r,n){Iu.call(this);this.type="CatmullRomCurve3";this.points=t||[];this.closed=e||false;this.curveType=r||"centripetal";this.tension=n||.5}ku.prototype=Object.create(Iu.prototype);ku.prototype.constructor=ku;ku.prototype.isCatmullRomCurve3=true;ku.prototype.getPoint=function(t,e){var r=e||new Ge;var n=this.points;var i=n.length;var a=(i-(this.closed?0:1))*t;var o=Math.floor(a);var s=a-o;if(this.closed)o+=o>0?0:(Math.floor(Math.abs(o)/n.length)+1)*n.length;else if(0===s&&o===i-1){o=i-2;s=1}var u,c,l,h;if(this.closed||o>0)u=n[(o-1)%i];else{Du.subVectors(n[0],n[1]).add(n[0]);u=Du}c=n[o%i];l=n[(o+1)%i];if(this.closed||o+2<i)h=n[(o+2)%i];else{Du.subVectors(n[i-1],n[i-2]).add(n[i-1]);h=Du}if("centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25;var p=Math.pow(u.distanceToSquared(c),f);var d=Math.pow(c.distanceToSquared(l),f);var v=Math.pow(l.distanceToSquared(h),f);if(d<1e-4)d=1;if(p<1e-4)p=d;if(v<1e-4)v=d;zu.initNonuniformCatmullRom(u.x,c.x,l.x,h.x,p,d,v);Bu.initNonuniformCatmullRom(u.y,c.y,l.y,h.y,p,d,v);Fu.initNonuniformCatmullRom(u.z,c.z,l.z,h.z,p,d,v)}else if("catmullrom"===this.curveType){zu.initCatmullRom(u.x,c.x,l.x,h.x,this.tension);Bu.initCatmullRom(u.y,c.y,l.y,h.y,this.tension);Fu.initCatmullRom(u.z,c.z,l.z,h.z,this.tension)}r.set(zu.calc(s),Bu.calc(s),Fu.calc(s));return r};ku.prototype.copy=function(t){Iu.prototype.copy.call(this,t);this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push(n.clone())}this.closed=t.closed;this.curveType=t.curveType;this.tension=t.tension;return this};ku.prototype.toJSON=function(){var t=Iu.prototype.toJSON.call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var n=this.points[e];t.points.push(n.toArray())}t.closed=this.closed;t.curveType=this.curveType;t.tension=this.tension;return t};ku.prototype.fromJSON=function(t){Iu.prototype.fromJSON.call(this,t);this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push((new Ge).fromArray(n))}this.closed=t.closed;this.curveType=t.curveType;this.tension=t.tension;return this};function Hu(t,e,r,n,i){var a=.5*(n-e);var o=.5*(i-r);var s=t*t;var u=t*s;return(2*r-2*n+a+o)*u+(-3*r+3*n-2*a-o)*s+a*t+r}function ju(t,e){var r=1-t;return r*r*e}function Gu(t,e){return 2*(1-t)*t*e}function Vu(t,e){return t*t*e}function Wu(t,e,r,n){return ju(t,e)+Gu(t,r)+Vu(t,n)}function Xu(t,e){var r=1-t;return r*r*r*e}function qu(t,e){var r=1-t;return 3*r*r*t*e}function Yu(t,e){return 3*(1-t)*t*t*e}function Zu(t,e){return t*t*t*e}function Ju(t,e,r,n,i){return Xu(t,e)+qu(t,r)+Yu(t,n)+Zu(t,i)}function Qu(t,e,r,n){Iu.call(this);this.type="CubicBezierCurve";this.v0=t||new ke;this.v1=e||new ke;this.v2=r||new ke;this.v3=n||new ke}Qu.prototype=Object.create(Iu.prototype);Qu.prototype.constructor=Qu;Qu.prototype.isCubicBezierCurve=true;Qu.prototype.getPoint=function(t,e){var r=e||new ke;var n=this.v0,i=this.v1,a=this.v2,o=this.v3;r.set(Ju(t,n.x,i.x,a.x,o.x),Ju(t,n.y,i.y,a.y,o.y));return r};Qu.prototype.copy=function(t){Iu.prototype.copy.call(this,t);this.v0.copy(t.v0);this.v1.copy(t.v1);this.v2.copy(t.v2);this.v3.copy(t.v3);return this};Qu.prototype.toJSON=function(){var t=Iu.prototype.toJSON.call(this);t.v0=this.v0.toArray();t.v1=this.v1.toArray();t.v2=this.v2.toArray();t.v3=this.v3.toArray();return t};Qu.prototype.fromJSON=function(t){Iu.prototype.fromJSON.call(this,t);this.v0.fromArray(t.v0);this.v1.fromArray(t.v1);this.v2.fromArray(t.v2);this.v3.fromArray(t.v3);return this};function Ku(t,e,r,n){Iu.call(this);this.type="CubicBezierCurve3";this.v0=t||new Ge;this.v1=e||new Ge;this.v2=r||new Ge;this.v3=n||new Ge}Ku.prototype=Object.create(Iu.prototype);Ku.prototype.constructor=Ku;Ku.prototype.isCubicBezierCurve3=true;Ku.prototype.getPoint=function(t,e){var r=e||new Ge;var n=this.v0,i=this.v1,a=this.v2,o=this.v3;r.set(Ju(t,n.x,i.x,a.x,o.x),Ju(t,n.y,i.y,a.y,o.y),Ju(t,n.z,i.z,a.z,o.z));return r};Ku.prototype.copy=function(t){Iu.prototype.copy.call(this,t);this.v0.copy(t.v0);this.v1.copy(t.v1);this.v2.copy(t.v2);this.v3.copy(t.v3);return this};Ku.prototype.toJSON=function(){var t=Iu.prototype.toJSON.call(this);t.v0=this.v0.toArray();t.v1=this.v1.toArray();t.v2=this.v2.toArray();t.v3=this.v3.toArray();return t};Ku.prototype.fromJSON=function(t){Iu.prototype.fromJSON.call(this,t);this.v0.fromArray(t.v0);this.v1.fromArray(t.v1);this.v2.fromArray(t.v2);this.v3.fromArray(t.v3);return this};function $u(t,e){Iu.call(this);this.type="LineCurve";this.v1=t||new ke;this.v2=e||new ke}$u.prototype=Object.create(Iu.prototype);$u.prototype.constructor=$u;$u.prototype.isLineCurve=true;$u.prototype.getPoint=function(t,e){var r=e||new ke;if(1===t)r.copy(this.v2);else{r.copy(this.v2).sub(this.v1);r.multiplyScalar(t).add(this.v1)}return r};$u.prototype.getPointAt=function(t,e){return this.getPoint(t,e)};$u.prototype.getTangent=function(){var t=this.v2.clone().sub(this.v1);return t.normalize()};$u.prototype.copy=function(t){Iu.prototype.copy.call(this,t);this.v1.copy(t.v1);this.v2.copy(t.v2);return this};$u.prototype.toJSON=function(){var t=Iu.prototype.toJSON.call(this);t.v1=this.v1.toArray();t.v2=this.v2.toArray();return t};$u.prototype.fromJSON=function(t){Iu.prototype.fromJSON.call(this,t);this.v1.fromArray(t.v1);this.v2.fromArray(t.v2);return this};function tc(t,e){Iu.call(this);this.type="LineCurve3";this.v1=t||new Ge;this.v2=e||new Ge}tc.prototype=Object.create(Iu.prototype);tc.prototype.constructor=tc;tc.prototype.isLineCurve3=true;tc.prototype.getPoint=function(t,e){var r=e||new Ge;if(1===t)r.copy(this.v2);else{r.copy(this.v2).sub(this.v1);r.multiplyScalar(t).add(this.v1)}return r};tc.prototype.getPointAt=function(t,e){return this.getPoint(t,e)};tc.prototype.copy=function(t){Iu.prototype.copy.call(this,t);this.v1.copy(t.v1);this.v2.copy(t.v2);return this};tc.prototype.toJSON=function(){var t=Iu.prototype.toJSON.call(this);t.v1=this.v1.toArray();t.v2=this.v2.toArray();return t};tc.prototype.fromJSON=function(t){Iu.prototype.fromJSON.call(this,t);this.v1.fromArray(t.v1);this.v2.fromArray(t.v2);return this};function ec(t,e,r){Iu.call(this);this.type="QuadraticBezierCurve";this.v0=t||new ke;this.v1=e||new ke;this.v2=r||new ke}ec.prototype=Object.create(Iu.prototype);ec.prototype.constructor=ec;ec.prototype.isQuadraticBezierCurve=true;ec.prototype.getPoint=function(t,e){var r=e||new ke;var n=this.v0,i=this.v1,a=this.v2;r.set(Wu(t,n.x,i.x,a.x),Wu(t,n.y,i.y,a.y));return r};ec.prototype.copy=function(t){Iu.prototype.copy.call(this,t);this.v0.copy(t.v0);this.v1.copy(t.v1);this.v2.copy(t.v2);return this};ec.prototype.toJSON=function(){var t=Iu.prototype.toJSON.call(this);t.v0=this.v0.toArray();t.v1=this.v1.toArray();t.v2=this.v2.toArray();return t};ec.prototype.fromJSON=function(t){Iu.prototype.fromJSON.call(this,t);this.v0.fromArray(t.v0);this.v1.fromArray(t.v1);this.v2.fromArray(t.v2);return this};function rc(t,e,r){Iu.call(this);this.type="QuadraticBezierCurve3";this.v0=t||new Ge;this.v1=e||new Ge;this.v2=r||new Ge}rc.prototype=Object.create(Iu.prototype);rc.prototype.constructor=rc;rc.prototype.isQuadraticBezierCurve3=true;rc.prototype.getPoint=function(t,e){var r=e||new Ge;var n=this.v0,i=this.v1,a=this.v2;r.set(Wu(t,n.x,i.x,a.x),Wu(t,n.y,i.y,a.y),Wu(t,n.z,i.z,a.z));return r};rc.prototype.copy=function(t){Iu.prototype.copy.call(this,t);this.v0.copy(t.v0);this.v1.copy(t.v1);this.v2.copy(t.v2);return this};rc.prototype.toJSON=function(){var t=Iu.prototype.toJSON.call(this);t.v0=this.v0.toArray();t.v1=this.v1.toArray();t.v2=this.v2.toArray();return t};rc.prototype.fromJSON=function(t){Iu.prototype.fromJSON.call(this,t);this.v0.fromArray(t.v0);this.v1.fromArray(t.v1);this.v2.fromArray(t.v2);return this};function nc(t){Iu.call(this);this.type="SplineCurve";this.points=t||[]}nc.prototype=Object.create(Iu.prototype);nc.prototype.constructor=nc;nc.prototype.isSplineCurve=true;nc.prototype.getPoint=function(t,e){var r=e||new ke;var n=this.points;var i=(n.length-1)*t;var a=Math.floor(i);var o=i-a;var s=n[0===a?a:a-1];var u=n[a];var c=n[a>n.length-2?n.length-1:a+1];var l=n[a>n.length-3?n.length-1:a+2];r.set(Hu(o,s.x,u.x,c.x,l.x),Hu(o,s.y,u.y,c.y,l.y));return r};nc.prototype.copy=function(t){Iu.prototype.copy.call(this,t);this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push(n.clone())}return this};nc.prototype.toJSON=function(){var t=Iu.prototype.toJSON.call(this);t.points=[];for(var e=0,r=this.points.length;e<r;e++){var n=this.points[e];t.points.push(n.toArray())}return t};nc.prototype.fromJSON=function(t){Iu.prototype.fromJSON.call(this,t);this.points=[];for(var e=0,r=t.points.length;e<r;e++){var n=t.points[e];this.points.push((new ke).fromArray(n))}return this};var ic=Object.freeze({ArcCurve:Nu,CatmullRomCurve3:ku,CubicBezierCurve:Qu,CubicBezierCurve3:Ku,EllipseCurve:Ou,LineCurve:$u,LineCurve3:tc,QuadraticBezierCurve:ec,QuadraticBezierCurve3:rc,SplineCurve:nc});function ac(){Iu.call(this);this.type="CurvePath";this.curves=[];this.autoClose=false}ac.prototype=Object.assign(Object.create(Iu.prototype),{constructor:ac,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0);var e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e))this.curves.push(new $u(e,t))},getPoint:function(t){var e=t*this.getLength();var r=this.getCurveLengths();var n=0;while(n<r.length){if(r[n]>=e){var i=r[n]-e;var a=this.curves[n];var o=a.getLength();var s=0===o?0:1-i/o;return a.getPointAt(s)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=true;this.cacheLengths=null;this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;var t=[],e=0;for(var r=0,n=this.curves.length;r<n;r++){e+=this.curves[r].getLength();t.push(e)}this.cacheLengths=t;return t},getSpacedPoints:function(t){if(void 0===t)t=40;var e=[];for(var r=0;r<=t;r++)e.push(this.getPoint(r/t));if(this.autoClose)e.push(e[0]);return e},getPoints:function(t){t=t||12;var e=[],r;for(var n=0,i=this.curves;n<i.length;n++){var a=i[n];var o=a&&a.isEllipseCurve?2*t:a&&a.isLineCurve?1:a&&a.isSplineCurve?t*a.points.length:t;var s=a.getPoints(o);for(var u=0;u<s.length;u++){var c=s[u];if(r&&r.equals(c))continue;e.push(c);r=c}}if(this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0]))e.push(e[0]);return e},copy:function(t){Iu.prototype.copy.call(this,t);this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var n=t.curves[e];this.curves.push(n.clone())}this.autoClose=t.autoClose;return this},toJSON:function(){var t=Iu.prototype.toJSON.call(this);t.autoClose=this.autoClose;t.curves=[];for(var e=0,r=this.curves.length;e<r;e++){var n=this.curves[e];t.curves.push(n.toJSON())}return t},fromJSON:function(t){Iu.prototype.fromJSON.call(this,t);this.autoClose=t.autoClose;this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var n=t.curves[e];this.curves.push((new ic[n.type]).fromJSON(n))}return this}});function oc(t){ac.call(this);this.type="Path";this.currentPoint=new ke;if(t)this.setFromPoints(t)}oc.prototype=Object.assign(Object.create(ac.prototype),{constructor:oc,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,r=t.length;e<r;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var r=new $u(this.currentPoint.clone(),new ke(t,e));this.curves.push(r);this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,r,n){var i=new ec(this.currentPoint.clone(),new ke(t,e),new ke(r,n));this.curves.push(i);this.currentPoint.set(r,n)},bezierCurveTo:function(t,e,r,n,i,a){var o=new Qu(this.currentPoint.clone(),new ke(t,e),new ke(r,n),new ke(i,a));this.curves.push(o);this.currentPoint.set(i,a)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t);var r=new nc(e);this.curves.push(r);this.currentPoint.copy(t[t.length-1])},arc:function(t,e,r,n,i,a){var o=this.currentPoint.x;var s=this.currentPoint.y;this.absarc(t+o,e+s,r,n,i,a)},absarc:function(t,e,r,n,i,a){this.absellipse(t,e,r,r,n,i,a)},ellipse:function(t,e,r,n,i,a,o,s){var u=this.currentPoint.x;var c=this.currentPoint.y;this.absellipse(t+u,e+c,r,n,i,a,o,s)},absellipse:function(t,e,r,n,i,a,o,s){var u=new Ou(t,e,r,n,i,a,o,s);if(this.curves.length>0){var c=u.getPoint(0);if(!c.equals(this.currentPoint))this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);this.currentPoint.copy(l)},copy:function(t){ac.prototype.copy.call(this,t);this.currentPoint.copy(t.currentPoint);return this},toJSON:function(){var t=ac.prototype.toJSON.call(this);t.currentPoint=this.currentPoint.toArray();return t},fromJSON:function(t){ac.prototype.fromJSON.call(this,t);this.currentPoint.fromArray(t.currentPoint);return this}});function sc(t){oc.call(this,t);this.uuid=Fe.generateUUID();this.type="Shape";this.holes=[]}sc.prototype=Object.assign(Object.create(oc.prototype),{constructor:sc,getPointsHoles:function(t){var e=[];for(var r=0,n=this.holes.length;r<n;r++)e[r]=this.holes[r].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){oc.prototype.copy.call(this,t);this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var n=t.holes[e];this.holes.push(n.clone())}return this},toJSON:function(){var t=oc.prototype.toJSON.call(this);t.uuid=this.uuid;t.holes=[];for(var e=0,r=this.holes.length;e<r;e++){var n=this.holes[e];t.holes.push(n.toJSON())}return t},fromJSON:function(t){oc.prototype.fromJSON.call(this,t);this.uuid=t.uuid;this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var n=t.holes[e];this.holes.push((new oc).fromJSON(n))}return this}});function uc(t,e){ua.call(this);this.type="Light";this.color=new kr(t);this.intensity=void 0!==e?e:1;this.receiveShadow=void 0}uc.prototype=Object.assign(Object.create(ua.prototype),{constructor:uc,isLight:true,copy:function(t){ua.prototype.copy.call(this,t);this.color.copy(t.color);this.intensity=t.intensity;return this},toJSON:function(t){var e=ua.prototype.toJSON.call(this,t);e.object.color=this.color.getHex();e.object.intensity=this.intensity;if(void 0!==this.groundColor)e.object.groundColor=this.groundColor.getHex();if(void 0!==this.distance)e.object.distance=this.distance;if(void 0!==this.angle)e.object.angle=this.angle;if(void 0!==this.decay)e.object.decay=this.decay;if(void 0!==this.penumbra)e.object.penumbra=this.penumbra;if(void 0!==this.shadow)e.object.shadow=this.shadow.toJSON();return e}});function cc(t,e,r){uc.call(this,t,r);this.type="HemisphereLight";this.castShadow=void 0;this.position.copy(ua.DefaultUp);this.updateMatrix();this.groundColor=new kr(e)}cc.prototype=Object.assign(Object.create(uc.prototype),{constructor:cc,isHemisphereLight:true,copy:function(t){uc.prototype.copy.call(this,t);this.groundColor.copy(t.groundColor);return this}});function lc(t){this.camera=t;this.bias=0;this.radius=1;this.mapSize=new ke(512,512);this.map=null;this.matrix=new He}Object.assign(lc.prototype,{copy:function(t){this.camera=t.camera.clone();this.bias=t.bias;this.radius=t.radius;this.mapSize.copy(t.mapSize);return this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};if(0!==this.bias)t.bias=this.bias;if(1!==this.radius)t.radius=this.radius;if(512!==this.mapSize.x||512!==this.mapSize.y)t.mapSize=this.mapSize.toArray();t.camera=this.camera.toJSON(false).object;delete t.camera.matrix;return t}});function hc(){lc.call(this,new go(50,1,.5,500))}hc.prototype=Object.assign(Object.create(lc.prototype),{constructor:hc,isSpotLightShadow:true,update:function(t){var e=this.camera;var r=2*Fe.RAD2DEG*t.angle;var n=this.mapSize.width/this.mapSize.height;var i=t.distance||e.far;if(r!==e.fov||n!==e.aspect||i!==e.far){e.fov=r;e.aspect=n;e.far=i;e.updateProjectionMatrix()}}});function fc(t,e,r,n,i,a){uc.call(this,t,e);this.type="SpotLight";this.position.copy(ua.DefaultUp);this.updateMatrix();this.target=new ua;Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}});this.distance=void 0!==r?r:0;this.angle=void 0!==n?n:Math.PI/3;this.penumbra=void 0!==i?i:0;this.decay=void 0!==a?a:1;this.shadow=new hc}fc.prototype=Object.assign(Object.create(uc.prototype),{constructor:fc,isSpotLight:true,copy:function(t){uc.prototype.copy.call(this,t);this.distance=t.distance;this.angle=t.angle;this.penumbra=t.penumbra;this.decay=t.decay;this.target=t.target.clone();this.shadow=t.shadow.clone();return this}});function pc(t,e,r,n){uc.call(this,t,e);this.type="PointLight";Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}});this.distance=void 0!==r?r:0;this.decay=void 0!==n?n:1;this.shadow=new lc(new go(90,1,.5,500))}pc.prototype=Object.assign(Object.create(uc.prototype),{constructor:pc,isPointLight:true,copy:function(t){uc.prototype.copy.call(this,t);this.distance=t.distance;this.decay=t.decay;this.shadow=t.shadow.clone();return this}});function dc(){lc.call(this,new la(-5,5,5,-5,.5,500))}dc.prototype=Object.assign(Object.create(lc.prototype),{constructor:dc});function vc(t,e){uc.call(this,t,e);this.type="DirectionalLight";this.position.copy(ua.DefaultUp);this.updateMatrix();this.target=new ua;this.shadow=new dc}vc.prototype=Object.assign(Object.create(uc.prototype),{constructor:vc,isDirectionalLight:true,copy:function(t){uc.prototype.copy.call(this,t);this.target=t.target.clone();this.shadow=t.shadow.clone();return this}});function mc(t,e){uc.call(this,t,e);this.type="AmbientLight";this.castShadow=void 0}mc.prototype=Object.assign(Object.create(uc.prototype),{constructor:mc,isAmbientLight:true});function gc(t,e,r,n){uc.call(this,t,e);this.type="RectAreaLight";this.width=void 0!==r?r:10;this.height=void 0!==n?n:10}gc.prototype=Object.assign(Object.create(uc.prototype),{constructor:gc,isRectAreaLight:true,copy:function(t){uc.prototype.copy.call(this,t);this.width=t.width;this.height=t.height;return this},toJSON:function(t){var e=uc.prototype.toJSON.call(this,t);e.object.width=this.width;e.object.height=this.height;return e}});function yc(t,e,r,n){Lc.call(this,t,e,r,n)}yc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:yc,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:_e,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function xc(t,e,r){Lc.call(this,t,e,r)}xc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:xc,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:_e,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function _c(t,e,r,n){this.parameterPositions=t;this._cachedIndex=0;this.resultBuffer=void 0!==n?n:new e.constructor(r);this.sampleValues=e;this.valueSize=r}Object.assign(_c.prototype,{evaluate:function(t){var e=this.parameterPositions,r=this._cachedIndex,n=e[r],i=e[r-1];t:{e:{var a;r:{n:if(!(t<n)){for(var o=r+2;;){if(void 0===n){if(t<i)break n;r=e.length;this._cachedIndex=r;return this.afterEnd_(r-1,t,i)}if(r===o)break;i=n;n=e[++r];if(t<n)break e}a=e.length;break r}if(!(t>=i)){var s=e[1];if(t<s){r=2;i=s}for(var o=r-2;;){if(void 0===i){this._cachedIndex=0;return this.beforeStart_(0,t,n)}if(r===o)break;n=i;i=e[--r-1];if(t>=i)break e}a=r;r=0;break r}break t}while(r<a){var u=r+a>>>1;if(t<e[u])a=u;else r=u+1}n=e[r];i=e[r-1];if(void 0===i){this._cachedIndex=0;return this.beforeStart_(0,t,n)}if(void 0===n){r=e.length;this._cachedIndex=r;return this.afterEnd_(r-1,i,t)}}this._cachedIndex=r;this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){var e=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=t*n;for(var a=0;a!==n;++a)e[a]=r[i+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(_c.prototype,{beforeStart_:_c.prototype.copySampleValue_,afterEnd_:_c.prototype.copySampleValue_});function bc(t,e,r,n){_c.call(this,t,e,r,n)}bc.prototype=Object.assign(Object.create(_c.prototype),{constructor:bc,interpolate_:function(t,e,r,n){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=(r-e)/(n-e);for(var c=s+o;s!==c;s+=4)je.slerpFlat(i,0,a,s-o,a,s,u);return i}});function wc(t,e,r,n){Lc.call(this,t,e,r,n)}wc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:wc,ValueTypeName:"quaternion",DefaultInterpolation:be,InterpolantFactoryMethodLinear:function(t){return new bc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0});function Mc(t,e,r,n){Lc.call(this,t,e,r,n)}Mc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Mc,ValueTypeName:"color"});function Ec(t,e,r,n){Lc.call(this,t,e,r,n)}Ec.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Ec,ValueTypeName:"number"});function Sc(t,e,r,n){_c.call(this,t,e,r,n);this._weightPrev=-0;this._offsetPrev=-0;this._weightNext=-0;this._offsetNext=-0}Sc.prototype=Object.assign(Object.create(_c.prototype),{constructor:Sc,DefaultSettings_:{endingStart:Me,endingEnd:Me},intervalChanged_:function(t,e,r){var n=this.parameterPositions,i=t-2,a=t+1,o=n[i],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case Ee:i=t;o=2*e-r;break;case Se:i=n.length-2;o=e+n[i]-n[i+1];break;default:i=t;o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case Ee:a=t;s=2*r-e;break;case Se:a=1;s=r+n[1]-n[0];break;default:a=t-1;s=e}var u=.5*(r-e),c=this.valueSize;this._weightPrev=u/(e-o);this._weightNext=u/(s-r);this._offsetPrev=i*c;this._offsetNext=a*c},interpolate_:function(t,e,r,n){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(r-e)/(n-e),d=p*p,v=d*p;var m=-h*v+2*h*d-h*p;var g=(1+h)*v+(-1.5-2*h)*d+(-.5+h)*p+1;var y=(-1-f)*v+(1.5+f)*d+.5*p;var x=f*v-f*d;for(var _=0;_!==o;++_)i[_]=m*a[c+_]+g*a[u+_]+y*a[s+_]+x*a[l+_];return i}});function Tc(t,e,r,n){_c.call(this,t,e,r,n)}Tc.prototype=Object.assign(Object.create(_c.prototype),{constructor:Tc,interpolate_:function(t,e,r,n){var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,c=(r-e)/(n-e),l=1-c;for(var h=0;h!==o;++h)i[h]=a[u+h]*l+a[s+h]*c;return i}});function Ac(t,e,r,n){_c.call(this,t,e,r,n)}Ac.prototype=Object.assign(Object.create(_c.prototype),{constructor:Ac,interpolate_:function(t){return this.copySampleValue_(t-1)}});var Rc={arraySlice:function(t,e,r){if(Rc.isTypedArray(t))return new t.constructor(t.subarray(e,void 0!==r?r:t.length));return t.slice(e,r)},convertArray:function(t,e,r){if(!t||!r&&t.constructor===e)return t;if("number"===typeof e.BYTES_PER_ELEMENT)return new e(t);return Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,r){return t[e]-t[r]}var r=t.length;var n=new Array(r);for(var i=0;i!==r;++i)n[i]=i;n.sort(e);return n},sortedArray:function(t,e,r){var n=t.length;var i=new t.constructor(n);for(var a=0,o=0;o!==n;++a){var s=r[a]*e;for(var u=0;u!==e;++u)i[o++]=t[s+u]}return i},flattenJSON:function(t,e,r,n){var i=1,a=t[0];while(void 0!==a&&void 0===a[n])a=t[i++];if(void 0===a)return;var o=a[n];if(void 0===o)return;if(Array.isArray(o))do{o=a[n];if(void 0!==o){e.push(a.time);r.push.apply(r,o)}a=t[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[n];if(void 0!==o){e.push(a.time);o.toArray(r,r.length)}a=t[i++]}while(void 0!==a);else do{o=a[n];if(void 0!==o){e.push(a.time);r.push(o)}a=t[i++]}while(void 0!==a)}};function Lc(t,e,r,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t;this.times=Rc.convertArray(e,this.TimeBufferType);this.values=Rc.convertArray(r,this.ValueBufferType);this.setInterpolation(n||this.DefaultInterpolation);this.validate();this.optimize()}Object.assign(Lc,{parse:function(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=Lc._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var r=[],n=[];Rc.flattenJSON(t.keys,r,n,"value");t.times=r;t.values=n}if(void 0!==e.parse)return e.parse(t);else return new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e=t.constructor;var r;if(void 0!==e.toJSON)r=e.toJSON(t);else{r={name:t.name,times:Rc.convertArray(t.times,Array),values:Rc.convertArray(t.values,Array)};var n=t.getInterpolation();if(n!==t.DefaultInterpolation)r.interpolation=n}r.type=t.ValueTypeName;return r},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ec;case"vector":case"vector2":case"vector3":case"vector4":return Cc;case"color":return Mc;case"quaternion":return wc;case"bool":case"boolean":return xc;case"string":return yc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}});Object.assign(Lc.prototype,{constructor:Lc,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:be,InterpolantFactoryMethodDiscrete:function(t){return new Ac(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Tc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Sc(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case _e:e=this.InterpolantFactoryMethodDiscrete;break;case be:e=this.InterpolantFactoryMethodLinear;break;case we:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);console.warn("THREE.KeyframeTrack:",r);return}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _e;case this.InterpolantFactoryMethodLinear:return be;case this.InterpolantFactoryMethodSmooth:return we}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t){var e=this.times;for(var r=0,n=e.length;r!==n;++r)e[r]+=t}return this},scale:function(t){if(1!==t){var e=this.times;for(var r=0,n=e.length;r!==n;++r)e[r]*=t}return this},trim:function(t,e){var r=this.times,n=r.length,i=0,a=n-1;while(i!==n&&r[i]<t)++i;while(-1!==a&&r[a]>e)--a;++a;if(0!==i||a!==n){if(i>=a)a=Math.max(a,1),i=a-1;var o=this.getValueSize();this.times=Rc.arraySlice(r,i,a);this.values=Rc.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var t=true;var e=this.getValueSize();if(e-Math.floor(e)!==0){console.error("THREE.KeyframeTrack: Invalid value size in track.",this);t=false}var r=this.times,n=this.values,i=r.length;if(0===i){console.error("THREE.KeyframeTrack: Track is empty.",this);t=false}var a=null;for(var o=0;o!==i;o++){var s=r[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s);t=false;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a);t=false;break}a=s}if(void 0!==n)if(Rc.isTypedArray(n))for(var o=0,u=n.length;o!==u;++o){var c=n[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c);t=false;break}}return t},optimize:function(){var t=this.times,e=this.values,r=this.getValueSize(),n=this.getInterpolation()===we,i=1,a=t.length-1;for(var o=1;o<a;++o){var s=false;var u=t[o];var c=t[o+1];if(u!==c&&(1!==o||u!==u[0]))if(!n){var l=o*r,h=l-r,f=l+r;for(var p=0;p!==r;++p){var d=e[l+p];if(d!==e[h+p]||d!==e[f+p]){s=true;break}}}else s=true;if(s){if(o!==i){t[i]=t[o];var v=o*r,m=i*r;for(var p=0;p!==r;++p)e[m+p]=e[v+p]}++i}}if(a>0){t[i]=t[a];for(var v=a*r,m=i*r,p=0;p!==r;++p)e[m+p]=e[v+p];++i}if(i!==t.length){this.times=Rc.arraySlice(t,0,i);this.values=Rc.arraySlice(e,0,i*r)}return this}});function Cc(t,e,r,n){Lc.call(this,t,e,r,n)}Cc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Cc,ValueTypeName:"vector"});function Pc(t,e,r){this.name=t;this.tracks=r;this.duration=void 0!==e?e:-1;this.uuid=Fe.generateUUID();if(this.duration<0)this.resetDuration();this.optimize()}Object.assign(Pc,{parse:function(t){var e=[],r=t.tracks,n=1/(t.fps||1);for(var i=0,a=r.length;i!==a;++i)e.push(Lc.parse(r[i]).scale(n));return new Pc(t.name,t.duration,e)},toJSON:function(t){var e=[],r=t.tracks;var n={name:t.name,duration:t.duration,tracks:e};for(var i=0,a=r.length;i!==a;++i)e.push(Lc.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(t,e,r,n){var i=e.length;var a=[];for(var o=0;o<i;o++){var s=[];var u=[];s.push((o+i-1)%i,o,(o+1)%i);u.push(0,1,0);var c=Rc.getKeyframeOrder(s);s=Rc.sortedArray(s,1,c);u=Rc.sortedArray(u,1,c);if(!n&&0===s[0]){s.push(i);u.push(u[0])}a.push(new Ec(".morphTargetInfluences["+e[o].name+"]",s,u).scale(1/r))}return new Pc(t,-1,a)},findByName:function(t,e){var r=t;if(!Array.isArray(t)){var n=t;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===e)return r[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,r){var n={};var i=/^([\w-]*?)([\d]+)$/;for(var a=0,o=t.length;a<o;a++){var s=t[a];var u=s.name.match(i);if(u&&u.length>1){var c=u[1];var l=n[c];if(!l)n[c]=l=[];l.push(s)}}var h=[];for(var c in n)h.push(Pc.CreateFromMorphTargetSequence(c,n[c],e,r));return h},parseAnimation:function(t,e){if(!t){console.error("THREE.AnimationClip: No animation in JSONLoader data.");return null}var r=function(t,e,r,n,i){if(0!==r.length){var a=[];var o=[];Rc.flattenJSON(r,a,o,n);if(0!==a.length)i.push(new t(e,a,o))}};var n=[];var i=t.name||"default";var a=t.length||-1;var o=t.fps||30;var s=t.hierarchy||[];for(var u=0;u<s.length;u++){var c=s[u].keys;if(!c||0===c.length)continue;if(c[0].morphTargets){var l={};for(var h=0;h<c.length;h++)if(c[h].morphTargets)for(var f=0;f<c[h].morphTargets.length;f++)l[c[h].morphTargets[f]]=-1;for(var p in l){var d=[];var v=[];for(var f=0;f!==c[h].morphTargets.length;++f){var m=c[h];d.push(m.time);v.push(m.morphTarget===p?1:0)}n.push(new Ec(".morphTargetInfluence["+p+"]",d,v))}a=l.length*(o||1)}else{var g=".bones["+e[u].name+"]";r(Cc,g+".position",c,"pos",n);r(wc,g+".quaternion",c,"rot",n);r(Cc,g+".scale",c,"scl",n)}}if(0===n.length)return null;var y=new Pc(i,a,n);return y}});Object.assign(Pc.prototype,{resetDuration:function(){var t=this.tracks,e=0;for(var r=0,n=t.length;r!==n;++r){var i=this.tracks[r];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}});function Ic(t){this.manager=void 0!==t?t:Eu;this.textures={}}Object.assign(Ic.prototype,{load:function(t,e,r,n){var i=this;var a=new Tu(i.manager);a.load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},setTextures:function(t){this.textures=t},parse:function(t){var e=this.textures;function r(t){if(void 0===e[t])console.warn("THREE.MaterialLoader: Undefined texture",t);return e[t]}var n=new bu[t.type];if(void 0!==t.uuid)n.uuid=t.uuid;if(void 0!==t.name)n.name=t.name;if(void 0!==t.color)n.color.setHex(t.color);if(void 0!==t.roughness)n.roughness=t.roughness;if(void 0!==t.metalness)n.metalness=t.metalness;if(void 0!==t.emissive)n.emissive.setHex(t.emissive);if(void 0!==t.specular)n.specular.setHex(t.specular);if(void 0!==t.shininess)n.shininess=t.shininess;if(void 0!==t.clearCoat)n.clearCoat=t.clearCoat;if(void 0!==t.clearCoatRoughness)n.clearCoatRoughness=t.clearCoatRoughness;if(void 0!==t.uniforms)n.uniforms=t.uniforms;if(void 0!==t.vertexShader)n.vertexShader=t.vertexShader;if(void 0!==t.fragmentShader)n.fragmentShader=t.fragmentShader;if(void 0!==t.vertexColors)n.vertexColors=t.vertexColors;if(void 0!==t.fog)n.fog=t.fog;if(void 0!==t.flatShading)n.flatShading=t.flatShading;if(void 0!==t.blending)n.blending=t.blending;if(void 0!==t.side)n.side=t.side;if(void 0!==t.opacity)n.opacity=t.opacity;if(void 0!==t.transparent)n.transparent=t.transparent;if(void 0!==t.alphaTest)n.alphaTest=t.alphaTest;if(void 0!==t.depthTest)n.depthTest=t.depthTest;if(void 0!==t.depthWrite)n.depthWrite=t.depthWrite;if(void 0!==t.colorWrite)n.colorWrite=t.colorWrite;if(void 0!==t.wireframe)n.wireframe=t.wireframe;if(void 0!==t.wireframeLinewidth)n.wireframeLinewidth=t.wireframeLinewidth;if(void 0!==t.wireframeLinecap)n.wireframeLinecap=t.wireframeLinecap;if(void 0!==t.wireframeLinejoin)n.wireframeLinejoin=t.wireframeLinejoin;if(void 0!==t.rotation)n.rotation=t.rotation;if(1!==t.linewidth)n.linewidth=t.linewidth;if(void 0!==t.dashSize)n.dashSize=t.dashSize;if(void 0!==t.gapSize)n.gapSize=t.gapSize;if(void 0!==t.scale)n.scale=t.scale;if(void 0!==t.skinning)n.skinning=t.skinning;if(void 0!==t.morphTargets)n.morphTargets=t.morphTargets;if(void 0!==t.dithering)n.dithering=t.dithering;if(void 0!==t.visible)n.visible=t.visible;if(void 0!==t.userData)n.userData=t.userData;if(void 0!==t.shading)n.flatShading=1===t.shading;if(void 0!==t.size)n.size=t.size;if(void 0!==t.sizeAttenuation)n.sizeAttenuation=t.sizeAttenuation;if(void 0!==t.map)n.map=r(t.map);if(void 0!==t.alphaMap){n.alphaMap=r(t.alphaMap);n.transparent=true}if(void 0!==t.bumpMap)n.bumpMap=r(t.bumpMap);if(void 0!==t.bumpScale)n.bumpScale=t.bumpScale;if(void 0!==t.normalMap)n.normalMap=r(t.normalMap);if(void 0!==t.normalScale){var i=t.normalScale;if(false===Array.isArray(i))i=[i,i];n.normalScale=(new ke).fromArray(i)}if(void 0!==t.displacementMap)n.displacementMap=r(t.displacementMap);if(void 0!==t.displacementScale)n.displacementScale=t.displacementScale;if(void 0!==t.displacementBias)n.displacementBias=t.displacementBias;if(void 0!==t.roughnessMap)n.roughnessMap=r(t.roughnessMap);if(void 0!==t.metalnessMap)n.metalnessMap=r(t.metalnessMap);if(void 0!==t.emissiveMap)n.emissiveMap=r(t.emissiveMap);if(void 0!==t.emissiveIntensity)n.emissiveIntensity=t.emissiveIntensity;if(void 0!==t.specularMap)n.specularMap=r(t.specularMap);if(void 0!==t.envMap)n.envMap=r(t.envMap);if(void 0!==t.reflectivity)n.reflectivity=t.reflectivity;if(void 0!==t.lightMap)n.lightMap=r(t.lightMap);if(void 0!==t.lightMapIntensity)n.lightMapIntensity=t.lightMapIntensity;if(void 0!==t.aoMap)n.aoMap=r(t.aoMap);if(void 0!==t.aoMapIntensity)n.aoMapIntensity=t.aoMapIntensity;if(void 0!==t.gradientMap)n.gradientMap=r(t.gradientMap);return n}});function Oc(t){this.manager=void 0!==t?t:Eu}Object.assign(Oc.prototype,{load:function(t,e,r,n){var i=this;var a=new Tu(i.manager);a.load(t,function(t){e(i.parse(JSON.parse(t)))},r,n)},parse:function(t){var e=new Aa;var r=t.data.index;if(void 0!==r){var n=new Nc[r.type](r.array);e.setIndex(new da(n,1))}var i=t.data.attributes;for(var a in i){var o=i[a];var n=new Nc[o.type](o.array);e.addAttribute(a,new da(n,o.itemSize,o.normalized))}var s=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==s)for(var u=0,c=s.length;u!==c;++u){var l=s[u];e.addGroup(l.start,l.count,l.materialIndex)}var h=t.data.boundingSphere;if(void 0!==h){var f=new Ge;if(void 0!==h.center)f.fromArray(h.center);e.boundingSphere=new ta(f,h.radius)}return e}});var Nc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Uc(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}Uc.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){var e=this.handlers;for(var r=0,n=e.length;r<n;r+=2){var i=e[r];var a=e[r+1];if(i.test(t))return a}return null}};Object.assign(Uc.prototype,{crossOrigin:void 0,initMaterials:function(t,e,r){var n=[];for(var i=0;i<t.length;++i)n[i]=this.createMaterial(t[i],e,r);return n},createMaterial:function(){var t={NoBlending:A,NormalBlending:R,AdditiveBlending:L,SubtractiveBlending:C,MultiplyBlending:P,CustomBlending:I};var e=new kr;var r=new Pu;var n=new Ic;return function i(a,o,s){var u={};function c(t,e,n,i,a){var c=o+t;var l=Uc.Handlers.get(c);var h;if(null!==l)h=l.load(c);else{r.setCrossOrigin(s);h=r.load(c)}if(void 0!==e){h.repeat.fromArray(e);if(1!==e[0])h.wrapS=xt;if(1!==e[1])h.wrapT=xt}if(void 0!==n)h.offset.fromArray(n);if(void 0!==i){if("repeat"===i[0])h.wrapS=xt;if("mirror"===i[0])h.wrapS=bt;if("repeat"===i[1])h.wrapT=xt;if("mirror"===i[1])h.wrapT=bt}if(void 0!==a)h.anisotropy=a;var f=Fe.generateUUID();u[f]=h;return f}var l={uuid:Fe.generateUUID(),type:"MeshLambertMaterial"};for(var h in a){var f=a[h];switch(h){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=f;break;case"blending":l.blending=t[f];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",h,"is no longer supported.");break;case"colorDiffuse":l.color=e.fromArray(f).getHex();break;case"colorSpecular":l.specular=e.fromArray(f).getHex();break;case"colorEmissive":l.emissive=e.fromArray(f).getHex();break;case"specularCoef":l.shininess=f;break;case"shading":if("basic"===f.toLowerCase())l.type="MeshBasicMaterial";if("phong"===f.toLowerCase())l.type="MeshPhongMaterial";if("standard"===f.toLowerCase())l.type="MeshStandardMaterial";break;case"mapDiffuse":l.map=c(f,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=c(f,a.mapEmissiveRepeat,a.mapEmissiveOffset,a.mapEmissiveWrap,a.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=c(f,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=c(f,a.mapAORepeat,a.mapAOOffset,a.mapAOWrap,a.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=c(f,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=f;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=c(f,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[f,f];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=c(f,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=c(f,a.mapMetalnessRepeat,a.mapMetalnessOffset,a.mapMetalnessWrap,a.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=c(f,a.mapRoughnessRepeat,a.mapRoughnessOffset,a.mapRoughnessWrap,a.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=c(f,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=_;break;case"doubleSided":l.side=b;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity");l.opacity=f;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[h]=f;break;case"vertexColors":if(true===f)l.vertexColors=T;if("face"===f)l.vertexColors=S;break;default:console.error("THREE.Loader.createMaterial: Unsupported",h,f);break}}if("MeshBasicMaterial"===l.type)delete l.emissive;if("MeshPhongMaterial"!==l.type)delete l.specular;if(l.opacity<1)l.transparent=true;n.setTextures(u);return n.parse(l)}}()});var Dc={decodeText:function(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);var e="";for(var r=0,n=t.length;r<n;r++)e+=String.fromCharCode(t[r]);return decodeURIComponent(escape(e))},extractUrlBase:function(t){var e=t.split("/");if(1===e.length)return"./";e.pop();return e.join("/")+"/"}};function zc(t){if("boolean"===typeof t){console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor.");t=void 0}this.manager=void 0!==t?t:Eu;this.withCredentials=false}Object.assign(zc.prototype,{load:function(t,e,r,n){var i=this;var a=this.texturePath&&"string"===typeof this.texturePath?this.texturePath:Dc.extractUrlBase(t);var o=new Tu(this.manager);o.setWithCredentials(this.withCredentials);o.load(t,function(r){var n=JSON.parse(r);var o=n.metadata;if(void 0!==o){var s=o.type;if(void 0!==s){if("object"===s.toLowerCase()){console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");return}if("scene"===s.toLowerCase()){console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.");return}}}var u=i.parse(n,a);e(u.geometry,u.materials)},r,n)},setTexturePath:function(t){this.texturePath=t},parse:function(){function t(t,e){function r(t,e){return t&1<<e}var n,i,a,o,s,u,c,l,h,f,p,d,v,m,g,y,x,_,b,w,M,E,S,T,A,R,L,C=t.faces,P=t.vertices,I=t.normals,O=t.colors,N=t.scale,U=0;if(void 0!==t.uvs){for(n=0;n<t.uvs.length;n++)if(t.uvs[n].length)U++;for(n=0;n<U;n++)e.faceVertexUvs[n]=[]}o=0;s=P.length;while(o<s){_=new Ge;_.x=P[o++]*N;_.y=P[o++]*N;_.z=P[o++]*N;e.vertices.push(_)}o=0;s=C.length;while(o<s){f=C[o++];p=r(f,0);d=r(f,1);v=r(f,3);m=r(f,4);g=r(f,5);y=r(f,6);x=r(f,7);if(p){w=new ha;w.a=C[o];w.b=C[o+1];w.c=C[o+3];M=new ha;M.a=C[o+1];M.b=C[o+2];M.c=C[o+3];o+=4;if(d){h=C[o++];w.materialIndex=h;M.materialIndex=h}a=e.faces.length;if(v)for(n=0;n<U;n++){T=t.uvs[n];e.faceVertexUvs[n][a]=[];e.faceVertexUvs[n][a+1]=[];for(i=0;i<4;i++){l=C[o++];R=T[2*l];L=T[2*l+1];A=new ke(R,L);if(2!==i)e.faceVertexUvs[n][a].push(A);if(0!==i)e.faceVertexUvs[n][a+1].push(A)}}if(m){c=3*C[o++];w.normal.set(I[c++],I[c++],I[c]);M.normal.copy(w.normal)}if(g)for(n=0;n<4;n++){c=3*C[o++];S=new Ge(I[c++],I[c++],I[c]);if(2!==n)w.vertexNormals.push(S);if(0!==n)M.vertexNormals.push(S)}if(y){u=C[o++];E=O[u];w.color.setHex(E);M.color.setHex(E)}if(x)for(n=0;n<4;n++){u=C[o++];E=O[u];if(2!==n)w.vertexColors.push(new kr(E));if(0!==n)M.vertexColors.push(new kr(E))}e.faces.push(w);e.faces.push(M)}else{b=new ha;b.a=C[o++];b.b=C[o++];b.c=C[o++];if(d){h=C[o++];b.materialIndex=h}a=e.faces.length;if(v)for(n=0;n<U;n++){T=t.uvs[n];e.faceVertexUvs[n][a]=[];for(i=0;i<3;i++){l=C[o++];R=T[2*l];L=T[2*l+1];A=new ke(R,L);e.faceVertexUvs[n][a].push(A)}}if(m){c=3*C[o++];b.normal.set(I[c++],I[c++],I[c])}if(g)for(n=0;n<3;n++){c=3*C[o++];S=new Ge(I[c++],I[c++],I[c]);b.vertexNormals.push(S)}if(y){u=C[o++];b.color.setHex(O[u])}if(x)for(n=0;n<3;n++){u=C[o++];b.vertexColors.push(new kr(O[u]))}e.faces.push(b)}}}function e(t,e){var r=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,i=t.skinWeights.length;n<i;n+=r){var a=t.skinWeights[n];var o=r>1?t.skinWeights[n+1]:0;var s=r>2?t.skinWeights[n+2]:0;var u=r>3?t.skinWeights[n+3]:0;e.skinWeights.push(new qe(a,o,s,u))}if(t.skinIndices)for(var n=0,i=t.skinIndices.length;n<i;n+=r){var c=t.skinIndices[n];var l=r>1?t.skinIndices[n+1]:0;var h=r>2?t.skinIndices[n+2]:0;var f=r>3?t.skinIndices[n+3]:0;e.skinIndices.push(new qe(c,l,h,f))}e.bones=t.bones;if(e.bones&&e.bones.length>0&&(e.skinWeights.length!==e.skinIndices.length||e.skinIndices.length!==e.vertices.length))console.warn("When skinning, number of vertices ("+e.vertices.length+"), skinIndices ("+e.skinIndices.length+"), and skinWeights ("+e.skinWeights.length+") should match.")}function r(t,e){var r=t.scale;if(void 0!==t.morphTargets)for(var n=0,i=t.morphTargets.length;n<i;n++){e.morphTargets[n]={};e.morphTargets[n].name=t.morphTargets[n].name;e.morphTargets[n].vertices=[];var a=e.morphTargets[n].vertices;var o=t.morphTargets[n].vertices;for(var s=0,u=o.length;s<u;s+=3){var c=new Ge;c.x=o[s]*r;c.y=o[s+1]*r;c.z=o[s+2]*r;a.push(c)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var l=e.faces;var h=t.morphColors[0].colors;for(var n=0,i=l.length;n<i;n++)l[n].color.fromArray(h,3*n)}}function n(t,e){var r=[];var n=[];if(void 0!==t.animation)n.push(t.animation);if(void 0!==t.animations)if(t.animations.length)n=n.concat(t.animations);else n.push(t.animations);for(var i=0;i<n.length;i++){var a=Pc.parseAnimation(n[i],e.bones);if(a)r.push(a)}if(e.morphTargets){var o=Pc.CreateClipsFromMorphTargetSequences(e.morphTargets,10);r=r.concat(o)}if(r.length>0)e.animations=r}return function i(a,o){if(void 0!==a.data)a=a.data;if(void 0!==a.scale)a.scale=1/a.scale;else a.scale=1;var s=new pa;t(a,s);e(a,s);r(a,s);n(a,s);s.computeFaceNormals();s.computeBoundingSphere();if(void 0===a.materials||0===a.materials.length)return{geometry:s};else{var u=Uc.prototype.initMaterials(a.materials,o,this.crossOrigin);return{geometry:s,materials:u}}}}()});function Bc(t){this.manager=void 0!==t?t:Eu;this.texturePath=""}Object.assign(Bc.prototype,{load:function(t,e,r,n){if(""===this.texturePath)this.texturePath=t.substring(0,t.lastIndexOf("/")+1);var i=this;var a=new Tu(i.manager);a.load(t,function(r){var a=null;try{a=JSON.parse(r)}catch(e){if(void 0!==n)n(e);console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message);return}var o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase()){console.error("THREE.ObjectLoader: Can't load "+t+". Use THREE.JSONLoader instead.");return}i.parse(a,e)},r,n)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var r=this.parseShape(t.shapes);var n=this.parseGeometries(t.geometries,r);var i=this.parseImages(t.images,function(){if(void 0!==e)e(s)});var a=this.parseTextures(t.textures,i);var o=this.parseMaterials(t.materials,a);var s=this.parseObject(t.object,n,o);if(t.animations)s.animations=this.parseAnimations(t.animations);if(void 0===t.images||0===t.images.length)if(void 0!==e)e(s);return s},parseShape:function(t){var e={};if(void 0!==t)for(var r=0,n=t.length;r<n;r++){var i=(new sc).fromJSON(t[r]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var r={};if(void 0!==t){var n=new zc;var i=new Oc;for(var a=0,o=t.length;a<o;a++){var s;var u=t[a];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new hu[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new hu[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new hu[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new hu[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new hu[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new hu[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new hu[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new hu[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new hu[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new hu[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new hu[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new hu[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":var c=[];for(var a=0,o=u.shapes.length;a<o;a++){var l=e[u.shapes[a]];c.push(l)}s=new hu[u.type](c,u.curveSegments);break;case"BufferGeometry":s=i.parse(u);break;case"Geometry":s=n.parse(u,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid;if(void 0!==u.name)s.name=u.name;r[u.uuid]=s}}return r},parseMaterials:function(t,e){var r={};if(void 0!==t){var n=new Ic;n.setTextures(e);for(var i=0,a=t.length;i<a;i++){var o=t[i];if("MultiMaterial"===o.type){var s=[];for(var u=0;u<o.materials.length;u++)s.push(n.parse(o.materials[u]));r[o.uuid]=s}else r[o.uuid]=n.parse(o)}}return r},parseAnimations:function(t){var e=[];for(var r=0;r<t.length;r++){var n=Pc.parse(t[r]);e.push(n)}return e},parseImages:function(t,e){var r=this;var n={};function i(t){r.manager.itemStart(t);return o.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemEnd(t);r.manager.itemError(t)})}if(void 0!==t&&t.length>0){var a=new Mu(e);var o=new Lu(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,u=t.length;s<u;s++){var c=t[s];var l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.texturePath+c.url;n[c.uuid]=i(l)}}return n},parseTextures:function(t,e){function r(t,e){if("number"===typeof t)return t;console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t);return e[t]}var n={};if(void 0!==t)for(var i=0,a=t.length;i<a;i++){var o=t[i];if(void 0===o.image)console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid);if(void 0===e[o.image])console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=new Xe(e[o.image]);s.needsUpdate=true;s.uuid=o.uuid;if(void 0!==o.name)s.name=o.name;if(void 0!==o.mapping)s.mapping=r(o.mapping,Fc);if(void 0!==o.offset)s.offset.fromArray(o.offset);if(void 0!==o.repeat)s.repeat.fromArray(o.repeat);if(void 0!==o.center)s.center.fromArray(o.center);if(void 0!==o.rotation)s.rotation=o.rotation;if(void 0!==o.wrap){s.wrapS=r(o.wrap[0],kc);s.wrapT=r(o.wrap[1],kc)}if(void 0!==o.minFilter)s.minFilter=r(o.minFilter,Hc);if(void 0!==o.magFilter)s.magFilter=r(o.magFilter,Hc);if(void 0!==o.anisotropy)s.anisotropy=o.anisotropy;if(void 0!==o.flipY)s.flipY=o.flipY;n[o.uuid]=s}return n},parseObject:function(t,e,r){var n;function i(t){if(void 0===e[t])console.warn("THREE.ObjectLoader: Undefined geometry",t);return e[t]}function a(t){if(void 0===t)return;if(Array.isArray(t)){var e=[];for(var n=0,i=t.length;n<i;n++){var a=t[n];if(void 0===r[a])console.warn("THREE.ObjectLoader: Undefined material",a);e.push(r[a])}return e}if(void 0===r[t])console.warn("THREE.ObjectLoader: Undefined material",t);return r[t]}switch(t.type){case"Scene":n=new Po;if(void 0!==t.background)if(Number.isInteger(t.background))n.background=new kr(t.background);if(void 0!==t.fog)if("Fog"===t.fog.type)n.fog=new Co(t.fog.color,t.fog.near,t.fog.far);else if("FogExp2"===t.fog.type)n.fog=new Lo(t.fog.color,t.fog.density);break;case"PerspectiveCamera":n=new go(t.fov,t.aspect,t.near,t.far);if(void 0!==t.focus)n.focus=t.focus;if(void 0!==t.zoom)n.zoom=t.zoom;if(void 0!==t.filmGauge)n.filmGauge=t.filmGauge;if(void 0!==t.filmOffset)n.filmOffset=t.filmOffset;if(void 0!==t.view)n.view=Object.assign({},t.view);break;case"OrthographicCamera":n=new la(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":n=new mc(t.color,t.intensity);break;case"DirectionalLight":n=new vc(t.color,t.intensity);break;case"PointLight":n=new pc(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":n=new gc(t.color,t.intensity,t.width,t.height);break;case"SpotLight":n=new fc(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new cc(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(t.geometry);var s=a(t.material);if(o.bones&&o.bones.length>0)n=new zo(o,s);else n=new za(o,s);break;case"LOD":n=new No;break;case"Line":n=new Fo(i(t.geometry),a(t.material),t.mode);break;case"LineLoop":n=new Ho(i(t.geometry),a(t.material));break;case"LineSegments":n=new ko(i(t.geometry),a(t.material));break;case"PointCloud":case"Points":n=new Go(i(t.geometry),a(t.material));break;case"Sprite":n=new Oo(a(t.material));break;case"Group":n=new Vo;break;default:n=new ua}n.uuid=t.uuid;if(void 0!==t.name)n.name=t.name;if(void 0!==t.matrix){n.matrix.fromArray(t.matrix);n.matrix.decompose(n.position,n.quaternion,n.scale)}else{if(void 0!==t.position)n.position.fromArray(t.position);if(void 0!==t.rotation)n.rotation.fromArray(t.rotation);if(void 0!==t.quaternion)n.quaternion.fromArray(t.quaternion);if(void 0!==t.scale)n.scale.fromArray(t.scale)}if(void 0!==t.castShadow)n.castShadow=t.castShadow;if(void 0!==t.receiveShadow)n.receiveShadow=t.receiveShadow;if(t.shadow){if(void 0!==t.shadow.bias)n.shadow.bias=t.shadow.bias;if(void 0!==t.shadow.radius)n.shadow.radius=t.shadow.radius;if(void 0!==t.shadow.mapSize)n.shadow.mapSize.fromArray(t.shadow.mapSize);if(void 0!==t.shadow.camera)n.shadow.camera=this.parseObject(t.shadow.camera)}if(void 0!==t.visible)n.visible=t.visible;if(void 0!==t.userData)n.userData=t.userData;if(void 0!==t.children){var u=t.children;for(var c=0;c<u.length;c++)n.add(this.parseObject(u[c],e,r))}if("LOD"===t.type){var l=t.levels;for(var h=0;h<l.length;h++){var f=l[h];var p=n.getObjectByProperty("uuid",f.object);if(void 0!==p)n.addLevel(p,f.distance)}}return n}});var Fc={UVMapping:ht,CubeReflectionMapping:ft,CubeRefractionMapping:pt,EquirectangularReflectionMapping:dt,EquirectangularRefractionMapping:vt,SphericalReflectionMapping:mt,CubeUVReflectionMapping:gt,CubeUVRefractionMapping:yt};var kc={RepeatWrapping:xt,ClampToEdgeWrapping:_t,MirroredRepeatWrapping:bt};var Hc={NearestFilter:wt,NearestMipMapNearestFilter:Mt,NearestMipMapLinearFilter:Et,LinearFilter:St,LinearMipMapNearestFilter:Tt,LinearMipMapLinearFilter:At};function jc(t){if("undefined"===typeof createImageBitmap)console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported.");if("undefined"===typeof fetch)console.warn("THREE.ImageBitmapLoader: fetch() not supported.");this.manager=void 0!==t?t:Eu;this.options=void 0}jc.prototype={constructor:jc,setOptions:function t(e){this.options=e;return this},load:function t(e,r,n,i){if(void 0===e)e="";if(void 0!==this.path)e=this.path+e;var a=this;var o=wu.get(e);if(void 0!==o){a.manager.itemStart(e);setTimeout(function(){if(r)r(o);a.manager.itemEnd(e)},0);return o}fetch(e).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,a.options)}).then(function(t){wu.add(e,t);if(r)r(t);a.manager.itemEnd(e)}).catch(function(t){if(i)i(t);a.manager.itemEnd(e);a.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(t){this.path=t;return this}};function Gc(){this.type="ShapePath";this.subPaths=[];this.currentPath=null}Object.assign(Gc.prototype,{moveTo:function(t,e){this.currentPath=new oc;this.subPaths.push(this.currentPath);this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,r,n){this.currentPath.quadraticCurveTo(t,e,r,n)},bezierCurveTo:function(t,e,r,n,i,a){this.currentPath.bezierCurveTo(t,e,r,n,i,a)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function r(t){var e=[];for(var r=0,n=t.length;r<n;r++){var i=t[r];var a=new sc;a.curves=i.curves;e.push(a)}return e}function n(t,e){var r=e.length;var n=false;for(var i=r-1,a=0;a<r;i=a++){var o=e[i];var s=e[a];var u=s.x-o.x;var c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0){o=e[a];u=-u;s=e[i];c=-c}if(t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return true}else{var l=c*(t.x-o.x)-u*(t.y-o.y);if(0===l)return true;if(l<0)continue;n=!n}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return true}}return n}var i=js.isClockWise;var a=this.subPaths;if(0===a.length)return[];if(true===e)return r(a);var o,s,u,c=[];if(1===a.length){s=a[0];u=new sc;u.curves=s.curves;c.push(u);return c}var l=!i(a[0].getPoints());l=t?!l:l;var h=[];var f=[];var p=[];var d=0;var v;f[d]=void 0;p[d]=[];for(var m=0,g=a.length;m<g;m++){s=a[m];v=s.getPoints();o=i(v);o=t?!o:o;if(o){if(!l&&f[d])d++;f[d]={s:new sc,p:v};f[d].s.curves=s.curves;if(l)d++;p[d]=[]}else p[d].push({h:s,p:v[0]})}if(!f[0])return r(a);if(f.length>1){var y=false;var x=[];for(var _=0,b=f.length;_<b;_++)h[_]=[];for(var _=0,b=f.length;_<b;_++){var w=p[_];for(var M=0;M<w.length;M++){var E=w[M];var S=true;for(var T=0;T<f.length;T++)if(n(E.p,f[T].p)){if(_!==T)x.push({froms:_,tos:T,hole:M});if(S){S=false;h[T].push(E)}else y=true}if(S)h[_].push(E)}}if(x.length>0)if(!y)p=h}var A;for(var m=0,R=f.length;m<R;m++){u=f[m].s;c.push(u);A=p[m];for(var L=0,C=A.length;L<C;L++)u.holes.push(A[L].h)}return c}});function Vc(t){this.type="Font";this.data=t}Object.assign(Vc.prototype,{isFont:true,generateShapes:function(t,e,r){if(void 0===e)e=100;if(void 0===r)r=4;var n=[];var i=Wc(t,e,r,this.data);for(var a=0,o=i.length;a<o;a++)Array.prototype.push.apply(n,i[a].toShapes());return n}});function Wc(t,e,r,n){var i=String(t).split("");var a=e/n.resolution;var o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*a;var s=[];var u=0,c=0;for(var l=0;l<i.length;l++){var h=i[l];if("\n"===h){u=0;c-=o}else{var f=Xc(h,r,a,u,c,n);u+=f.offsetX;s.push(f.path)}}return s}function Xc(t,e,r,n,i,a){var o=a.glyphs[t]||a.glyphs["?"];if(!o)return;var s=new Gc;var u,c,l,h,f,p,d,v;if(o.o){var m=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(var g=0,y=m.length;g<y;){var x=m[g++];switch(x){case"m":u=m[g++]*r+n;c=m[g++]*r+i;s.moveTo(u,c);break;case"l":u=m[g++]*r+n;c=m[g++]*r+i;s.lineTo(u,c);break;case"q":l=m[g++]*r+n;h=m[g++]*r+i;f=m[g++]*r+n;p=m[g++]*r+i;s.quadraticCurveTo(f,p,l,h);break;case"b":l=m[g++]*r+n;h=m[g++]*r+i;f=m[g++]*r+n;p=m[g++]*r+i;d=m[g++]*r+n;v=m[g++]*r+i;s.bezierCurveTo(f,p,d,v,l,h);break}}}return{offsetX:o.ha*r,path:s}}function qc(t){this.manager=void 0!==t?t:Eu}Object.assign(qc.prototype,{load:function(t,e,r,n){var i=this;var a=new Tu(this.manager);a.setPath(this.path);a.load(t,function(t){var r;try{r=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.");r=JSON.parse(t.substring(65,t.length-2))}var n=i.parse(r);if(e)e(n)},r,n)},parse:function(t){return new Vc(t)},setPath:function(t){this.path=t;return this}});var Yc;var Zc={getContext:function(){if(void 0===Yc)Yc=new(window.AudioContext||window.webkitAudioContext);return Yc},setContext:function(t){Yc=t}};function Jc(t){this.manager=void 0!==t?t:Eu}Object.assign(Jc.prototype,{load:function(t,e,r,n){var i=new Tu(this.manager);i.setResponseType("arraybuffer");i.load(t,function(t){var r=Zc.getContext();r.decodeAudioData(t,function(t){e(t)})},r,n)}});function Qc(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new go;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=false;this.cameraR=new go;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=false}Object.assign(Qc.prototype,{update:function(){var t,e,r,n,i,a,o,s;var u=new He;var c=new He;return function l(h){var f=t!==this||e!==h.focus||r!==h.fov||n!==h.aspect*this.aspect||i!==h.near||a!==h.far||o!==h.zoom||s!==this.eyeSep;if(f){t=this;e=h.focus;r=h.fov;n=h.aspect*this.aspect;i=h.near;a=h.far;o=h.zoom;var p=h.projectionMatrix.clone();s=this.eyeSep/2;var d=s*i/e;var v=i*Math.tan(Fe.DEG2RAD*r*.5)/o;var m,g;c.elements[12]=-s;u.elements[12]=s;m=-v*n+d;g=v*n+d;p.elements[0]=2*i/(g-m);p.elements[8]=(g+m)/(g-m);this.cameraL.projectionMatrix.copy(p);m=-v*n-d;g=v*n-d;p.elements[0]=2*i/(g-m);p.elements[8]=(g+m)/(g-m);this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(c);this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(u)}}()});function Kc(t,e,r){ua.call(this);this.type="CubeCamera";var n=90,i=1;var a=new go(n,i,t,e);a.up.set(0,-1,0);a.lookAt(new Ge(1,0,0));this.add(a);var o=new go(n,i,t,e);o.up.set(0,-1,0);o.lookAt(new Ge(-1,0,0));this.add(o);var s=new go(n,i,t,e);s.up.set(0,0,1);s.lookAt(new Ge(0,1,0));this.add(s);var u=new go(n,i,t,e);u.up.set(0,0,-1);u.lookAt(new Ge(0,-1,0));this.add(u);var c=new go(n,i,t,e);c.up.set(0,-1,0);c.lookAt(new Ge(0,0,1));this.add(c);var l=new go(n,i,t,e);l.up.set(0,-1,0);l.lookAt(new Ge(0,0,-1));this.add(l);var h={format:Ht,magFilter:St,minFilter:St};this.renderTarget=new Ze(r,r,h);this.renderTarget.texture.name="CubeCamera";this.update=function(t,e){if(null===this.parent)this.updateMatrixWorld();var r=this.renderTarget;var n=r.texture.generateMipmaps;r.texture.generateMipmaps=false;r.activeCubeFace=0;t.render(e,a,r);r.activeCubeFace=1;t.render(e,o,r);r.activeCubeFace=2;t.render(e,s,r);r.activeCubeFace=3;t.render(e,u,r);r.activeCubeFace=4;t.render(e,c,r);r.texture.generateMipmaps=n;r.activeCubeFace=5;t.render(e,l,r);t.setRenderTarget(null)};this.clear=function(t,e,r,n){var i=this.renderTarget;for(var a=0;a<6;a++){i.activeCubeFace=a;t.setRenderTarget(i);t.clear(e,r,n)}t.setRenderTarget(null)}}Kc.prototype=Object.create(ua.prototype);Kc.prototype.constructor=Kc;function $c(){ua.call(this);this.type="AudioListener";this.context=Zc.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}$c.prototype=Object.assign(Object.create(ua.prototype),{constructor:$c,getInput:function(){return this.gain},removeFilter:function(){if(null!==this.filter){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination);this.gain.connect(this.context.destination);this.filter=null}},getFilter:function(){return this.filter},setFilter:function(t){if(null!==this.filter){this.gain.disconnect(this.filter);this.filter.disconnect(this.context.destination)}else this.gain.disconnect(this.context.destination);this.filter=t;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new Ge;var e=new je;var r=new Ge;var n=new Ge;return function i(a){ua.prototype.updateMatrixWorld.call(this,a);var o=this.context.listener;var s=this.up;this.matrixWorld.decompose(t,e,r);n.set(0,0,-1).applyQuaternion(e);if(o.positionX){o.positionX.setValueAtTime(t.x,this.context.currentTime);o.positionY.setValueAtTime(t.y,this.context.currentTime);o.positionZ.setValueAtTime(t.z,this.context.currentTime);o.forwardX.setValueAtTime(n.x,this.context.currentTime);o.forwardY.setValueAtTime(n.y,this.context.currentTime);o.forwardZ.setValueAtTime(n.z,this.context.currentTime);o.upX.setValueAtTime(s.x,this.context.currentTime);o.upY.setValueAtTime(s.y,this.context.currentTime);o.upZ.setValueAtTime(s.z,this.context.currentTime)}else{o.setPosition(t.x,t.y,t.z);o.setOrientation(n.x,n.y,n.z,s.x,s.y,s.z)}}}()});function tl(t){ua.call(this);this.type="Audio";this.context=t.context;this.gain=this.context.createGain();this.gain.connect(t.getInput());this.autoplay=false;this.buffer=null;this.loop=false;this.startTime=0;this.offset=0;this.playbackRate=1;this.isPlaying=false;this.hasPlaybackControl=true;this.sourceType="empty";this.filters=[]}tl.prototype=Object.assign(Object.create(ua.prototype),{constructor:tl,getOutput:function(){return this.gain},setNodeSource:function(t){this.hasPlaybackControl=false;this.sourceType="audioNode";this.source=t;this.connect();return this},setBuffer:function(t){this.buffer=t;this.sourceType="buffer";if(this.autoplay)this.play();return this},play:function(){if(true===this.isPlaying){console.warn("THREE.Audio: Audio is already playing.");return}if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}var t=this.context.createBufferSource();t.buffer=this.buffer;t.loop=this.loop;t.onended=this.onEnded.bind(this);t.playbackRate.setValueAtTime(this.playbackRate,this.startTime);this.startTime=this.context.currentTime;t.start(this.startTime,this.offset);this.isPlaying=true;this.source=t;return this.connect()},pause:function(){if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}if(true===this.isPlaying){this.source.stop();this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate;this.isPlaying=false}return this},stop:function(){if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}this.source.stop();this.offset=0;this.isPlaying=false;return this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){if(!t)t=[];if(true===this.isPlaying){this.disconnect();this.filters=t;this.connect()}else this.filters=t;return this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}this.playbackRate=t;if(true===this.isPlaying)this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime);return this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=false},getLoop:function(){if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return false}return this.loop},setLoop:function(t){if(false===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}this.loop=t;if(true===this.isPlaying)this.source.loop=this.loop;return this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){this.gain.gain.value=t;return this}});function el(t){tl.call(this,t);this.panner=this.context.createPanner();this.panner.connect(this.gain)}el.prototype=Object.assign(Object.create(tl.prototype),{constructor:el,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new Ge;return function e(r){ua.prototype.updateMatrixWorld.call(this,r);t.setFromMatrixPosition(this.matrixWorld);this.panner.setPosition(t.x,t.y,t.z)}}()});function rl(t,e){this.analyser=t.context.createAnalyser();this.analyser.fftSize=void 0!==e?e:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);t.getOutput().connect(this.analyser)}Object.assign(rl.prototype,{getFrequencyData:function(){this.analyser.getByteFrequencyData(this.data);return this.data},getAverageFrequency:function(){var t=0,e=this.getFrequencyData();for(var r=0;r<e.length;r++)t+=e[r];return t/e.length}});function nl(t,e,r){this.binding=t;this.valueSize=r;var n=Float64Array,i;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":n=Array;i=this._select;break;default:i=this._lerp}this.buffer=new n(4*r);this._mixBufferRegion=i;this.cumulativeWeight=0;this.useCount=0;this.referenceCount=0}Object.assign(nl.prototype,{accumulate:function(t,e){var r=this.buffer,n=this.valueSize,i=t*n+n,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==n;++o)r[i+o]=r[o];a=e}else{a+=e;var s=e/a;this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=a},apply:function(t){var e=this.valueSize,r=this.buffer,n=t*e+e,i=this.cumulativeWeight,a=this.binding;this.cumulativeWeight=0;if(i<1){var o=3*e;this._mixBufferRegion(r,n,o,1-i,e)}for(var s=e,u=e+e;s!==u;++s)if(r[s]!==r[s+e]){a.setValue(r,n);break}},saveOriginalState:function(){var t=this.binding;var e=this.buffer,r=this.valueSize,n=3*r;t.getValue(e,n);for(var i=r,a=n;i!==a;++i)e[i]=e[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,r,n,i){if(n>=.5)for(var a=0;a!==i;++a)t[e+a]=t[r+a]},_slerp:function(t,e,r,n){je.slerpFlat(t,e,t,e,t,r,n)},_lerp:function(t,e,r,n,i){var a=1-n;for(var o=0;o!==i;++o){var s=e+o;t[s]=t[s]*a+t[r+o]*n}}});var il="\\[\\]\\.:\\/";function al(t,e,r){var n=r||ol.parseTrackName(e);this._targetGroup=t;this._bindings=t.subscribe_(e,n)}Object.assign(al.prototype,{getValue:function(t,e){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];if(void 0!==n)n.getValue(t,e)},setValue:function(t,e){var r=this._bindings;for(var n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(t,e)},bind:function(){var t=this._bindings;for(var e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].bind()},unbind:function(){var t=this._bindings;for(var e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].unbind()}});function ol(t,e,r){this.path=e;this.parsedPath=r||ol.parseTrackName(e);this.node=ol.findNode(t,this.parsedPath.nodeName)||t;this.rootNode=t}Object.assign(ol,{Composite:al,create:function(t,e,r){if(!(t&&t.isAnimationObjectGroup))return new ol(t,e,r);else return new ol.Composite(t,e,r)},sanitizeNodeName:function(){var t=new RegExp("["+il+"]","g");return function e(r){return r.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^"+il+"]";var e="[^"+il.replace("\\.","")+"]";var r=/((?:WC+[\/:])*)/.source.replace("WC",t);var n=/(WCOD+)?/.source.replace("WCOD",e);var i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",t);var a=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",t);var o=new RegExp("^"+r+n+i+a+"$");var s=["material","materials","bones"];return function t(e){var r=o.exec(e);if(!r)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]};var i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var a=n.nodeName.substring(i+1);if(-1!==s.indexOf(a)){n.nodeName=n.nodeName.substring(0,i);n.objectName=a}}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var r=t.skeleton.getBoneByName(e);if(void 0!==r)return r}if(t.children){var n=function(t){for(var r=0;r<t.length;r++){var i=t[r];if(i.name===e||i.uuid===e)return i;var a=n(i.children);if(a)return a}return null};var i=n(t.children);if(i)return i}return null}});Object.assign(ol.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function t(e,r){e[r]=this.node[this.propertyName]},function t(e,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i)e[r++]=n[i]},function t(e,r){e[r]=this.resolvedProperty[this.propertyIndex]},function t(e,r){this.resolvedProperty.toArray(e,r)}],SetterByBindingTypeAndVersioning:[[function t(e,r){this.targetObject[this.propertyName]=e[r]},function t(e,r){this.targetObject[this.propertyName]=e[r];this.targetObject.needsUpdate=true},function t(e,r){this.targetObject[this.propertyName]=e[r];this.targetObject.matrixWorldNeedsUpdate=true}],[function t(e,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i)n[i]=e[r++]},function t(e,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i)n[i]=e[r++];this.targetObject.needsUpdate=true},function t(e,r){var n=this.resolvedProperty;for(var i=0,a=n.length;i!==a;++i)n[i]=e[r++];this.targetObject.matrixWorldNeedsUpdate=true}],[function t(e,r){this.resolvedProperty[this.propertyIndex]=e[r]},function t(e,r){this.resolvedProperty[this.propertyIndex]=e[r];this.targetObject.needsUpdate=true},function t(e,r){this.resolvedProperty[this.propertyIndex]=e[r];this.targetObject.matrixWorldNeedsUpdate=true}],[function t(e,r){this.resolvedProperty.fromArray(e,r)},function t(e,r){this.resolvedProperty.fromArray(e,r);this.targetObject.needsUpdate=true},function t(e,r){this.resolvedProperty.fromArray(e,r);this.targetObject.matrixWorldNeedsUpdate=true}]],getValue:function t(e,r){this.bind();this.getValue(e,r)},setValue:function t(e,r){this.bind();this.setValue(e,r)},bind:function(){var t=this.node,e=this.parsedPath,r=e.objectName,n=e.propertyName,i=e.propertyIndex;if(!t){t=ol.findNode(this.rootNode,e.nodeName)||this.rootNode;this.node=t}this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){var a=e.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[r]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(void 0!==a){if(void 0===t[a]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[a]}}var s=t[n];if(void 0===s){var u=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+n+" but it wasn't found.",t);return}var c=this.Versioning.None;if(void 0!==t.needsUpdate){c=this.Versioning.NeedsUpdate;this.targetObject=t}else if(void 0!==t.matrixWorldNeedsUpdate){c=this.Versioning.MatrixWorldNeedsUpdate;this.targetObject=t}var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(t.geometry.morphAttributes.position[o].name===i){i=o;break}}else{if(!t.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(t.geometry.morphTargets[o].name===i){i=o;break}}}l=this.BindingType.ArrayElement;this.resolvedProperty=s;this.propertyIndex=i}else if(void 0!==s.fromArray&&void 0!==s.toArray){l=this.BindingType.HasFromToArray;this.resolvedProperty=s}else if(Array.isArray(s)){l=this.BindingType.EntireArray;this.resolvedProperty=s}else this.propertyName=n;this.getValue=this.GetterByBindingType[l];this.setValue=this.SetterByBindingTypeAndVersioning[l][c]},unbind:function(){this.node=null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}});Object.assign(ol.prototype,{_getValue_unbound:ol.prototype.getValue,_setValue_unbound:ol.prototype.setValue});function sl(){this.uuid=Fe.generateUUID();this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,r=arguments.length;e!==r;++e)t[arguments[e].uuid]=e;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}Object.assign(sl.prototype,{isAnimationObjectGroup:true,add:function(){var t=this._objects,e=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,u=void 0;for(var c=0,l=arguments.length;c!==l;++c){var h=arguments[c],f=h.uuid,p=n[f];if(void 0===p){p=e++;n[f]=p;t.push(h);for(var d=0,v=s;d!==v;++d)o[d].push(new ol(h,i[d],a[d]))}else if(p<r){u=t[p];var m=--r,g=t[m];n[g.uuid]=p;t[p]=g;n[f]=m;t[m]=h;for(var d=0,v=s;d!==v;++d){var y=o[d],x=y[m],_=y[p];y[p]=x;if(void 0===_)_=new ol(h,i[d],a[d]);y[m]=_}}else if(t[p]!==u)console.error("THREE.AnimationObjectGroup: Different objects with the same UUID "+"detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){var t=this._objects,e=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length;for(var a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,c=r[u];if(void 0!==c&&c>=e){var l=e++,h=t[l];r[h.uuid]=c;t[c]=h;r[u]=l;t[l]=s;for(var f=0,p=i;f!==p;++f){var d=n[f],v=d[l],m=d[c];d[c]=v;d[l]=m}}}this.nCachedObjects_=e},uncache:function(){var t=this._objects,e=t.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,a=i.length;for(var o=0,s=arguments.length;o!==s;++o){var u=arguments[o],c=u.uuid,l=n[c];if(void 0!==l){delete n[c];if(l<r){var h=--r,f=t[h],p=--e,d=t[p];n[f.uuid]=l;t[l]=f;n[d.uuid]=h;t[h]=d;t.pop();for(var v=0,m=a;v!==m;++v){var g=i[v],y=g[h],x=g[p];g[l]=y;g[h]=x;g.pop()}}else{var p=--e,d=t[p];n[d.uuid]=l;t[l]=d;t.pop();for(var v=0,m=a;v!==m;++v){var g=i[v];g[l]=g[p];g.pop()}}}}this.nCachedObjects_=r},subscribe_:function(t,e){var r=this._bindingsIndicesByPath,n=r[t],i=this._bindings;if(void 0!==n)return i[n];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);n=i.length;r[t]=n;a.push(t);o.push(e);i.push(l);for(var h=c,f=s.length;h!==f;++h){var p=s[h];l[h]=new ol(p,t,e)}return l},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,r=e[t];if(void 0!==r){var n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],u=t[o];e[u]=r;a[r]=s;a.pop();i[r]=i[o];i.pop();n[r]=n[o];n.pop()}}});function ul(t,e,r){this._mixer=t;this._clip=e;this._localRoot=r||null;var n=e.tracks,i=n.length,a=new Array(i);var o={endingStart:Me,endingEnd:Me};for(var s=0;s!==i;++s){var u=n[s].createInterpolant(null);a[s]=u;u.settings=o}this._interpolantSettings=o;this._interpolants=a;this._propertyBindings=new Array(i);this._cacheIndex=null;this._byClipCacheIndex=null;this._timeScaleInterpolant=null;this._weightInterpolant=null;this.loop=ye;this._loopCount=-1;this._startTime=null;this.time=0;this.timeScale=1;this._effectiveTimeScale=1;this.weight=1;this._effectiveWeight=1;this.repetitions=Infinity;this.paused=false;this.enabled=true;this.clampWhenFinished=false;this.zeroSlopeAtStart=true;this.zeroSlopeAtEnd=true}Object.assign(ul.prototype,{play:function(){this._mixer._activateAction(this);return this},stop:function(){this._mixer._deactivateAction(this);return this.reset()},reset:function(){this.paused=false;this.enabled=true;this.time=0;this._loopCount=-1;this._startTime=null;return this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){this._startTime=t;return this},setLoop:function(t,e){this.loop=t;this.repetitions=e;return this},setEffectiveWeight:function(t){this.weight=t;this._effectiveWeight=this.enabled?t:0;return this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,r){t.fadeOut(e);this.fadeIn(e);if(r){var n=this._clip.duration,i=t._clip.duration,a=i/n,o=n/i;t.warp(1,a,e);this.warp(o,1,e)}return this},crossFadeTo:function(t,e,r){return t.crossFadeFrom(this,e,r)},stopFading:function(){var t=this._weightInterpolant;if(null!==t){this._weightInterpolant=null;this._mixer._takeBackControlInterpolant(t)}return this},setEffectiveTimeScale:function(t){this.timeScale=t;this._effectiveTimeScale=this.paused?0:t;return this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){this.timeScale=this._clip.duration/t;return this.stopWarping()},syncWith:function(t){this.time=t.time;this.timeScale=t.timeScale;return this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,r){var n=this._mixer,i=n.time,a=this._timeScaleInterpolant,o=this.timeScale;if(null===a){a=n._lendControlInterpolant();this._timeScaleInterpolant=a}var s=a.parameterPositions,u=a.sampleValues;s[0]=i;s[1]=i+r;u[0]=t/o;u[1]=e/o;return this},stopWarping:function(){var t=this._timeScaleInterpolant;if(null!==t){this._timeScaleInterpolant=null;this._mixer._takeBackControlInterpolant(t)}return this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,r,n){if(!this.enabled){this._updateWeight(t);return}var i=this._startTime;if(null!==i){var a=(t-i)*r;if(a<0||0===r)return;this._startTime=null;e=r*a}e*=this._updateTimeScale(t);var o=this._updateTime(e);var s=this._updateWeight(t);if(s>0){var u=this._interpolants;var c=this._propertyBindings;for(var l=0,h=u.length;l!==h;++l){u[l].evaluate(o);c[l].accumulate(n,s)}}},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(t)[0];e*=n;if(t>r.parameterPositions[1]){this.stopFading();if(0===n)this.enabled=false}}}this._effectiveWeight=e;return e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r){var n=r.evaluate(t)[0];e*=n;if(t>r.parameterPositions[1]){this.stopWarping();if(0===e)this.paused=true;else this.timeScale=e}}}this._effectiveTimeScale=e;return e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var r=this._clip.duration,n=this.loop,i=this._loopCount;if(n===ge){if(-1===i){this._loopCount=0;this._setEndings(true,true,false)}t:{if(e>=r)e=r;else if(e<0)e=0;else break t;if(this.clampWhenFinished)this.paused=true;else this.enabled=false;this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var a=n===xe;if(-1===i)if(t>=0){i=0;this._setEndings(true,0===this.repetitions,a)}else this._setEndings(0===this.repetitions,true,a);if(e>=r||e<0){var o=Math.floor(e/r);e-=r*o;i+=Math.abs(o);var s=this.repetitions-i;if(s<0){if(this.clampWhenFinished)this.paused=true;else this.enabled=false;e=t>0?r:0;this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1})}else{if(0===s){var u=t<0;this._setEndings(u,!u,a)}else this._setEndings(false,false,a);this._loopCount=i;this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1===(1&i)){this.time=e;return r-e}}this.time=e;return e},_setEndings:function(t,e,r){var n=this._interpolantSettings;if(r){n.endingStart=Ee;n.endingEnd=Ee}else{if(t)n.endingStart=this.zeroSlopeAtStart?Ee:Me;else n.endingStart=Se;if(e)n.endingEnd=this.zeroSlopeAtEnd?Ee:Me;else n.endingEnd=Se}},_scheduleFading:function(t,e,r){var n=this._mixer,i=n.time,a=this._weightInterpolant;if(null===a){a=n._lendControlInterpolant();this._weightInterpolant=a}var o=a.parameterPositions,s=a.sampleValues;o[0]=i;s[0]=e;o[1]=i+t;s[1]=r;return this}});function cl(t){this._root=t;this._initMemoryManager();this._accuIndex=0;this.time=0;this.timeScale=1}cl.prototype=Object.assign(Object.create(s.prototype),{constructor:cl,_bindAction:function(t,e){var r=t._localRoot||this._root,n=t._clip.tracks,i=n.length,a=t._propertyBindings,o=t._interpolants,s=r.uuid,u=this._bindingsByRootAndName,c=u[s];if(void 0===c){c={};u[s]=c}for(var l=0;l!==i;++l){var h=n[l],f=h.name,p=c[f];if(void 0!==p)a[l]=p;else{p=a[l];if(void 0!==p){if(null===p._cacheIndex){++p.referenceCount;this._addInactiveBinding(p,s,f)}continue}var d=e&&e._propertyBindings[l].binding.parsedPath;p=new nl(ol.create(r,f,d),h.ValueTypeName,h.getValueSize());++p.referenceCount;this._addInactiveBinding(p,s,f);a[l]=p}o[l].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,r=t._clip.uuid,n=this._actionsByClip[r];this._bindAction(t,n&&n.knownActions[0]);this._addInactiveAction(t,r,e)}var i=t._propertyBindings;for(var a=0,o=i.length;a!==o;++a){var s=i[a];if(0===s.useCount++){this._lendBinding(s);s.saveOriginalState()}}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){var e=t._propertyBindings;for(var r=0,n=e.length;r!==n;++r){var i=e[r];if(0===--i.useCount){i.restoreOriginalState();this._takeBackBinding(i)}}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,r){var n=this._actions,i=this._actionsByClip,a=i[e];if(void 0===a){a={knownActions:[t],actionByRoot:{}};t._byClipCacheIndex=0;i[e]=a}else{var o=a.knownActions;t._byClipCacheIndex=o.length;o.push(t)}t._cacheIndex=n.length;n.push(t);a.actionByRoot[r]=t},_removeInactiveAction:function(t){var e=this._actions,r=e[e.length-1],n=t._cacheIndex;r._cacheIndex=n;e[n]=r;e.pop();t._cacheIndex=null;var i=t._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c;s[c]=u;s.pop();t._byClipCacheIndex=null;var l=o.actionByRoot,h=(t._localRoot||this._root).uuid;delete l[h];if(0===s.length)delete a[i];this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){var e=t._propertyBindings;for(var r=0,n=e.length;r!==n;++r){var i=e[r];if(0===--i.referenceCount)this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,r=t._cacheIndex,n=this._nActiveActions++,i=e[n];t._cacheIndex=n;e[n]=t;i._cacheIndex=r;e[r]=i},_takeBackAction:function(t){var e=this._actions,r=t._cacheIndex,n=--this._nActiveActions,i=e[n];t._cacheIndex=n;e[n]=t;i._cacheIndex=r;e[r]=i},_addInactiveBinding:function(t,e,r){var n=this._bindingsByRootAndName,i=n[e],a=this._bindings;if(void 0===i){i={};n[e]=i}i[r]=t;t._cacheIndex=a.length;a.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,r=t.binding,n=r.rootNode.uuid,i=r.path,a=this._bindingsByRootAndName,o=a[n],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u;e[u]=s;e.pop();delete o[i];t:{for(var c in o)break t;delete a[n]}},_lendBinding:function(t){var e=this._bindings,r=t._cacheIndex,n=this._nActiveBindings++,i=e[n];t._cacheIndex=n;e[n]=t;i._cacheIndex=r;e[r]=i},_takeBackBinding:function(t){var e=this._bindings,r=t._cacheIndex,n=--this._nActiveBindings,i=e[n];t._cacheIndex=n;e[n]=t;i._cacheIndex=r;e[r]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,r=t[e];if(void 0===r){r=new Tc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer);r.__cacheIndex=e;t[e]=r}return r},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,r=t.__cacheIndex,n=--this._nActiveControlInterpolants,i=e[n];t.__cacheIndex=n;e[n]=t;i.__cacheIndex=r;e[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var r=e||this._root,n=r.uuid,i="string"===typeof t?Pc.findByName(r,t):t,a=null!==i?i.uuid:t,o=this._actionsByClip[a],s=null;if(void 0!==o){var u=o.actionByRoot[n];if(void 0!==u)return u;s=o.knownActions[0];if(null===i)i=s._clip}if(null===i)return null;var c=new ul(this,i,e);this._bindAction(c,s);this._addInactiveAction(c,a,n);return c},existingAction:function(t,e){var r=e||this._root,n=r.uuid,i="string"===typeof t?Pc.findByName(r,t):t,a=i?i.uuid:t,o=this._actionsByClip[a];if(void 0!==o)return o.actionByRoot[n]||null;return null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0;this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(var i=0;i!==n;++i)r[i].useCount=0;return this},update:function(t){t*=this.timeScale;var e=this._actions,r=this._nActiveActions,n=this.time+=t,i=Math.sign(t),a=this._accuIndex^=1;for(var o=0;o!==r;++o){var s=e[o];s._update(n,t,i,a)}var u=this._bindings,c=this._nActiveBindings;for(var o=0;o!==c;++o)u[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,r=t.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){var a=i.knownActions;for(var o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var c=u._cacheIndex,l=e[e.length-1];u._cacheIndex=null;u._byClipCacheIndex=null;l._cacheIndex=c;e[c]=l;e.pop();this._removeInactiveBindingsForAction(u)}delete n[r]}},uncacheRoot:function(t){var e=t.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot,a=i[e];if(void 0!==a){this._deactivateAction(a);this._removeInactiveAction(a)}}var o=this._bindingsByRootAndName,s=o[e];if(void 0!==s)for(var u in s){var c=s[u];c.restoreOriginalState();this._removeInactiveBinding(c)}},uncacheAction:function(t,e){var r=this.existingAction(t,e);if(null!==r){this._deactivateAction(r);this._removeInactiveAction(r)}}});function ll(t){if("string"===typeof t){console.warn("THREE.Uniform: Type parameter is no longer needed.");t=arguments[1]}this.value=t}ll.prototype.clone=function(){return new ll(void 0===this.value.clone?this.value:this.value.clone())};function hl(){Aa.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}hl.prototype=Object.assign(Object.create(Aa.prototype),{constructor:hl,isInstancedBufferGeometry:true,copy:function(t){Aa.prototype.copy.call(this,t);this.maxInstancedCount=t.maxInstancedCount;return this},clone:function(){return(new this.constructor).copy(this)}});function fl(t,e,r,n){this.uuid=Fe.generateUUID();this.data=t;this.itemSize=e;this.offset=r;this.normalized=true===n}Object.defineProperties(fl.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(fl.prototype,{isInterleavedBufferAttribute:true,setX:function(t,e){this.data.array[t*this.data.stride+this.offset]=e;return this},setY:function(t,e){this.data.array[t*this.data.stride+this.offset+1]=e;return this},setZ:function(t,e){this.data.array[t*this.data.stride+this.offset+2]=e;return this},setW:function(t,e){this.data.array[t*this.data.stride+this.offset+3]=e;return this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,r){t=t*this.data.stride+this.offset;this.data.array[t+0]=e;this.data.array[t+1]=r;return this},setXYZ:function(t,e,r,n){t=t*this.data.stride+this.offset;this.data.array[t+0]=e;this.data.array[t+1]=r;this.data.array[t+2]=n;return this},setXYZW:function(t,e,r,n,i){t=t*this.data.stride+this.offset;this.data.array[t+0]=e;this.data.array[t+1]=r;this.data.array[t+2]=n;this.data.array[t+3]=i;return this}});function pl(t,e){this.uuid=Fe.generateUUID();this.array=t;this.stride=e;this.count=void 0!==t?t.length/e:0;this.dynamic=false;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}Object.defineProperty(pl.prototype,"needsUpdate",{set:function(t){if(true===t)this.version++}});Object.assign(pl.prototype,{isInterleavedBuffer:true,setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.stride:0;this.array=t},setDynamic:function(t){this.dynamic=t;return this},copy:function(t){this.array=new t.array.constructor(t.array);this.count=t.count;this.stride=t.stride;this.dynamic=t.dynamic;return this},copyAt:function(t,e,r){t*=this.stride;r*=e.stride;for(var n=0,i=this.stride;n<i;n++)this.array[t+n]=e.array[r+n];return this},set:function(t,e){if(void 0===e)e=0;this.array.set(t,e);return this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){this.onUploadCallback=t;return this}});function dl(t,e,r){pl.call(this,t,e);this.meshPerAttribute=r||1}dl.prototype=Object.assign(Object.create(pl.prototype),{constructor:dl,isInstancedInterleavedBuffer:true,copy:function(t){pl.prototype.copy.call(this,t);this.meshPerAttribute=t.meshPerAttribute;return this}});function vl(t,e,r){da.call(this,t,e);this.meshPerAttribute=r||1}vl.prototype=Object.assign(Object.create(da.prototype),{constructor:vl,isInstancedBufferAttribute:true,copy:function(t){da.prototype.copy.call(this,t);this.meshPerAttribute=t.meshPerAttribute;return this}});function ml(t,e,r,n){this.ray=new Na(t,e);this.near=r||0;this.far=n||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function gl(t,e){return t.distance-e.distance}function yl(t,e,r,n){if(false===t.visible)return;t.raycast(e,r);if(true===n){var i=t.children;for(var a=0,o=i.length;a<o;a++)yl(i[a],e,r,true)}}Object.assign(ml.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){if(e&&e.isPerspectiveCamera){this.ray.origin.setFromMatrixPosition(e.matrixWorld);this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()}else if(e&&e.isOrthographicCamera){this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e);this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)}else console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e){var r=[];yl(t,this,r,e);r.sort(gl);return r},intersectObjects:function(t,e){var r=[];if(false===Array.isArray(t)){console.warn("THREE.Raycaster.intersectObjects: objects is not an Array.");return r}for(var n=0,i=t.length;n<i;n++)yl(t[n],this,r,e);r.sort(gl);return r}});function xl(t){this.autoStart=void 0!==t?t:true;this.startTime=0;this.oldTime=0;this.elapsedTime=0;this.running=false}Object.assign(xl.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now();this.oldTime=this.startTime;this.elapsedTime=0;this.running=true},stop:function(){this.getElapsedTime();this.running=false;this.autoStart=false},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running){this.start();return 0}if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3;this.oldTime=e;this.elapsedTime+=t}return t}});function _l(t,e,r){this.radius=void 0!==t?t:1;this.phi=void 0!==e?e:0;this.theta=void 0!==r?r:0;return this}Object.assign(_l.prototype,{set:function(t,e,r){this.radius=t;this.phi=e;this.theta=r;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.radius=t.radius;this.phi=t.phi;this.theta=t.theta;return this},makeSafe:function(){var t=1e-6;this.phi=Math.max(t,Math.min(Math.PI-t,this.phi));return this},setFromVector3:function(t){this.radius=t.length();if(0===this.radius){this.theta=0;this.phi=0}else{this.theta=Math.atan2(t.x,t.z);this.phi=Math.acos(Fe.clamp(t.y/this.radius,-1,1))}return this}});function bl(t,e,r){this.radius=void 0!==t?t:1;this.theta=void 0!==e?e:0;this.y=void 0!==r?r:0;return this}Object.assign(bl.prototype,{set:function(t,e,r){this.radius=t;this.theta=e;this.y=r;return this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.radius=t.radius;this.theta=t.theta;this.y=t.y;return this},setFromVector3:function(t){this.radius=Math.sqrt(t.x*t.x+t.z*t.z);this.theta=Math.atan2(t.x,t.z);this.y=t.y;return this}});function wl(t,e){this.min=void 0!==t?t:new ke(+Infinity,+Infinity);this.max=void 0!==e?e:new ke(-Infinity,-Infinity)}Object.assign(wl.prototype,{set:function(t,e){this.min.copy(t);this.max.copy(e);return this},setFromPoints:function(t){this.makeEmpty();for(var e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new ke;return function e(r,n){var i=t.copy(n).multiplyScalar(.5);this.min.copy(r).sub(i);this.max.copy(r).add(i);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.min.copy(t.min);this.max.copy(t.max);return this},makeEmpty:function(){this.min.x=this.min.y=+Infinity;this.max.x=this.max.y=-Infinity;return this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var e=t||new ke;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new ke;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){this.min.min(t);this.max.max(t);return this},expandByVector:function(t){this.min.sub(t);this.max.add(t);return this},expandByScalar:function(t){this.min.addScalar(-t);this.max.addScalar(t);return this},containsPoint:function(t){return t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y?false:true},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){var r=e||new ke;return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y?false:true},clampPoint:function(t,e){var r=e||new ke;return r.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new ke;return function e(r){var n=t.copy(r).clamp(this.min,this.max);return n.sub(r).length()}}(),intersect:function(t){this.min.max(t.min);this.max.min(t.max);return this},union:function(t){this.min.min(t.min);this.max.max(t.max);return this},translate:function(t){this.min.add(t);this.max.add(t);return this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});function Ml(t){ua.call(this);this.material=t;this.render=function(){}}Ml.prototype=Object.create(ua.prototype);Ml.prototype.constructor=Ml;Ml.prototype.isImmediateRenderObject=true;function El(t,e,r,n){this.object=t;this.size=void 0!==e?e:1;var i=void 0!==r?r:16711680;var a=void 0!==n?n:1;var o=0;var s=this.object.geometry;if(s&&s.isGeometry)o=3*s.faces.length;else if(s&&s.isBufferGeometry)o=s.attributes.normal.count;var u=new Aa;var c=new wa(2*o*3,3);u.addAttribute("position",c);ko.call(this,u,new Bo({color:i,linewidth:a}));this.matrixAutoUpdate=false;this.update()}El.prototype=Object.create(ko.prototype);El.prototype.constructor=El;El.prototype.update=function(){var t=new Ge;var e=new Ge;var r=new Ve;return function n(){var i=["a","b","c"];this.object.updateMatrixWorld(true);r.getNormalMatrix(this.object.matrixWorld);var a=this.object.matrixWorld;var o=this.geometry.attributes.position;var s=this.object.geometry;if(s&&s.isGeometry){var u=s.vertices;var c=s.faces;var l=0;for(var h=0,f=c.length;h<f;h++){var p=c[h];for(var d=0,v=p.vertexNormals.length;d<v;d++){var m=u[p[i[d]]];var g=p.vertexNormals[d];t.copy(m).applyMatrix4(a);e.copy(g).applyMatrix3(r).normalize().multiplyScalar(this.size).add(t);o.setXYZ(l,t.x,t.y,t.z);l+=1;o.setXYZ(l,e.x,e.y,e.z);l+=1}}}else if(s&&s.isBufferGeometry){var y=s.attributes.position;var x=s.attributes.normal;var l=0;for(var d=0,v=y.count;d<v;d++){t.set(y.getX(d),y.getY(d),y.getZ(d)).applyMatrix4(a);e.set(x.getX(d),x.getY(d),x.getZ(d));e.applyMatrix3(r).normalize().multiplyScalar(this.size).add(t);o.setXYZ(l,t.x,t.y,t.z);l+=1;o.setXYZ(l,e.x,e.y,e.z);l+=1}}o.needsUpdate=true}}();function Sl(t,e){ua.call(this);this.light=t;this.light.updateMatrixWorld();this.matrix=t.matrixWorld;this.matrixAutoUpdate=false;this.color=e;var r=new Aa;var n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,a=1,o=32;i<o;i++,a++){var s=i/o*Math.PI*2;var u=a/o*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(u),Math.sin(u),1)}r.addAttribute("position",new wa(n,3));var c=new Bo({fog:false});this.cone=new ko(r,c);this.add(this.cone);this.update()}Sl.prototype=Object.create(ua.prototype);Sl.prototype.constructor=Sl;Sl.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};Sl.prototype.update=function(){var t=new Ge;var e=new Ge;return function r(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3;var i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n);t.setFromMatrixPosition(this.light.matrixWorld);e.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(e.sub(t));if(void 0!==this.color)this.cone.material.color.set(this.color);else this.cone.material.color.copy(this.light.color)}}();function Tl(t){var e=[];if(t&&t.isBone)e.push(t);for(var r=0;r<t.children.length;r++)e.push.apply(e,Tl(t.children[r]));return e}function Al(t){var e=Tl(t);var r=new Aa;var n=[];var i=[];var a=new kr(0,0,1);var o=new kr(0,1,0);for(var s=0;s<e.length;s++){var u=e[s];if(u.parent&&u.parent.isBone){n.push(0,0,0);n.push(0,0,0);i.push(a.r,a.g,a.b);i.push(o.r,o.g,o.b)}}r.addAttribute("position",new wa(n,3));r.addAttribute("color",new wa(i,3));var c=new Bo({vertexColors:T,depthTest:false,depthWrite:false,transparent:true});ko.call(this,r,c);this.root=t;this.bones=e;this.matrix=t.matrixWorld;this.matrixAutoUpdate=false}Al.prototype=Object.create(ko.prototype);Al.prototype.constructor=Al;Al.prototype.updateMatrixWorld=function(){var t=new Ge;var e=new He;var r=new He;return function n(i){var a=this.bones;var o=this.geometry;var s=o.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var u=0,c=0;u<a.length;u++){var l=a[u];if(l.parent&&l.parent.isBone){e.multiplyMatrices(r,l.matrixWorld);t.setFromMatrixPosition(e);s.setXYZ(c,t.x,t.y,t.z);e.multiplyMatrices(r,l.parent.matrixWorld);t.setFromMatrixPosition(e);s.setXYZ(c+1,t.x,t.y,t.z);c+=2}}o.getAttribute("position").needsUpdate=true;ua.prototype.updateMatrixWorld.call(this,i)}}();function Rl(t,e,r){this.light=t;this.light.updateMatrixWorld();this.color=r;var n=new Js(e,4,2);var i=new Ia({wireframe:true,fog:false});za.call(this,n,i);this.matrix=this.light.matrixWorld;this.matrixAutoUpdate=false;this.update()}Rl.prototype=Object.create(za.prototype);Rl.prototype.constructor=Rl;Rl.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};Rl.prototype.update=function(){if(void 0!==this.color)this.material.color.set(this.color);else this.material.color.copy(this.light.color)};function Ll(t,e){ua.call(this);this.light=t;this.light.updateMatrixWorld();this.matrix=t.matrixWorld;this.matrixAutoUpdate=false;this.color=e;var r=new Bo({fog:false});var n=new Aa;n.addAttribute("position",new da(new Float32Array(5*3),3));this.line=new Fo(n,r);this.add(this.line);this.update()}Ll.prototype=Object.create(ua.prototype);Ll.prototype.constructor=Ll;Ll.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};Ll.prototype.update=function(){var t=.5*this.light.width;var e=.5*this.light.height;var r=this.line.geometry.attributes.position;var n=r.array;n[0]=t;n[1]=-e;n[2]=0;n[3]=t;n[4]=e;n[5]=0;n[6]=-t;n[7]=e;n[8]=0;n[9]=-t;n[10]=-e;n[11]=0;n[12]=t;n[13]=-e;n[14]=0;r.needsUpdate=true;if(void 0!==this.color)this.line.material.color.set(this.color);else this.line.material.color.copy(this.light.color)};function Cl(t,e,r){ua.call(this);this.light=t;this.light.updateMatrixWorld();this.matrix=t.matrixWorld;this.matrixAutoUpdate=false;this.color=r;var n=new rs(e);n.rotateY(.5*Math.PI);this.material=new Ia({wireframe:true,fog:false});if(void 0===this.color)this.material.vertexColors=T;var i=n.getAttribute("position");var a=new Float32Array(3*i.count);n.addAttribute("color",new da(a,3));this.add(new za(n,this.material));this.update()}Cl.prototype=Object.create(ua.prototype);Cl.prototype.constructor=Cl;Cl.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose()};Cl.prototype.update=function(){var t=new Ge;var e=new kr;var r=new kr;return function n(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var a=i.geometry.getAttribute("color");e.copy(this.light.color);r.copy(this.light.groundColor);for(var o=0,s=a.count;o<s;o++){var u=o<s/2?e:r;a.setXYZ(o,u.r,u.g,u.b)}a.needsUpdate=true}i.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}();function Pl(t,e,r,n){t=t||10;e=e||10;r=new kr(void 0!==r?r:4473924);n=new kr(void 0!==n?n:8947848);var i=e/2;var a=t/e;var o=t/2;var s=[],u=[];for(var c=0,l=0,h=-o;c<=e;c++,h+=a){s.push(-o,0,h,o,0,h);s.push(h,0,-o,h,0,o);var f=c===i?r:n;f.toArray(u,l);l+=3;f.toArray(u,l);l+=3;f.toArray(u,l);l+=3;f.toArray(u,l);l+=3}var p=new Aa;p.addAttribute("position",new wa(s,3));p.addAttribute("color",new wa(u,3));var d=new Bo({vertexColors:T});ko.call(this,p,d)}Pl.prototype=Object.create(ko.prototype);Pl.prototype.constructor=Pl;function Il(t,e,r,n,i,a){t=t||10;e=e||16;r=r||8;n=n||64;i=new kr(void 0!==i?i:4473924);a=new kr(void 0!==a?a:8947848);var o=[];var s=[];var u,c;var l,h,f,p,d;for(h=0;h<=e;h++){l=h/e*(2*Math.PI);u=Math.sin(l)*t;c=Math.cos(l)*t;o.push(0,0,0);o.push(u,0,c);d=1&h?i:a;s.push(d.r,d.g,d.b);s.push(d.r,d.g,d.b)}for(h=0;h<=r;h++){d=1&h?i:a;p=t-t/r*h;for(f=0;f<n;f++){l=f/n*(2*Math.PI);u=Math.sin(l)*p;c=Math.cos(l)*p;o.push(u,0,c);s.push(d.r,d.g,d.b);l=(f+1)/n*(2*Math.PI);u=Math.sin(l)*p;c=Math.cos(l)*p;o.push(u,0,c);s.push(d.r,d.g,d.b)}}var v=new Aa;v.addAttribute("position",new wa(o,3));v.addAttribute("color",new wa(s,3));var m=new Bo({vertexColors:T});ko.call(this,v,m)}Il.prototype=Object.create(ko.prototype);Il.prototype.constructor=Il;function Ol(t,e,r,n){this.object=t;this.size=void 0!==e?e:1;var i=void 0!==r?r:16776960;var a=void 0!==n?n:1;var o=0;var s=this.object.geometry;if(s&&s.isGeometry)o=s.faces.length;else console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new Aa;var c=new wa(2*o*3,3);u.addAttribute("position",c);ko.call(this,u,new Bo({color:i,linewidth:a}));this.matrixAutoUpdate=false;this.update()}Ol.prototype=Object.create(ko.prototype);Ol.prototype.constructor=Ol;Ol.prototype.update=function(){var t=new Ge;var e=new Ge;var r=new Ve;return function n(){this.object.updateMatrixWorld(true);r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld;var a=this.geometry.attributes.position;var o=this.object.geometry;var s=o.vertices;var u=o.faces;var c=0;for(var l=0,h=u.length;l<h;l++){var f=u[l];var p=f.normal;t.copy(s[f.a]).add(s[f.b]).add(s[f.c]).divideScalar(3).applyMatrix4(i);e.copy(p).applyMatrix3(r).normalize().multiplyScalar(this.size).add(t);a.setXYZ(c,t.x,t.y,t.z);c+=1;a.setXYZ(c,e.x,e.y,e.z);c+=1}a.needsUpdate=true}}();function Nl(t,e,r){ua.call(this);this.light=t;this.light.updateMatrixWorld();this.matrix=t.matrixWorld;this.matrixAutoUpdate=false;this.color=r;if(void 0===e)e=1;var n=new Aa;n.addAttribute("position",new wa([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new Bo({fog:false});this.lightPlane=new Fo(n,i);this.add(this.lightPlane);n=new Aa;n.addAttribute("position",new wa([0,0,0,0,0,1],3));this.targetLine=new Fo(n,i);this.add(this.targetLine);this.update()}Nl.prototype=Object.create(ua.prototype);Nl.prototype.constructor=Nl;Nl.prototype.dispose=function(){this.lightPlane.geometry.dispose();this.lightPlane.material.dispose();this.targetLine.geometry.dispose();this.targetLine.material.dispose()};Nl.prototype.update=function(){var t=new Ge;var e=new Ge;var r=new Ge;return function n(){t.setFromMatrixPosition(this.light.matrixWorld);e.setFromMatrixPosition(this.light.target.matrixWorld);r.subVectors(e,t);this.lightPlane.lookAt(r);if(void 0!==this.color){this.lightPlane.material.color.set(this.color);this.targetLine.material.color.set(this.color)}else{this.lightPlane.material.color.copy(this.light.color);this.targetLine.material.color.copy(this.light.color)}this.targetLine.lookAt(r);this.targetLine.scale.z=r.length()}}();function Ul(t){var e=new Aa;var r=new Bo({color:16777215,vertexColors:S});var n=[];var i=[];var a={};var o=new kr(16755200);var s=new kr(16711680);var u=new kr(43775);var c=new kr(16777215);var l=new kr(3355443);h("n1","n2",o);h("n2","n4",o);h("n4","n3",o);h("n3","n1",o);h("f1","f2",o);h("f2","f4",o);h("f4","f3",o);h("f3","f1",o);h("n1","f1",o);h("n2","f2",o);h("n3","f3",o);h("n4","f4",o);h("p","n1",s);h("p","n2",s);h("p","n3",s);h("p","n4",s);h("u1","u2",u);h("u2","u3",u);h("u3","u1",u);h("c","t",c);h("p","c",l);h("cn1","cn2",l);h("cn3","cn4",l);h("cf1","cf2",l);h("cf3","cf4",l);function h(t,e,r){f(t,r);f(e,r)}function f(t,e){n.push(0,0,0);i.push(e.r,e.g,e.b);if(void 0===a[t])a[t]=[];a[t].push(n.length/3-1)}e.addAttribute("position",new wa(n,3));e.addAttribute("color",new wa(i,3));ko.call(this,e,r);this.camera=t;if(this.camera.updateProjectionMatrix)this.camera.updateProjectionMatrix();this.matrix=t.matrixWorld;this.matrixAutoUpdate=false;this.pointMap=a;this.update()}Ul.prototype=Object.create(ko.prototype);Ul.prototype.constructor=Ul;Ul.prototype.update=function(){var t,e;var r=new Ge;var n=new ca;function i(i,a,o,s){r.set(a,o,s).unproject(n);var u=e[i];if(void 0!==u){var c=t.getAttribute("position");for(var l=0,h=u.length;l<h;l++)c.setXYZ(u[l],r.x,r.y,r.z)}}return function r(){t=this.geometry;e=this.pointMap;var a=1,o=1;n.projectionMatrix.copy(this.camera.projectionMatrix);i("c",0,0,-1);i("t",0,0,1);i("n1",-a,-o,-1);i("n2",a,-o,-1);i("n3",-a,o,-1);i("n4",a,o,-1);i("f1",-a,-o,1);i("f2",a,-o,1);i("f3",-a,o,1);i("f4",a,o,1);i("u1",.7*a,1.1*o,-1);i("u2",.7*-a,1.1*o,-1);i("u3",0,2*o,-1);i("cf1",-a,0,1);i("cf2",a,0,1);i("cf3",0,-o,1);i("cf4",0,o,1);i("cn1",-a,0,-1);i("cn2",a,0,-1);i("cn3",0,-o,-1);i("cn4",0,o,-1);t.getAttribute("position").needsUpdate=true}}();function Dl(t,e){this.object=t;if(void 0===e)e=16776960;var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var n=new Float32Array(8*3);var i=new Aa;i.setIndex(new da(r,1));i.addAttribute("position",new da(n,3));ko.call(this,i,new Bo({color:e}));this.matrixAutoUpdate=false;this.update()}Dl.prototype=Object.create(ko.prototype);Dl.prototype.constructor=Dl;Dl.prototype.update=function(){var t=new $i;return function e(r){if(void 0!==r)console.warn("THREE.BoxHelper: .update() has no longer arguments.");if(void 0!==this.object)t.setFromObject(this.object);if(t.isEmpty())return;var n=t.min;var i=t.max;var a=this.geometry.attributes.position;var o=a.array;o[0]=i.x;o[1]=i.y;o[2]=i.z;o[3]=n.x;o[4]=i.y;o[5]=i.z;o[6]=n.x;o[7]=n.y;o[8]=i.z;o[9]=i.x;o[10]=n.y;o[11]=i.z;o[12]=i.x;o[13]=i.y;o[14]=n.z;o[15]=n.x;o[16]=i.y;o[17]=n.z;o[18]=n.x;o[19]=n.y;o[20]=n.z;o[21]=i.x;o[22]=n.y;o[23]=n.z;a.needsUpdate=true;this.geometry.computeBoundingSphere()}}();Dl.prototype.setFromObject=function(t){this.object=t;this.update();return this};function zl(t,e){this.type="Box3Helper";this.box=t;var r=void 0!==e?e:16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1];var a=new Aa;a.setIndex(new da(n,1));a.addAttribute("position",new wa(i,3));ko.call(this,a,new Bo({color:r}));this.geometry.computeBoundingSphere()}zl.prototype=Object.create(ko.prototype);zl.prototype.constructor=zl;zl.prototype.updateMatrixWorld=function(t){var e=this.box;if(e.isEmpty())return;e.getCenter(this.position);e.getSize(this.scale);this.scale.multiplyScalar(.5);ua.prototype.updateMatrixWorld.call(this,t)};function Bl(t,e,r){this.type="PlaneHelper";this.plane=t;this.size=void 0===e?1:e;var n=void 0!==r?r:16776960;var i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0];var a=new Aa;a.addAttribute("position",new wa(i,3));a.computeBoundingSphere();Fo.call(this,a,new Bo({color:n}));var o=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1];var s=new Aa;s.addAttribute("position",new wa(o,3));s.computeBoundingSphere();this.add(new za(s,new Ia({color:n,opacity:.2,transparent:true,depthWrite:false})))}Bl.prototype=Object.create(Fo.prototype);Bl.prototype.constructor=Bl;Bl.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;if(Math.abs(e)<1e-8)e=1e-8;this.scale.set(.5*this.size,.5*this.size,e);this.lookAt(this.plane.normal);ua.prototype.updateMatrixWorld.call(this,t)};var Fl;var kl;function Hl(t,e,r,n,i,a){ua.call(this);if(void 0===n)n=16776960;if(void 0===r)r=1;if(void 0===i)i=.2*r;if(void 0===a)a=.2*i;if(void 0===Fl){Fl=new Aa;Fl.addAttribute("position",new wa([0,0,0,0,1,0],3));kl=new ou(0,.5,1,5,1);kl.translate(0,-.5,0)}this.position.copy(e);this.line=new Fo(Fl,new Bo({color:n}));this.line.matrixAutoUpdate=false;this.add(this.line);this.cone=new za(kl,new Ia({color:n}));this.cone.matrixAutoUpdate=false;this.add(this.cone);this.setDirection(t);this.setLength(r,i,a)}Hl.prototype=Object.create(ua.prototype);Hl.prototype.constructor=Hl;Hl.prototype.setDirection=function(){var t=new Ge;var e;return function r(n){if(n.y>.99999)this.quaternion.set(0,0,0,1);else if(n.y<-.99999)this.quaternion.set(1,0,0,0);else{t.set(n.z,0,-n.x).normalize();e=Math.acos(n.y);this.quaternion.setFromAxisAngle(t,e)}}}();Hl.prototype.setLength=function(t,e,r){if(void 0===e)e=.2*t;if(void 0===r)r=.2*e;this.line.scale.set(1,Math.max(0,t-e),1);this.line.updateMatrix();this.cone.scale.set(r,e,r);this.cone.position.y=t;this.cone.updateMatrix()};Hl.prototype.setColor=function(t){this.line.material.color.copy(t);this.cone.material.color.copy(t)};function jl(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t];var r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1];var n=new Aa;n.addAttribute("position",new wa(e,3));n.addAttribute("color",new wa(r,3));var i=new Bo({vertexColors:T});ko.call(this,n,i)}jl.prototype=Object.create(ko.prototype);jl.prototype.constructor=jl;function Gl(t,e,r,n,i,a,o){console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead.");return new ha(t,e,r,i,a,o)}var Vl=0;var Wl=1;function Xl(t){console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead.");return t}function ql(t){if(void 0===t)t=[];console.warn("THREE.MultiMaterial has been removed. Use an Array instead.");t.isMultiMaterial=true;t.materials=t;t.clone=function(){return t.slice()};return t}function Yl(t,e){console.warn("THREE.PointCloud has been renamed to THREE.Points.");return new Go(t,e)}function Zl(t){console.warn("THREE.Particle has been renamed to THREE.Sprite.");return new Oo(t)}function Jl(t,e){console.warn("THREE.ParticleSystem has been renamed to THREE.Points.");return new Go(t,e)}function Ql(t){console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.");return new jo(t)}function Kl(t){console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.");return new jo(t)}function $l(t){console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.");return new jo(t)}function th(t,e,r){console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead.");return new Ge(t,e,r)}function eh(t,e){console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.");return new da(t,e).setDynamic(true)}function rh(t,e){console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.");return new va(t,e)}function nh(t,e){console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.");return new ma(t,e)}function ih(t,e){console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.");return new ga(t,e)}function ah(t,e){console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.");return new ya(t,e)}function oh(t,e){console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.");return new xa(t,e)}function sh(t,e){console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.");return new _a(t,e)}function uh(t,e){console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.");return new ba(t,e)}function ch(t,e){console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.");return new wa(t,e)}function lh(t,e){console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.");return new Ma(t,e)}Iu.create=function(t,e){console.log("THREE.Curve.create() has been deprecated");t.prototype=Object.create(Iu.prototype);t.prototype.constructor=t;t.prototype.getPoint=e;return t};Object.assign(ac.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=new pa;for(var r=0,n=t.length;r<n;r++){var i=t[r];e.vertices.push(new Ge(i.x,i.y,i.z||0))}return e}});Object.assign(oc.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints().");this.setFromPoints(t)}});function hh(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ku.call(this,t);this.type="catmullrom";this.closed=true}hh.prototype=Object.create(ku.prototype);function fh(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.");ku.call(this,t);this.type="catmullrom"}fh.prototype=Object.create(ku.prototype);function ph(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.");ku.call(this,t);this.type="catmullrom"}ph.prototype=Object.create(ku.prototype);Object.assign(ph.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function dh(t){console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper.");return new jl(t)}function vh(t,e){console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.");return new Dl(t,e)}function mh(t,e){console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.");return new ko(new iu(t.geometry),new Bo({color:void 0!==e?e:16777215}))}Pl.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Al.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function gh(t,e){console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.");return new ko(new Yo(t.geometry),new Bo({color:void 0!==e?e:16777215}))}Object.assign(Uc.prototype,{extractUrlBase:function(t){console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.");return Dc.extractUrlBase(t)}});function yh(t){console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader.");return new Tu(t)}function xh(t){console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.");return new Ru(t)}Object.assign(wl.prototype,{center:function(t){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(t)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(t){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(t)},size:function(t){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(t)}});Object.assign($i.prototype,{center:function(t){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(t)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(t){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(t)},isIntersectionSphere:function(t){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(t)},size:function(t){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(t)}});Ua.prototype.center=function(t){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(t)};Object.assign(Fe,{random16:function(){console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead.");return Math.random()},nearestPowerOfTwo:function(t){console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().");return Fe.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().");return Fe.ceilPowerOfTwo(t)}});Object.assign(Ve.prototype,{flattenToArrayOffset:function(t,e){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(t,e)},multiplyVector3:function(t){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(He.prototype,{extractPosition:function(t){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(t)},flattenToArrayOffset:function(t,e){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(t,e)},getPosition:function(){var t;return function e(){if(void 0===t)t=new Ge;console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");return this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return t.applyMatrix4(this)},multiplyVector4:function(t){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");t.transformDirection(this)},crossVector:function(t){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,r,n,i,a){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(t,e,n,r,i,a)}});ea.prototype.isIntersectionLine=function(t){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(t)};je.prototype.multiplyVector3=function(t){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return t.applyQuaternion(this)};Object.assign(Na.prototype,{isIntersectionBox:function(t){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(t)},isIntersectionPlane:function(t){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(t)},isIntersectionSphere:function(t){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(t)}});Object.assign(sc.prototype,{extractAllPoints:function(t){console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.");return this.extractPoints(t)},extrude:function(t){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new Ws(this,t)},makeGeometry:function(t){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new eu(this,t)}});Object.assign(ke.prototype,{fromAttribute:function(t,e,r){console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(t,e,r)},distanceToManhattan:function(t){console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(t)},lengthManhattan:function(){console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(Ge.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(e,t)},applyProjection:function(t){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(t)},fromAttribute:function(t,e,r){console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(t,e,r)},distanceToManhattan:function(t){console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().");return this.manhattanDistanceTo(t)},lengthManhattan:function(){console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(qe.prototype,{fromAttribute:function(t,e,r){console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(t,e,r)},lengthManhattan:function(){console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().");return this.manhattanLength()}});Object.assign(pa.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}});Object.assign(ua.prototype,{getChildByName:function(t){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(e,t)}});Object.defineProperties(ua.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(No.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Object.defineProperty(Uo.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(Iu.prototype,"__arcLengthDivisions",{get:function(){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");return this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.");this.arcLengthDivisions=t}});go.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. "+"Use .setFocalLength and .filmGauge for a photographic setup.");if(void 0!==e)this.filmGauge=e;this.setFocalLength(t)};Object.defineProperties(uc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=t}}});Object.defineProperties(da.prototype,{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}}});Object.assign(Aa.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(t)},addDrawCall:function(t,e,r){if(void 0!==r)console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(Aa.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");return this.groups}}});Object.defineProperties(ll.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(Ji.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE.Material: .wrapRGB has been removed.");return new kr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.");this.flatShading=t===w}}});Object.defineProperties(mu.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return false},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Oa.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");return this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=t}}});Object.assign(Ro.prototype,{getCurrentRenderTarget:function(){console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().");return this.getRenderTarget()},getMaxAnisotropy:function(){console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().");return this.capabilities.getMaxAnisotropy()},getPrecision:function(){console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.");return this.capabilities.precision},resetGLState:function(){console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset().");return this.state.reset()},supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}});Object.defineProperties(Ro.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.");return},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(na.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.");return},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.");return},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.");return},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Ye.prototype,{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=t}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=t}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");return this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=t}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=t}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");return this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=t}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=t}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=t}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=t}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");this.texture.type=t}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=t}}});Object.defineProperties(xo.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}});tl.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;var r=new Jc;r.load(t,function(t){e.setBuffer(t)});return this};rl.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};Kc.prototype.updateCubeMap=function(t,e){console.warn("THREE.CubeCamera: .updateCubeMap() is now .update().");return this.update(t,e)};var _h={merge:function(t,e,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;if(e.isMesh){e.matrixAutoUpdate&&e.updateMatrix();n=e.matrix;e=e.geometry}t.merge(e,n,r)},center:function(t){console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.");return t.center()}};var bh={crossOrigin:void 0,loadTexture:function(t,e,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Pu;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,r,void 0,n);if(e)a.mapping=e;return a},loadTextureCube:function(t,e,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Cu;i.setCrossOrigin(this.crossOrigin);var a=i.load(t,r,void 0,n);if(e)a.mapping=e;return a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function wh(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js.");this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project().");t.project(e)};this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject().");t.unproject(e)};this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Mh(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js");this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.clear=function(){};this.render=function(){};this.setClearColor=function(){};this.setSize=function(){}}var Eh={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function Sh(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}var Th=r(197);var Ah=r.n(Th);var Rh=function(){function t(t,e){var r=[];var n=true;var i=false;var a=void 0;try{for(var o=t[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(e&&r.length===e)break}}catch(t){i=true;a=t}finally{try{if(!n&&o["return"])o["return"]()}finally{if(i)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;else if(Symbol.iterator in Object(e))return t(e,r);else throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var Lh=void 0;var Ch=function(t,e){if(Lh)Lh.domElement.remove();var r=new go(70,window.innerWidth/window.innerHeight,.01,10);r.position.z=1;var n=new Po;n.background=new kr(16777215);var i=function t(e){var r=Ah.a.sample([-1,1]);var n=Ah.a.sample([-1,1]);var i=2e-4;var a=Ah.a.random(-.001,.001);var o=Ah.a.random(-.001,.001);return function(){var t=e.geometry.boundingSphere.radius;if(e.position.x+t>=1||e.position.x-t<=-1)r*=-1;if(e.position.y+t>=1||e.position.y-(t+.45)<=-1)n*=-1;e.rotation.x+=a;e.rotation.y+=o;e.position.x+=i*r;e.position.y+=i*n}};var a=function t(e){var r=Ph(e);n.add(r);return{geo:r,move:i(r)}};var o=[a("sphere"),a("bigbox"),a("smallbox"),a("halfsphere"),a("horn")];Lh=new Ro({antialias:true});Lh.setSize(window.innerWidth,window.innerHeight);t.appendChild(Lh.domElement);var s=false;setTimeout(function(){return s=true},2e3);var u=function t(){if(s)o.forEach(function(t){return t.move()});Lh.render(n,r);requestAnimationFrame(t)};u();e()};var Ph=function t(e){var r={bigbox:new Ra(.5,.5,.5),smallbox:new Ra(.14,.14,.14),sphere:new Zs(.125,7,7),halfsphere:function(){var t=new sc;t.moveTo(.07,-.33);t.lineTo(.07,-.33);t.lineTo(-.33,-.33);t.bezierCurveTo(-.33,.07,.07,.07,.07,.07);var e={amount:-.25,bevelEnabled:false};return new Ws(t,e)}(),horn:function(){var t=new sc;t.moveTo(.07,.07);t.lineTo(.33,.07);t.lineTo(.07,-.03);var e={amount:-.05,bevelEnabled:false};return new Ws(t,e)}()}[e];var n={bigbox:3289850,smallbox:4384918,sphere:4384918,halfsphere:4384918,horn:15727123}[e];var i=new iu(r);var a=new Bo({color:n});var o=new ko(i,a);var s=Rh({bigbox:[.38,0],smallbox:[.58,-.17],sphere:[.578,-.05],halfsphere:[.5,0],horn:[.5,0]}[e],2),u=s[0],c=s[1];o.position.x=u;o.position.y=c;return o};var Ih;function Oh(t,e,r){if(e in t)Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true});else t[e]=r;return t}var Nh={xxs:5,xs:13,s:20,m:30,l:55,xl:90,xxl:145,xxxl:235};var Uh={blue1:"#3232FA",gray1:"#151515",gray2:"#353535",gray6:"#E7E7E7"};var Dh=98;var zh=Nh.m;var Bh=1250;var Fh=76;var kh={desktop:"\n    max-width: "+(Bh+2*Nh.l)+"px;\n    padding: 0 "+Nh.l+"px;\n    margin: auto;\n  ",mobile:"\n    padding: 0 "+Nh.s+"px;\n  "};var Hh=function t(e){return"\n    max-width: "+(e*Dh+(e-1)*zh)+"px;\n  "};var jh="Helvetica Neue, Helvetica, Nimbus Sans, Arial, sans-serif;";var Gh="Nimbus, Arial, sans-serif;";var Vh="Source Code, mono;";var Wh="Meta, serif;";var Xh=(Ih={helveticaL:"\n    font-family: "+jh+";\n    font-size: 17px;\n  ",helveticaM:"\n    font-family: "+jh+";\n    font-size: 15px;\n  "},Oh(Ih,"helveticaM","\n    font-family: "+jh+";\n    font-size: 15px;\n  "),Oh(Ih,"nimbusM","\n    font-family: "+Gh+";\n    font-size: 55px;\n    line-height: 58px;\n  "),Oh(Ih,"nimbusS","\n    font-family: "+Gh+";\n    font-size: 34px;\n    line-height: 40px;\n  "),Oh(Ih,"sourceCodeLabelL","\n    font-family: "+Vh+";\n    font-size: 17px;\n    text-transform: uppercase;\n    letter-spacing: 3px;\n  "),Oh(Ih,"sourceCodeLabelM","\n    font-family: "+Vh+";\n    font-size: 14px;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n  "),Oh(Ih,"sourceCodeCaptionM","\n    font-family: "+Vh+";\n    font-size: 13px;\n    line-height: 18px;\n  "),Oh(Ih,"metaSerifL","\n      font-family: "+Wh+";\n      font-size: 24px;\n      line-height: 32px;\n  "),Oh(Ih,"metaSerifM","\n      font-family: "+Wh+";\n      font-size: 20px;\n      line-height: 27px;\n  "),Ih);var qh=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(t,n.key,n)}}return function(e,r,n){if(r)t(e.prototype,r);if(n)t(e,n);return e}}();function Yh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zh(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"===typeof e||"function"===typeof e)?e:t}function Jh(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var Qh=function(t){Jh(e,t);function e(){Yh(this,e);var t=Zh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.handleScroll=function(e){var r=document.documentElement;var n=(window.pageXOffset||r.scrollLeft)-(r.clientLeft||0);var i=(window.pageYOffset||r.scrollTop)-(r.clientTop||0);t.setState({scrollTop:i})};t.state={scrollTop:0};return t}qh(e,[{key:"componentDidMount",value:function t(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function t(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function t(){return o.a.createElement("header",{className:i.a.dynamic([["451894699",[Nh.m,Xh.helveticaL,Nh.xs,this.state.scrollTop>0&&"\n      background: white;\n      box-shadow: 1px 1px 10px rgba(0,0,0,0.1);\n      ",Xh.helveticaM,Nh.s]]])},o.a.createElement("nav",{className:i.a.dynamic([["451894699",[Nh.m,Xh.helveticaL,Nh.xs,this.state.scrollTop>0&&"\n      background: white;\n      box-shadow: 1px 1px 10px rgba(0,0,0,0.1);\n      ",Xh.helveticaM,Nh.s]]])},o.a.createElement("img",{src:"/static/logo.png",className:i.a.dynamic([["451894699",[Nh.m,Xh.helveticaL,Nh.xs,this.state.scrollTop>0&&"\n      background: white;\n      box-shadow: 1px 1px 10px rgba(0,0,0,0.1);\n      ",Xh.helveticaM,Nh.s]]])}),o.a.createElement("a",{className:i.a.dynamic([["451894699",[Nh.m,Xh.helveticaL,Nh.xs,this.state.scrollTop>0&&"\n      background: white;\n      box-shadow: 1px 1px 10px rgba(0,0,0,0.1);\n      ",Xh.helveticaM,Nh.s]]])},"What we do"),o.a.createElement("a",{className:i.a.dynamic([["451894699",[Nh.m,Xh.helveticaL,Nh.xs,this.state.scrollTop>0&&"\n      background: white;\n      box-shadow: 1px 1px 10px rgba(0,0,0,0.1);\n      ",Xh.helveticaM,Nh.s]]])},"Who we are"),o.a.createElement("a",{className:i.a.dynamic([["451894699",[Nh.m,Xh.helveticaL,Nh.xs,this.state.scrollTop>0&&"\n      background: white;\n      box-shadow: 1px 1px 10px rgba(0,0,0,0.1);\n      ",Xh.helveticaM,Nh.s]]])},"Hire us")),o.a.createElement(i.a,{styleId:"451894699",css:["a.__jsx-style-dynamic-selector,img.__jsx-style-dynamic-selector{display:inline-block;vertical-align:middle;margin-right:"+Nh.m+"px;}","a.__jsx-style-dynamic-selector{"+Xh.helveticaL+" font-weight:bold;}","nav.__jsx-style-dynamic-selector{padding:"+Nh.xs+"px;-webkit-transition:box-shadow 0.3s ease-in-out,background 0.3s ease-in-out;transition:box-shadow 0.3s ease-in-out,background 0.3s ease-in-out;"+(this.state.scrollTop>0&&"\n      background: white;\n      box-shadow: 1px 1px 10px rgba(0,0,0,0.1);\n      ")+";}","header.__jsx-style-dynamic-selector{position:fixed;width:100%;z-index:2;}","@media screen and (max-width:480px){a.__jsx-style-dynamic-selector{"+Xh.helveticaM+" font-weight:bold;}a.__jsx-style-dynamic-selector,img.__jsx-style-dynamic-selector{margin-right:"+Nh.s+"px;}}"],dynamic:[Nh.m,Xh.helveticaL,Nh.xs,this.state.scrollTop>0&&"\n      background: white;\n      box-shadow: 1px 1px 10px rgba(0,0,0,0.1);\n      ",Xh.helveticaM,Nh.s]}))}}]);return e}(o.a.Component);var Kh=Qh;var $h=r(198);var tf=r.n($h);var ef=function(){return o.a.createElement("div",{className:"jsx-610309600"},o.a.createElement(tf.a,null,o.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1",className:"jsx-610309600"}),o.a.createElement("meta",{charSet:"utf-8",className:"jsx-610309600"})),o.a.createElement(i.a,{styleId:"610309600",css:['@font-face{font-family:"Nimbus";src:url("/static/fonts/nimbus-d-medium.otf");}','@font-face{font-family:"Nimbus";src:url("/static/fonts/nimbus-d-bold.otf");font-weight:bold;}','@font-face{font-family:"Source Code";src:url("/static/fonts/source-code-regular.ttf");}','@font-face{font-family:"Source Code";src:url("/static/fonts/source-code-bold.ttf");font-weight:bold;}','@font-face{font-family:"Meta";src:url("/static/fonts/meta-book.otf");}','@font-face{font-family:"Meta";src:url("/static/fonts/meta-bold.otf");font-weight:bold;}','@font-face{font-family:"Meta";src:url("/static/fonts/meta-book-italic.otf");font-style:italic;}','@font-face{font-family:"Meta";src:url("/static/fonts/meta-bold-italic.otf");font-weight:bold;font-style:italic;}',rf+" body{font:16px Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:"+Uh.gray2+";}","*{box-sizing:border-box;}"]}))};var rf="\n/* http://meyerweb.com/eric/tools/css/reset/\n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n";var nf=function(t){var e=t.eyebrow,r=t.copy;return o.a.createElement("div",{className:"jsx-2847377870"},o.a.createElement("h3",{className:"jsx-2847377870"},e),o.a.createElement("h1",{className:"jsx-2847377870"},r),o.a.createElement(i.a,{styleId:"2847377870",css:["div.jsx-2847377870{"+Hh(7)+";}","h1.jsx-2847377870{"+Xh.nimbusM+" font-weight:bold;}","h3.jsx-2847377870{"+Xh.sourceCodeLabelL+" font-weight:bold;margin-bottom:"+Nh.xs+"px;color:"+Uh.blue1+";}","@media screen and (max-width:480px){h1.jsx-2847377870{"+Xh.nimbusS+";}h3.jsx-2847377870{"+Xh.sourceCodeLabelM+";}}"]}))};var af=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(t,n.key,n)}}return function(e,r,n){if(r)t(e.prototype,r);if(n)t(e,n);return e}}();function of(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sf(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"===typeof e||"function"===typeof e)?e:t}function uf(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var cf=function(t){uf(e,t);function e(){of(this,e);var t=sf(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.state={vizLoaded:false};return t}af(e,[{key:"componentDidMount",value:function t(){var e=this;Ch(this.refs.viz,function(){e.setState({vizLoaded:true})})}},{key:"render",value:function t(){return o.a.createElement("div",{className:i.a.dynamic([["2332596258",[this.state.vizLoaded?1:0,Fh,Fh,kh.desktop,Xh.metaSerifL,Hh(7),Xh.metaSerifM,kh.mobile]]])+" "+"wrapper"},o.a.createElement("div",{ref:"viz",className:i.a.dynamic([["2332596258",[this.state.vizLoaded?1:0,Fh,Fh,kh.desktop,Xh.metaSerifL,Hh(7),Xh.metaSerifM,kh.mobile]]])+" "+"viz"}),o.a.createElement("div",{className:i.a.dynamic([["2332596258",[this.state.vizLoaded?1:0,Fh,Fh,kh.desktop,Xh.metaSerifL,Hh(7),Xh.metaSerifM,kh.mobile]]])+" "+"inner"},o.a.createElement(nf,{eyebrow:"Pixel Unicorns",copy:"Design & dev. studio based in NYC"}),o.a.createElement("h2",{className:i.a.dynamic([["2332596258",[this.state.vizLoaded?1:0,Fh,Fh,kh.desktop,Xh.metaSerifL,Hh(7),Xh.metaSerifM,kh.mobile]]])},"Were a software design and development studio that builds web and mobile products for our clients.")),o.a.createElement(i.a,{styleId:"2332596258",css:[".viz.__jsx-style-dynamic-selector{position:absolute;z-index:-1;left:0;top:0;-webkit-transition:opacity 0.5s cubic-bezier(0.550,0.055,0.675,0.190);transition:opacity 0.5s cubic-bezier(0.550,0.055,0.675,0.190);opacity:"+(this.state.vizLoaded?1:0)+";}",".wrapper.__jsx-style-dynamic-selector{height:100vh;padding-top:"+Fh+"px;padding-bottom:"+Fh+"px;"+kh.desktop+";}",".inner.__jsx-style-dynamic-selector{top:50%;position:relative;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}",".imgref.__jsx-style-dynamic-selector{position:absolute;top:50%;left:50%;width:400px;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);opacity:0.2;}","h2.__jsx-style-dynamic-selector{"+Xh.metaSerifL+" "+Hh(7)+";}","@media screen and (max-width:480px){h2.__jsx-style-dynamic-selector{"+Xh.metaSerifM+";}.wrapper.__jsx-style-dynamic-selector{"+kh.mobile+";}}"],dynamic:[this.state.vizLoaded?1:0,Fh,Fh,kh.desktop,Xh.metaSerifL,Hh(7),Xh.metaSerifM,kh.mobile]}))}}]);return e}(o.a.Component);var lf=cf;var hf=function(){return o.a.createElement("div",{className:"jsx-3183382950"+" "+"wrapper"},o.a.createElement(nf,{eyebrow:"What we do",copy:"We build functional digital products with attention to detail"}),o.a.createElement(i.a,{styleId:"3183382950",css:["div.jsx-3183382950{"+kh.desktop+";}","@media screen and (max-width:480px){.jsx-3183382950{"+kh.mobile+";}}"]}))};var ff=function(){return o.a.createElement("div",{className:"jsx-842194121"+" "+"wrapper"},o.a.createElement(nf,{eyebrow:"Who we are",copy:"Were an agile team of design-gineers"}),o.a.createElement(i.a,{styleId:"842194121",css:["div.jsx-842194121{"+kh.desktop+";}","@media screen and (max-width:480px){.jsx-842194121{"+kh.mobile+";}}"]}))};var pf=function(t){var e=t.eyebrow,r=t.copy;return o.a.createElement("div",{className:"jsx-4161645903"},o.a.createElement("p",{className:"jsx-4161645903"},"info@pixelunicorns.com",o.a.createElement("br",{className:"jsx-4161645903"})," 2018 PixelUnicorns LLC"),o.a.createElement("a",{className:"jsx-4161645903"},"Back to top"),o.a.createElement(i.a,{styleId:"4161645903",css:["div.jsx-4161645903{border-top:1px solid "+Uh.gray6+";margin:auto;padding-top:"+Nh.s+"px;position:relative;"+Hh(3)+";}","p.jsx-4161645903{"+Xh.sourceCodeCaptionM+";}","a.jsx-4161645903{"+Xh.helveticaM+" font-weight:bold;background:url(/static/footer-arrow.svg) no-repeat right;padding-right:36px;height:26px;line-height:26px;position:absolute;right:0;}","a.jsx-4161645903,p.jsx-4161645903{display:inline-block;vertical-align:top;}","@media screen and (max-width:480px){div.jsx-4161645903{width:100%;max-width:100%;padding:"+Nh.s+"px;}a.jsx-4161645903{right:"+Nh.s+"px;cursor:pointer;}}"]}))};var df=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(t,n.key,n)}}return function(e,r,n){if(r)t(e.prototype,r);if(n)t(e,n);return e}}();function vf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mf(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"===typeof e||"function"===typeof e)?e:t}function gf(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var yf=function(t){gf(e,t);function e(){vf(this,e);return mf(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}df(e,[{key:"render",value:function t(){return o.a.createElement("div",{className:"jsx-2945518464"},o.a.createElement(ef,null),o.a.createElement(Kh,null),o.a.createElement(lf,null),o.a.createElement(hf,null),o.a.createElement(ff,null),o.a.createElement(pf,null),o.a.createElement(i.a,{styleId:"2945518464",css:["div.jsx-2945518464{height:1000px;}"]}))}}]);return e}(o.a.Component);var xf=e["default"]=yf},184:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=r(185);var i=_(n);var a=r(58);var o=_(a);var s=r(21);var u=_(s);var c=r(5);var l=_(c);var h=r(6);var f=_(h);var p=r(22);var d=_(p);var v=r(23);var m=_(v);e.flush=M;var g=r(2);var y=r(191);var x=_(y);function _(t){return t&&t.__esModule?t:{default:t}}var b=new x.default;var w=function(t){(0,m.default)(e,t);function e(){(0,l.default)(this,e);return(0,d.default)(this,(e.__proto__||(0,u.default)(e)).apply(this,arguments))}(0,f.default)(e,[{key:"componentWillMount",value:function t(){b.add(this.props)}},{key:"shouldComponentUpdate",value:function t(e){return this.props.css!==e.css}},{key:"componentWillUpdate",value:function t(e){b.update(this.props,e)}},{key:"componentWillUnmount",value:function t(){b.remove(this.props)}},{key:"render",value:function t(){return null}}],[{key:"dynamic",value:function t(e){return e.map(function(t){var e=(0,o.default)(t,2),r=e[0],n=e[1];return b.computeId(r,n)}).join(" ")}}]);return e}(g.Component);e.default=w;function M(){var t=b.cssRules();b.flush();return new i.default(t)}},185:function(t,e,r){t.exports={default:r(186),__esModule:true}},186:function(t,e,r){r(37);r(16);r(17);r(187);r(188);r(189);r(190);t.exports=r(0).Map},187:function(t,e,r){"use strict";var n=r(92);var i=r(66);var a="Map";t.exports=r(93)(a,function(t){return function e(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function t(e){var r=n.getEntry(i(this,a),e);return r&&r.v},set:function t(e,r){return n.def(i(this,a),0===e?0:e,r)}},n,true)},188:function(t,e,r){var n=r(1);n(n.P+n.R,"Map",{toJSON:r(94)("Map")})},189:function(t,e,r){r(95)("Map")},190:function(t,e,r){r(96)("Map")},191:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});var n=r(192);var i=p(n);var a=r(5);var o=p(a);var s=r(6);var u=p(s);var c=r(195);var l=p(c);var h=r(196);var f=p(h);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.styleSheet,n=void 0===r?null:r,i=e.optimizeForSpeed,a=void 0===i?false:i,s=e.isBrowser,u=void 0===s?"undefined"!==typeof window:s;(0,o.default)(this,t);this._sheet=n||new f.default({name:"styled-jsx",optimizeForSpeed:a});this._sheet.inject();this._isBrowser=u;this._fromServer=void 0;this._indices={};this._instancesCounts={};this.computeId=this.createComputeId();this.computeSelector=this.createComputeSelector()}(0,u.default)(t,[{key:"add",value:function t(e){var r=this;if(void 0===this._optimizeForSpeed){this._optimizeForSpeed=Array.isArray(e.css);this._sheet.setOptimizeForSpeed(this._optimizeForSpeed);this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()}if(this._isBrowser&&!this._fromServer){this._fromServer=this.selectFromServer();this._instancesCounts=(0,i.default)(this._fromServer).reduce(function(t,e){t[e]=0;return t},{})}var n=this.getIdAndRules(e),a=n.styleId,o=n.rules;if(a in this._instancesCounts){this._instancesCounts[a]+=1;return}var s=o.map(function(t){return r._sheet.insertRule(t)}).filter(function(t){return-1!==t});if(s.length>0){this._indices[a]=s;this._instancesCounts[a]=1}}},{key:"remove",value:function t(e){var r=this;var n=this.getIdAndRules(e),i=n.styleId;v(i in this._instancesCounts,"styleId: `"+i+"` not found");this._instancesCounts[i]-=1;if(this._instancesCounts[i]<1){var a=this._fromServer&&this._fromServer[i];if(a){a.parentNode.removeChild(a);delete this._fromServer[i]}else{this._indices[i].forEach(function(t){return r._sheet.deleteRule(t)});delete this._indices[i]}delete this._instancesCounts[i]}}},{key:"update",value:function t(e,r){this.add(r);this.remove(e)}},{key:"flush",value:function t(){this._sheet.flush();this._sheet.inject();this._fromServer=void 0;this._indices={};this._instancesCounts={};this.computeId=this.createComputeId();this.computeSelector=this.createComputeSelector()}},{key:"cssRules",value:function t(){var e=this;var r=this._fromServer?(0,i.default)(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[];var t=this._sheet.cssRules();return r.concat((0,i.default)(this._indices).map(function(r){return[r,e._indices[r].map(function(e){return t[e].cssText}).join("\n")]}))}},{key:"createComputeId",value:function t(){var e={};return function(t,r){if(!r)return"jsx-"+t;var n=String(r);var i=t+n;if(!e[i])e[i]="jsx-"+(0,l.default)(t+"-"+n);return e[i]}}},{key:"createComputeSelector",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:/__jsx-style-dynamic-selector/g;var r={};return function(t,n){var i=t+n;if(!r[i])r[i]=n.replace(e,t);return r[i]}}},{key:"getIdAndRules",value:function t(e){var r=this;if(e.dynamic){var n=this.computeId(e.styleId,e.dynamic);return{styleId:n,rules:Array.isArray(e.css)?e.css.map(function(t){return r.computeSelector(n,t)}):[this.computeSelector(n,e.css)]}}return{styleId:this.computeId(e.styleId),rules:Array.isArray(e.css)?e.css:[e.css]}}},{key:"selectFromServer",value:function t(){var e=Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]'));return e.reduce(function(t,e){var r=e.id.slice(2);t[r]=e;return t},{})}}]);return t}();e.default=d;function v(t,e){if(!t)throw new Error("StyleSheetRegistry: "+e+".")}},192:function(t,e,r){t.exports={default:r(193),__esModule:true}},193:function(t,e,r){r(194);t.exports=r(0).Object.keys},194:function(t,e,r){var n=r(20);var i=r(27);r(87)("keys",function(){return function t(e){return i(n(e))}})},195:function(t,e,r){"use strict";function n(t){var e=5381,r=t.length;while(r)e=33*e^t.charCodeAt(--r);return e>>>0}t.exports=n},196:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:true});var n=r(5);var i=s(n);var a=r(6);var o=s(a);function s(t){return t&&t.__esModule?t:{default:t}}var u=t.env&&"production"==="production";var c=function t(e){return"[object String]"===Object.prototype.toString.call(e)};var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.name,n=void 0===r?"stylesheet":r,a=e.optimizeForSpeed,o=void 0===a?u:a,s=e.isBrowser,l=void 0===s?"undefined"!==typeof window:s;(0,i.default)(this,t);h(c(n),"`name` must be a string");this._name=n;this._deletedRulePlaceholder="#"+n+"-deleted-rule____{}";h("boolean"===typeof o,"`optimizeForSpeed` must be a boolean");this._optimizeForSpeed=o;this._isBrowser=l;this._serverSheet=void 0;this._tags=[];this._injected=false;this._rulesCount=0}(0,o.default)(t,[{key:"setOptimizeForSpeed",value:function t(e){h("boolean"===typeof e,"`setOptimizeForSpeed` accepts a boolean");h(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted");this.flush();this._optimizeForSpeed=e;this.inject()}},{key:"isOptimizeForSpeed",value:function t(){return this._optimizeForSpeed}},{key:"inject",value:function t(){var e=this;h(!this._injected,"sheet already injected");this._injected=true;if(this._isBrowser&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name);this._optimizeForSpeed="insertRule"in this.getSheet();if(!this._optimizeForSpeed){if(!u)console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode.");this.flush();this._injected=true}return}this._serverSheet={cssRules:[],insertRule:function t(r,n){if("number"===typeof n)e._serverSheet.cssRules[n]={cssText:r};else e._serverSheet.cssRules.push({cssText:r});return n},deleteRule:function t(r){e._serverSheet.cssRules[r]=null}}}},{key:"getSheetForTag",value:function t(e){if(e.sheet)return e.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===e)return document.styleSheets[r]}},{key:"getSheet",value:function t(){return this.getSheetForTag(this._tags[this._tags.length-1])}},{key:"insertRule",value:function t(e,r){h(c(e),"`insertRule` accepts only strings");if(!this._isBrowser){if("number"!==typeof r)r=this._serverSheet.cssRules.length;this._serverSheet.insertRule(e,r);return this._rulesCount++}if(this._optimizeForSpeed){var n=this.getSheet();if("number"!==typeof r)r=n.cssRules.length;try{n.insertRule(e,r)}catch(t){if(!u)console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info");return-1}}else{var i=this._tags[r];this._tags.push(this.makeStyleTag(this._name,e,i))}return this._rulesCount++}},{key:"replaceRule",value:function t(e,r){if(this._optimizeForSpeed||!this._isBrowser){var n=this._isBrowser?this.getSheet():this._serverSheet;if(!r.trim())r=this._deletedRulePlaceholder;if(!n.cssRules[e])return e;n.deleteRule(e);try{n.insertRule(r,e)}catch(t){if(!u)console.warn("StyleSheet: illegal rule: \n\n"+r+"\n\nSee https://stackoverflow.com/q/20007992 for more info");n.insertRule(this._deletedRulePlaceholder,e)}}else{var i=this._tags[e];h(i,"old rule at index `"+e+"` not found");i.textContent=r}return e}},{key:"deleteRule",value:function t(e){if(!this._isBrowser){this._serverSheet.deleteRule(e);return}if(this._optimizeForSpeed)this.replaceRule(e,"");else{var r=this._tags[e];h(r,"rule at index `"+e+"` not found");r.parentNode.removeChild(r);this._tags[e]=null}}},{key:"flush",value:function t(){this._injected=false;this._rulesCount=0;if(this._isBrowser){this._tags.forEach(function(t){return t&&t.parentNode.removeChild(t)});this._tags=[]}else this._serverSheet.cssRules=[]}},{key:"cssRules",value:function t(){var e=this;if(!this._isBrowser)return this._serverSheet.cssRules;return this._tags.reduce(function(t,r){if(r)t=t.concat(e.getSheetForTag(r).cssRules.map(function(t){return t.cssText===e._deletedRulePlaceholder?null:t}));else t.push(null);return t},[])}},{key:"makeStyleTag",value:function t(e,r,n){if(r)h(c(r),"makeStyleTag acceps only strings as second parameter");var i=document.createElement("style");i.type="text/css";i.setAttribute("data-"+e,"");if(r)i.appendChild(document.createTextNode(r));var a=document.head||document.getElementsByTagName("head")[0];if(n)a.insertBefore(i,n);else a.appendChild(i);return i}},{key:"length",get:function t(){return this._rulesCount}}]);return t}();e.default=l;function h(t,e){if(!t)throw new Error("StyleSheet: "+e+".")}}).call(e,r(91))},197:function(t,e,r){(function(t,n){var i;(function(){var a;var o="4.17.5";var s=200;var u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function";var l="__lodash_hash_undefined__";var h=500;var f="__lodash_placeholder__";var p=1,d=2,v=4;var m=1,g=2;var y=1,x=2,_=4,b=8,w=16,M=32,E=64,S=128,T=256,A=512;var R=30,L="...";var C=800,P=16;var I=1,O=2,N=3;var U=1/0,D=9007199254740991,z=1.7976931348623157e308,B=0/0;var F=4294967295,k=F-1,H=F>>>1;var j=[["ary",S],["bind",y],["bindKey",x],["curry",b],["curryRight",w],["flip",A],["partial",M],["partialRight",E],["rearg",T]];var G="[object Arguments]",V="[object Array]",W="[object AsyncFunction]",X="[object Boolean]",q="[object Date]",Y="[object DOMException]",Z="[object Error]",J="[object Function]",Q="[object GeneratorFunction]",K="[object Map]",$="[object Number]",tt="[object Null]",et="[object Object]",rt="[object Promise]",nt="[object Proxy]",it="[object RegExp]",at="[object Set]",ot="[object String]",st="[object Symbol]",ut="[object Undefined]",ct="[object WeakMap]",lt="[object WeakSet]";var ht="[object ArrayBuffer]",ft="[object DataView]",pt="[object Float32Array]",dt="[object Float64Array]",vt="[object Int8Array]",mt="[object Int16Array]",gt="[object Int32Array]",yt="[object Uint8Array]",xt="[object Uint8ClampedArray]",_t="[object Uint16Array]",bt="[object Uint32Array]";var wt=/\b__p \+= '';/g,Mt=/\b(__p \+=) '' \+/g,Et=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var St=/&(?:amp|lt|gt|quot|#39);/g,Tt=/[&<>"']/g,At=RegExp(St.source),Rt=RegExp(Tt.source);var Lt=/<%-([\s\S]+?)%>/g,Ct=/<%([\s\S]+?)%>/g,Pt=/<%=([\s\S]+?)%>/g;var It=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ot=/^\w*$/,Nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var Ut=/[\\^$.*+?()[\]{}|]/g,Dt=RegExp(Ut.source);var zt=/^\s+|\s+$/g,Bt=/^\s+/,Ft=/\s+$/;var kt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ht=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /;var Gt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Vt=/\\(\\)?/g;var Wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var Xt=/\w*$/;var qt=/^[-+]0x[0-9a-f]+$/i;var Yt=/^0b[01]+$/i;var Zt=/^\[object .+?Constructor\]$/;var Jt=/^0o[0-7]+$/i;var Qt=/^(?:0|[1-9]\d*)$/;var Kt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var $t=/($^)/;var te=/['\n\r\u2028\u2029\\]/g;var ee="\\ud800-\\udfff",re="\\u0300-\\u036f",ne="\\ufe20-\\ufe2f",ie="\\u20d0-\\u20ff",ae=re+ne+ie,oe="\\u2700-\\u27bf",se="a-z\\xdf-\\xf6\\xf8-\\xff",ue="\\xac\\xb1\\xd7\\xf7",ce="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",le="\\u2000-\\u206f",he=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fe="A-Z\\xc0-\\xd6\\xd8-\\xde",pe="\\ufe0e\\ufe0f",de=ue+ce+le+he;var ve="[']",me="["+ee+"]",ge="["+de+"]",ye="["+ae+"]",xe="\\d+",_e="["+oe+"]",be="["+se+"]",we="[^"+ee+de+xe+oe+se+fe+"]",Me="\\ud83c[\\udffb-\\udfff]",Ee="(?:"+ye+"|"+Me+")",Se="[^"+ee+"]",Te="(?:\\ud83c[\\udde6-\\uddff]){2}",Ae="[\\ud800-\\udbff][\\udc00-\\udfff]",Re="["+fe+"]",Le="\\u200d";var Ce="(?:"+be+"|"+we+")",Pe="(?:"+Re+"|"+we+")",Ie="(?:"+ve+"(?:d|ll|m|re|s|t|ve))?",Oe="(?:"+ve+"(?:D|LL|M|RE|S|T|VE))?",Ne=Ee+"?",Ue="["+pe+"]?",De="(?:"+Le+"(?:"+[Se,Te,Ae].join("|")+")"+Ue+Ne+")*",ze="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Be="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fe=Ue+Ne+De,ke="(?:"+[_e,Te,Ae].join("|")+")"+Fe,He="(?:"+[Se+ye+"?",ye,Te,Ae,me].join("|")+")";var je=RegExp(ve,"g");var Ge=RegExp(ye,"g");var Ve=RegExp(Me+"(?="+Me+")|"+He+Fe,"g");var We=RegExp([Re+"?"+be+"+"+Ie+"(?="+[ge,Re,"$"].join("|")+")",Pe+"+"+Oe+"(?="+[ge,Re+Ce,"$"].join("|")+")",Re+"?"+Ce+"+"+Ie,Re+"+"+Oe,Be,ze,xe,ke].join("|"),"g");var Xe=RegExp("["+Le+ee+ae+pe+"]");var qe=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Ye=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"];var Ze=-1;var Je={};Je[pt]=Je[dt]=Je[vt]=Je[mt]=Je[gt]=Je[yt]=Je[xt]=Je[_t]=Je[bt]=true;Je[G]=Je[V]=Je[ht]=Je[X]=Je[ft]=Je[q]=Je[Z]=Je[J]=Je[K]=Je[$]=Je[et]=Je[it]=Je[at]=Je[ot]=Je[ct]=false;var Qe={};Qe[G]=Qe[V]=Qe[ht]=Qe[ft]=Qe[X]=Qe[q]=Qe[pt]=Qe[dt]=Qe[vt]=Qe[mt]=Qe[gt]=Qe[K]=Qe[$]=Qe[et]=Qe[it]=Qe[at]=Qe[ot]=Qe[st]=Qe[yt]=Qe[xt]=Qe[_t]=Qe[bt]=true;Qe[Z]=Qe[J]=Qe[ct]=false;var Ke={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"};var $e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var tr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var er={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var rr=parseFloat,nr=parseInt;var ir="object"==typeof t&&t&&t.Object===Object&&t;var ar="object"==typeof self&&self&&self.Object===Object&&self;var or=ir||ar||Function("return this")();var sr="object"==typeof e&&e&&!e.nodeType&&e;var ur=sr&&"object"==typeof n&&n&&!n.nodeType&&n;var cr=ur&&ur.exports===sr;var lr=cr&&ir.process;var hr=function(){try{return lr&&lr.binding&&lr.binding("util")}catch(t){}}();var fr=hr&&hr.isArrayBuffer,pr=hr&&hr.isDate,dr=hr&&hr.isMap,vr=hr&&hr.isRegExp,mr=hr&&hr.isSet,gr=hr&&hr.isTypedArray;function yr(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function xr(t,e,r,n){var i=-1,a=null==t?0:t.length;while(++i<a){var o=t[i];e(n,o,r(o),t)}return n}function _r(t,e){var r=-1,n=null==t?0:t.length;while(++r<n)if(false===e(t[r],r,t))break;return t}function br(t,e){var r=null==t?0:t.length;while(r--)if(false===e(t[r],r,t))break;return t}function wr(t,e){var r=-1,n=null==t?0:t.length;while(++r<n)if(!e(t[r],r,t))return false;return true}function Mr(t,e){var r=-1,n=null==t?0:t.length,i=0,a=[];while(++r<n){var o=t[r];if(e(o,r,t))a[i++]=o}return a}function Er(t,e){var r=null==t?0:t.length;return!!r&&Dr(t,e,0)>-1}function Sr(t,e,r){var n=-1,i=null==t?0:t.length;while(++n<i)if(r(e,t[n]))return true;return false}function Tr(t,e){var r=-1,n=null==t?0:t.length,i=Array(n);while(++r<n)i[r]=e(t[r],r,t);return i}function Ar(t,e){var r=-1,n=e.length,i=t.length;while(++r<n)t[i+r]=e[r];return t}function Rr(t,e,r,n){var i=-1,a=null==t?0:t.length;if(n&&a)r=t[++i];while(++i<a)r=e(r,t[i],i,t);return r}function Lr(t,e,r,n){var i=null==t?0:t.length;if(n&&i)r=t[--i];while(i--)r=e(r,t[i],i,t);return r}function Cr(t,e){var r=-1,n=null==t?0:t.length;while(++r<n)if(e(t[r],r,t))return true;return false}var Pr=kr("length");function Ir(t){return t.split("")}function Or(t){return t.match(Gt)||[]}function Nr(t,e,r){var n;r(t,function(t,r,i){if(e(t,r,i)){n=r;return false}});return n}function Ur(t,e,r,n){var i=t.length,a=r+(n?1:-1);while(n?a--:++a<i)if(e(t[a],a,t))return a;return-1}function Dr(t,e,r){return e===e?pn(t,e,r):Ur(t,Br,r)}function zr(t,e,r,n){var i=r-1,a=t.length;while(++i<a)if(n(t[i],e))return i;return-1}function Br(t){return t!==t}function Fr(t,e){var r=null==t?0:t.length;return r?Vr(t,e)/r:B}function kr(t){return function(e){return null==e?a:e[t]}}function Hr(t){return function(e){return null==t?a:t[e]}}function jr(t,e,r,n,i){i(t,function(t,i,a){r=n?(n=false,t):e(r,t,i,a)});return r}function Gr(t,e){var r=t.length;t.sort(e);while(r--)t[r]=t[r].value;return t}function Vr(t,e){var r,n=-1,i=t.length;while(++n<i){var o=e(t[n]);if(o!==a)r=r===a?o:r+o}return r}function Wr(t,e){var r=-1,n=Array(t);while(++r<t)n[r]=e(r);return n}function Xr(t,e){return Tr(e,function(e){return[e,t[e]]})}function qr(t){return function(e){return t(e)}}function Yr(t,e){return Tr(e,function(e){return t[e]})}function Zr(t,e){return t.has(e)}function Jr(t,e){var r=-1,n=t.length;while(++r<n&&Dr(e,t[r],0)>-1);return r}function Qr(t,e){var r=t.length;while(r--&&Dr(e,t[r],0)>-1);return r}function Kr(t,e){var r=t.length,n=0;while(r--)if(t[r]===e)++n;return n}var $r=Hr(Ke);var tn=Hr($e);function en(t){return"\\"+er[t]}function rn(t,e){return null==t?a:t[e]}function nn(t){return Xe.test(t)}function an(t){return qe.test(t)}function on(t){var e,r=[];while(!(e=t.next()).done)r.push(e.value);return r}function sn(t){var e=-1,r=Array(t.size);t.forEach(function(t,n){r[++e]=[n,t]});return r}function un(t,e){return function(r){return t(e(r))}}function cn(t,e){var r=-1,n=t.length,i=0,a=[];while(++r<n){var o=t[r];if(o===e||o===f){t[r]=f;a[i++]=r}}return a}function ln(t,e){return"__proto__"==e?a:t[e]}function hn(t){var e=-1,r=Array(t.size);t.forEach(function(t){r[++e]=t});return r}function fn(t){var e=-1,r=Array(t.size);t.forEach(function(t){r[++e]=[t,t]});return r}function pn(t,e,r){var n=r-1,i=t.length;while(++n<i)if(t[n]===e)return n;return-1}function dn(t,e,r){var n=r+1;while(n--)if(t[n]===e)return n;return n}function vn(t){return nn(t)?yn(t):Pr(t)}function mn(t){return nn(t)?xn(t):Ir(t)}var gn=Hr(tr);function yn(t){var e=Ve.lastIndex=0;while(Ve.test(t))++e;return e}function xn(t){return t.match(Ve)||[]}function _n(t){return t.match(We)||[]}var bn=function t(e){e=null==e?or:wn.defaults(or.Object(),e,wn.pick(or,Ye));var r=e.Array,n=e.Date,i=e.Error,Gt=e.Function,ee=e.Math,re=e.Object,ne=e.RegExp,ie=e.String,ae=e.TypeError;var oe=r.prototype,se=Gt.prototype,ue=re.prototype;var ce=e["__core-js_shared__"];var le=se.toString;var he=ue.hasOwnProperty;var fe=0;var pe=function(){var t=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var de=ue.toString;var ve=le.call(re);var me=or._;var ge=ne("^"+le.call(he).replace(Ut,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ye=cr?e.Buffer:a,xe=e.Symbol,_e=e.Uint8Array,be=ye?ye.allocUnsafe:a,we=un(re.getPrototypeOf,re),Me=re.create,Ee=ue.propertyIsEnumerable,Se=oe.splice,Te=xe?xe.isConcatSpreadable:a,Ae=xe?xe.iterator:a,Re=xe?xe.toStringTag:a;var Le=function(){try{var t=Xo(re,"defineProperty");t({},"",{});return t}catch(t){}}();var Ce=e.clearTimeout!==or.clearTimeout&&e.clearTimeout,Pe=n&&n.now!==or.Date.now&&n.now,Ie=e.setTimeout!==or.setTimeout&&e.setTimeout;var Oe=ee.ceil,Ne=ee.floor,Ue=re.getOwnPropertySymbols,De=ye?ye.isBuffer:a,ze=e.isFinite,Be=oe.join,Fe=un(re.keys,re),ke=ee.max,He=ee.min,Ve=n.now,We=e.parseInt,Xe=ee.random,qe=oe.reverse;var Ke=Xo(e,"DataView"),$e=Xo(e,"Map"),tr=Xo(e,"Promise"),er=Xo(e,"Set"),ir=Xo(e,"WeakMap"),ar=Xo(re,"create");var sr=ir&&new ir;var ur={};var lr=Cs(Ke),hr=Cs($e),Pr=Cs(tr),Ir=Cs(er),Hr=Cs(ir);var pn=xe?xe.prototype:a,yn=pn?pn.valueOf:a,xn=pn?pn.toString:a;function bn(t){if(Ml(t)&&!ol(t)&&!(t instanceof Tn)){if(t instanceof Sn)return t;if(he.call(t,"__wrapped__"))return Is(t)}return new Sn(t)}var Mn=function(){function t(){}return function(e){if(!wl(e))return{};if(Me)return Me(e);t.prototype=e;var r=new t;t.prototype=a;return r}}();function En(){}function Sn(t,e){this.__wrapped__=t;this.__actions__=[];this.__chain__=!!e;this.__index__=0;this.__values__=a}bn.templateSettings={escape:Lt,evaluate:Ct,interpolate:Pt,variable:"",imports:{_:bn}};bn.prototype=En.prototype;bn.prototype.constructor=bn;Sn.prototype=Mn(En.prototype);Sn.prototype.constructor=Sn;function Tn(t){this.__wrapped__=t;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=F;this.__views__=[]}function An(){var t=new Tn(this.__wrapped__);t.__actions__=ro(this.__actions__);t.__dir__=this.__dir__;t.__filtered__=this.__filtered__;t.__iteratees__=ro(this.__iteratees__);t.__takeCount__=this.__takeCount__;t.__views__=ro(this.__views__);return t}function Rn(){if(this.__filtered__){var t=new Tn(this);t.__dir__=-1;t.__filtered__=true}else{t=this.clone();t.__dir__*=-1}return t}function Ln(){var t=this.__wrapped__.value(),e=this.__dir__,r=ol(t),n=e<0,i=r?t.length:0,a=Qo(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=n?s:o-1,l=this.__iteratees__,h=l.length,f=0,p=He(u,this.__takeCount__);if(!r||!n&&i==u&&p==u)return za(t,this.__actions__);var d=[];t:while(u--&&f<p){c+=e;var v=-1,m=t[c];while(++v<h){var g=l[v],y=g.iteratee,x=g.type,_=y(m);if(x==O)m=_;else if(!_)if(x==I)continue t;else break t}d[f++]=m}return d}Tn.prototype=Mn(En.prototype);Tn.prototype.constructor=Tn;function Cn(t){var e=-1,r=null==t?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function Pn(){this.__data__=ar?ar(null):{};this.size=0}function In(t){var e=this.has(t)&&delete this.__data__[t];this.size-=e?1:0;return e}function On(t){var e=this.__data__;if(ar){var r=e[t];return r===l?a:r}return he.call(e,t)?e[t]:a}function Nn(t){var e=this.__data__;return ar?e[t]!==a:he.call(e,t)}function Un(t,e){var r=this.__data__;this.size+=this.has(t)?0:1;r[t]=ar&&e===a?l:e;return this}Cn.prototype.clear=Pn;Cn.prototype["delete"]=In;Cn.prototype.get=On;Cn.prototype.has=Nn;Cn.prototype.set=Un;function Dn(t){var e=-1,r=null==t?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function zn(){this.__data__=[];this.size=0}function Bn(t){var e=this.__data__,r=ci(e,t);if(r<0)return false;var n=e.length-1;if(r==n)e.pop();else Se.call(e,r,1);--this.size;return true}function Fn(t){var e=this.__data__,r=ci(e,t);return r<0?a:e[r][1]}function kn(t){return ci(this.__data__,t)>-1}function Hn(t,e){var r=this.__data__,n=ci(r,t);if(n<0){++this.size;r.push([t,e])}else r[n][1]=e;return this}Dn.prototype.clear=zn;Dn.prototype["delete"]=Bn;Dn.prototype.get=Fn;Dn.prototype.has=kn;Dn.prototype.set=Hn;function jn(t){var e=-1,r=null==t?0:t.length;this.clear();while(++e<r){var n=t[e];this.set(n[0],n[1])}}function Gn(){this.size=0;this.__data__={hash:new Cn,map:new($e||Dn),string:new Cn}}function Vn(t){var e=Vo(this,t)["delete"](t);this.size-=e?1:0;return e}function Wn(t){return Vo(this,t).get(t)}function Xn(t){return Vo(this,t).has(t)}function qn(t,e){var r=Vo(this,t),n=r.size;r.set(t,e);this.size+=r.size==n?0:1;return this}jn.prototype.clear=Gn;jn.prototype["delete"]=Vn;jn.prototype.get=Wn;jn.prototype.has=Xn;jn.prototype.set=qn;function Yn(t){var e=-1,r=null==t?0:t.length;this.__data__=new jn;while(++e<r)this.add(t[e])}function Zn(t){this.__data__.set(t,l);return this}function Jn(t){return this.__data__.has(t)}Yn.prototype.add=Yn.prototype.push=Zn;Yn.prototype.has=Jn;function Qn(t){var e=this.__data__=new Dn(t);this.size=e.size}function Kn(){this.__data__=new Dn;this.size=0}function $n(t){var e=this.__data__,r=e["delete"](t);this.size=e.size;return r}function ti(t){return this.__data__.get(t)}function ei(t){return this.__data__.has(t)}function ri(t,e){var r=this.__data__;if(r instanceof Dn){var n=r.__data__;if(!$e||n.length<s-1){n.push([t,e]);this.size=++r.size;return this}r=this.__data__=new jn(n)}r.set(t,e);this.size=r.size;return this}Qn.prototype.clear=Kn;Qn.prototype["delete"]=$n;Qn.prototype.get=ti;Qn.prototype.has=ei;Qn.prototype.set=ri;function ni(t,e){var r=ol(t),n=!r&&al(t),i=!r&&!n&&hl(t),a=!r&&!n&&!i&&Bl(t),o=r||n||i||a,s=o?Wr(t.length,ie):[],u=s.length;for(var c in t)if((e||he.call(t,c))&&!(o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||as(c,u))))s.push(c);return s}function ii(t){var e=t.length;return e?t[ma(0,e-1)]:a}function ai(t,e){return As(ro(t),vi(e,0,t.length))}function oi(t){return As(ro(t))}function si(t,e,r){if(r!==a&&!rl(t[e],r)||r===a&&!(e in t))pi(t,e,r)}function ui(t,e,r){var n=t[e];if(!(he.call(t,e)&&rl(n,r))||r===a&&!(e in t))pi(t,e,r)}function ci(t,e){var r=t.length;while(r--)if(rl(t[r][0],e))return r;return-1}function li(t,e,r,n){bi(t,function(t,i,a){e(n,t,r(t),a)});return n}function hi(t,e){return t&&no(e,_h(e),t)}function fi(t,e){return t&&no(e,bh(e),t)}function pi(t,e,r){if("__proto__"==e&&Le)Le(t,e,{configurable:true,enumerable:true,value:r,writable:true});else t[e]=r}function di(t,e){var n=-1,i=e.length,o=r(i),s=null==t;while(++n<i)o[n]=s?a:dh(t,e[n]);return o}function vi(t,e,r){if(t===t){if(r!==a)t=t<=r?t:r;if(e!==a)t=t>=e?t:e}return t}function mi(t,e,r,n,i,o){var s,u=e&p,c=e&d,l=e&v;if(r)s=i?r(t,n,i,o):r(t);if(s!==a)return s;if(!wl(t))return t;var h=ol(t);if(h){s=ts(t);if(!u)return ro(t,s)}else{var f=Jo(t),m=f==J||f==Q;if(hl(t))return Xa(t,u);if(f==et||f==G||m&&!i){s=c||m?{}:es(t);if(!u)return c?ao(t,fi(s,t)):io(t,hi(s,t))}else{if(!Qe[f])return i?t:{};s=rs(t,f,u)}}o||(o=new Qn);var g=o.get(t);if(g)return g;o.set(t,s);if(Ul(t)){t.forEach(function(n){s.add(mi(n,e,r,n,t,o))});return s}if(El(t)){t.forEach(function(n,i){s.set(i,mi(n,e,r,i,t,o))});return s}var y=l?c?Fo:Bo:c?bh:_h;var x=h?a:y(t);_r(x||t,function(n,i){if(x){i=n;n=t[i]}ui(s,i,mi(n,e,r,i,t,o))});return s}function gi(t){var e=_h(t);return function(r){return yi(r,t,e)}}function yi(t,e,r){var n=r.length;if(null==t)return!n;t=re(t);while(n--){var i=r[n],o=e[i],s=t[i];if(s===a&&!(i in t)||!o(s))return false}return true}function xi(t,e,r){if("function"!=typeof t)throw new ae(c);return Ms(function(){t.apply(a,r)},e)}function _i(t,e,r,n){var i=-1,a=Er,o=true,u=t.length,c=[],l=e.length;if(!u)return c;if(r)e=Tr(e,qr(r));if(n){a=Sr;o=false}else if(e.length>=s){a=Zr;o=false;e=new Yn(e)}t:while(++i<u){var h=t[i],f=null==r?h:r(h);h=n||0!==h?h:0;if(o&&f===f){var p=l;while(p--)if(e[p]===f)continue t;c.push(h)}else if(!a(e,f,n))c.push(h)}return c}var bi=uo(Ci);var wi=uo(Pi,true);function Mi(t,e){var r=true;bi(t,function(t,n,i){r=!!e(t,n,i);return r});return r}function Ei(t,e,r){var n=-1,i=t.length;while(++n<i){var o=t[n],s=e(o);if(null!=s&&(u===a?s===s&&!zl(s):r(s,u)))var u=s,c=o}return c}function Si(t,e,r,n){var i=t.length;r=Xl(r);if(r<0)r=-r>i?0:i+r;n=n===a||n>i?i:Xl(n);if(n<0)n+=i;n=r>n?0:ql(n);while(r<n)t[r++]=e;return t}function Ti(t,e){var r=[];bi(t,function(t,n,i){if(e(t,n,i))r.push(t)});return r}function Ai(t,e,r,n,i){var a=-1,o=t.length;r||(r=is);i||(i=[]);while(++a<o){var s=t[a];if(e>0&&r(s))if(e>1)Ai(s,e-1,r,n,i);else Ar(i,s);else if(!n)i[i.length]=s}return i}var Ri=co();var Li=co(true);function Ci(t,e){return t&&Ri(t,e,_h)}function Pi(t,e){return t&&Li(t,e,_h)}function Ii(t,e){return Mr(e,function(e){return xl(t[e])})}function Oi(t,e){e=ja(e,t);var r=0,n=e.length;while(null!=t&&r<n)t=t[Ls(e[r++])];return r&&r==n?t:a}function Ni(t,e,r){var n=e(t);return ol(t)?n:Ar(n,r(t))}function Ui(t){if(null==t)return t===a?ut:tt;return Re&&Re in re(t)?qo(t):ys(t)}function Di(t,e){return t>e}function zi(t,e){return null!=t&&he.call(t,e)}function Bi(t,e){return null!=t&&e in re(t)}function Fi(t,e,r){return t>=He(e,r)&&t<ke(e,r)}function ki(t,e,n){var i=n?Sr:Er,o=t[0].length,s=t.length,u=s,c=r(s),l=Infinity,h=[];while(u--){var f=t[u];if(u&&e)f=Tr(f,qr(e));l=He(f.length,l);c[u]=!n&&(e||o>=120&&f.length>=120)?new Yn(u&&f):a}f=t[0];var p=-1,d=c[0];t:while(++p<o&&h.length<l){var v=f[p],m=e?e(v):v;v=n||0!==v?v:0;if(!(d?Zr(d,m):i(h,m,n))){u=s;while(--u){var g=c[u];if(!(g?Zr(g,m):i(t[u],m,n)))continue t}if(d)d.push(m);h.push(v)}}return h}function Hi(t,e,r,n){Ci(t,function(t,i,a){e(n,r(t),i,a)});return n}function ji(t,e,r){e=ja(e,t);t=_s(t,e);var n=null==t?t:t[Ls(nu(e))];return null==n?a:yr(n,t,r)}function Gi(t){return Ml(t)&&Ui(t)==G}function Vi(t){return Ml(t)&&Ui(t)==ht}function Wi(t){return Ml(t)&&Ui(t)==q}function Xi(t,e,r,n,i){if(t===e)return true;if(null==t||null==e||!Ml(t)&&!Ml(e))return t!==t&&e!==e;return qi(t,e,r,n,Xi,i)}function qi(t,e,r,n,i,a){var o=ol(t),s=ol(e),u=o?V:Jo(t),c=s?V:Jo(e);u=u==G?et:u;c=c==G?et:c;var l=u==et,h=c==et,f=u==c;if(f&&hl(t)){if(!hl(e))return false;o=true;l=false}if(f&&!l){a||(a=new Qn);return o||Bl(t)?No(t,e,r,n,i,a):Uo(t,e,u,r,n,i,a)}if(!(r&m)){var p=l&&he.call(t,"__wrapped__"),d=h&&he.call(e,"__wrapped__");if(p||d){var v=p?t.value():t,g=d?e.value():e;a||(a=new Qn);return i(v,g,r,n,a)}}if(!f)return false;a||(a=new Qn);return Do(t,e,r,n,i,a)}function Yi(t){return Ml(t)&&Jo(t)==K}function Zi(t,e,r,n){var i=r.length,o=i,s=!n;if(null==t)return!o;t=re(t);while(i--){var u=r[i];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return false}while(++i<o){u=r[i];var c=u[0],l=t[c],h=u[1];if(s&&u[2]){if(l===a&&!(c in t))return false}else{var f=new Qn;if(n)var p=n(l,h,c,t,e,f);if(!(p===a?Xi(h,l,m|g,n,f):p))return false}}return true}function Ji(t){if(!wl(t)||ls(t))return false;var e=xl(t)?ge:Zt;return e.test(Cs(t))}function Qi(t){return Ml(t)&&Ui(t)==it}function Ki(t){return Ml(t)&&Jo(t)==at}function $i(t){return Ml(t)&&bl(t.length)&&!!Je[Ui(t)]}function ta(t){if("function"==typeof t)return t;if(null==t)return Lf;if("object"==typeof t)return ol(t)?oa(t[0],t[1]):aa(t);return jf(t)}function ea(t){if(!fs(t))return Fe(t);var e=[];for(var r in re(t))if(he.call(t,r)&&"constructor"!=r)e.push(r);return e}function ra(t){if(!wl(t))return gs(t);var e=fs(t),r=[];for(var n in t)if(!("constructor"==n&&(e||!he.call(t,n))))r.push(n);return r}function na(t,e){return t<e}function ia(t,e){var n=-1,i=ul(t)?r(t.length):[];bi(t,function(t,r,a){i[++n]=e(t,r,a)});return i}function aa(t){var e=Wo(t);if(1==e.length&&e[0][2])return ds(e[0][0],e[0][1]);return function(r){return r===t||Zi(r,t,e)}}function oa(t,e){if(ss(t)&&ps(e))return ds(Ls(t),e);return function(r){var n=dh(r,t);return n===a&&n===e?mh(r,t):Xi(e,n,m|g)}}function sa(t,e,r,n,i){if(t===e)return;Ri(e,function(o,s){if(wl(o)){i||(i=new Qn);ua(t,e,s,r,sa,n,i)}else{var u=n?n(ln(t,s),o,s+"",t,e,i):a;if(u===a)u=o;si(t,s,u)}},bh)}function ua(t,e,r,n,i,o,s){var u=ln(t,r),c=ln(e,r),l=s.get(c);if(l){si(t,r,l);return}var h=o?o(u,c,r+"",t,e,s):a;var f=h===a;if(f){var p=ol(c),d=!p&&hl(c),v=!p&&!d&&Bl(c);h=c;if(p||d||v)if(ol(u))h=u;else if(cl(u))h=ro(u);else if(d){f=false;h=Xa(c,true)}else if(v){f=false;h=Qa(c,true)}else h=[];else if(Il(c)||al(c)){h=u;if(al(u))h=Zl(u);else if(!wl(u)||n&&xl(u))h=es(c)}else f=false}if(f){s.set(c,h);i(h,c,n,o,s);s["delete"](c)}si(t,r,h)}function ca(t,e){var r=t.length;if(!r)return;e+=e<0?r:0;return as(e,r)?t[e]:a}function la(t,e,r){var n=-1;e=Tr(e.length?e:[Lf],qr(Go()));var i=ia(t,function(t,r,i){var a=Tr(e,function(e){return e(t)});return{criteria:a,index:++n,value:t}});return Gr(i,function(t,e){return $a(t,e,r)})}function ha(t,e){return fa(t,e,function(e,r){return mh(t,r)})}function fa(t,e,r){var n=-1,i=e.length,a={};while(++n<i){var o=e[n],s=Oi(t,o);if(r(s,o))wa(a,ja(o,t),s)}return a}function pa(t){return function(e){return Oi(e,t)}}function da(t,e,r,n){var i=n?zr:Dr,a=-1,o=e.length,s=t;if(t===e)e=ro(e);if(r)s=Tr(t,qr(r));while(++a<o){var u=0,c=e[a],l=r?r(c):c;while((u=i(s,l,u,n))>-1){if(s!==t)Se.call(s,u,1);Se.call(t,u,1)}}return t}function va(t,e){var r=t?e.length:0,n=r-1;while(r--){var i=e[r];if(r==n||i!==a){var a=i;if(as(i))Se.call(t,i,1);else Na(t,i)}}return t}function ma(t,e){return t+Ne(Xe()*(e-t+1))}function ga(t,e,n,i){var a=-1,o=ke(Oe((e-t)/(n||1)),0),s=r(o);while(o--){s[i?o:++a]=t;t+=n}return s}function ya(t,e){var r="";if(!t||e<1||e>D)return r;do{if(e%2)r+=t;e=Ne(e/2);if(e)t+=t}while(e);return r}function xa(t,e){return Es(xs(t,e,Lf),t+"")}function _a(t){return ii(Fh(t))}function ba(t,e){var r=Fh(t);return As(r,vi(e,0,r.length))}function wa(t,e,r,n){if(!wl(t))return t;e=ja(e,t);var i=-1,o=e.length,s=o-1,u=t;while(null!=u&&++i<o){var c=Ls(e[i]),l=r;if(i!=s){var h=u[c];l=n?n(h,c,u):a;if(l===a)l=wl(h)?h:as(e[i+1])?[]:{}}ui(u,c,l);u=u[c]}return t}var Ma=!sr?Lf:function(t,e){sr.set(t,e);return t};var Ea=!Le?Lf:function(t,e){return Le(t,"toString",{configurable:true,enumerable:false,value:Sf(e),writable:true})};function Sa(t){return As(Fh(t))}function Ta(t,e,n){var i=-1,a=t.length;if(e<0)e=-e>a?0:a+e;n=n>a?a:n;if(n<0)n+=a;a=e>n?0:n-e>>>0;e>>>=0;var o=r(a);while(++i<a)o[i]=t[i+e];return o}function Aa(t,e){var r;bi(t,function(t,n,i){r=e(t,n,i);return!r});return!!r}function Ra(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e===e&&i<=H){while(n<i){var a=n+i>>>1,o=t[a];if(null!==o&&!zl(o)&&(r?o<=e:o<e))n=a+1;else i=a}return i}return La(t,e,Lf,r)}function La(t,e,r,n){e=r(e);var i=0,o=null==t?0:t.length,s=e!==e,u=null===e,c=zl(e),l=e===a;while(i<o){var h=Ne((i+o)/2),f=r(t[h]),p=f!==a,d=null===f,v=f===f,m=zl(f);if(s)var g=n||v;else if(l)g=v&&(n||p);else if(u)g=v&&p&&(n||!d);else if(c)g=v&&p&&!d&&(n||!m);else if(d||m)g=false;else g=n?f<=e:f<e;if(g)i=h+1;else o=h}return He(o,k)}function Ca(t,e){var r=-1,n=t.length,i=0,a=[];while(++r<n){var o=t[r],s=e?e(o):o;if(!r||!rl(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function Pa(t){if("number"==typeof t)return t;if(zl(t))return B;return+t}function Ia(t){if("string"==typeof t)return t;if(ol(t))return Tr(t,Ia)+"";if(zl(t))return xn?xn.call(t):"";var e=t+"";return"0"==e&&1/t==-U?"-0":e}function Oa(t,e,r){var n=-1,i=Er,a=t.length,o=true,u=[],c=u;if(r){o=false;i=Sr}else if(a>=s){var l=e?null:Ro(t);if(l)return hn(l);o=false;i=Zr;c=new Yn}else c=e?[]:u;t:while(++n<a){var h=t[n],f=e?e(h):h;h=r||0!==h?h:0;if(o&&f===f){var p=c.length;while(p--)if(c[p]===f)continue t;if(e)c.push(f);u.push(h)}else if(!i(c,f,r)){if(c!==u)c.push(f);u.push(h)}}return u}function Na(t,e){e=ja(e,t);t=_s(t,e);return null==t||delete t[Ls(nu(e))]}function Ua(t,e,r,n){return wa(t,e,r(Oi(t,e)),n)}function Da(t,e,r,n){var i=t.length,a=n?i:-1;while((n?a--:++a<i)&&e(t[a],a,t));return r?Ta(t,n?0:a,n?a+1:i):Ta(t,n?a+1:0,n?i:a)}function za(t,e){var r=t;if(r instanceof Tn)r=r.value();return Rr(e,function(t,e){return e.func.apply(e.thisArg,Ar([t],e.args))},r)}function Ba(t,e,n){var i=t.length;if(i<2)return i?Oa(t[0]):[];var a=-1,o=r(i);while(++a<i){var s=t[a],u=-1;while(++u<i)if(u!=a)o[a]=_i(o[a]||s,t[u],e,n)}return Oa(Ai(o,1),e,n)}function Fa(t,e,r){var n=-1,i=t.length,o=e.length,s={};while(++n<i){var u=n<o?e[n]:a;r(s,t[n],u)}return s}function ka(t){return cl(t)?t:[]}function Ha(t){return"function"==typeof t?t:Lf}function ja(t,e){if(ol(t))return t;return ss(t,e)?[t]:Rs(Ql(t))}var Ga=xa;function Va(t,e,r){var n=t.length;r=r===a?n:r;return!e&&r>=n?t:Ta(t,e,r)}var Wa=Ce||function(t){return or.clearTimeout(t)};function Xa(t,e){if(e)return t.slice();var r=t.length,n=be?be(r):new t.constructor(r);t.copy(n);return n}function qa(t){var e=new t.constructor(t.byteLength);new _e(e).set(new _e(t));return e}function Ya(t,e){var r=e?qa(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function Za(t){var e=new t.constructor(t.source,Xt.exec(t));e.lastIndex=t.lastIndex;return e}function Ja(t){return yn?re(yn.call(t)):{}}function Qa(t,e){var r=e?qa(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Ka(t,e){if(t!==e){var r=t!==a,n=null===t,i=t===t,o=zl(t);var s=e!==a,u=null===e,c=e===e,l=zl(e);if(!u&&!l&&!o&&t>e||o&&s&&c&&!u&&!l||n&&s&&c||!r&&c||!i)return 1;if(!n&&!o&&!l&&t<e||l&&r&&i&&!n&&!o||u&&r&&i||!s&&i||!c)return-1}return 0}function $a(t,e,r){var n=-1,i=t.criteria,a=e.criteria,o=i.length,s=r.length;while(++n<o){var u=Ka(i[n],a[n]);if(u){if(n>=s)return u;var c=r[n];return u*("desc"==c?-1:1)}}return t.index-e.index}function to(t,e,n,i){var a=-1,o=t.length,s=n.length,u=-1,c=e.length,l=ke(o-s,0),h=r(c+l),f=!i;while(++u<c)h[u]=e[u];while(++a<s)if(f||a<o)h[n[a]]=t[a];while(l--)h[u++]=t[a++];return h}function eo(t,e,n,i){var a=-1,o=t.length,s=-1,u=n.length,c=-1,l=e.length,h=ke(o-u,0),f=r(h+l),p=!i;while(++a<h)f[a]=t[a];var d=a;while(++c<l)f[d+c]=e[c];while(++s<u)if(p||a<o)f[d+n[s]]=t[a++];return f}function ro(t,e){var n=-1,i=t.length;e||(e=r(i));while(++n<i)e[n]=t[n];return e}function no(t,e,r,n){var i=!r;r||(r={});var o=-1,s=e.length;while(++o<s){var u=e[o];var c=n?n(r[u],t[u],u,r,t):a;if(c===a)c=t[u];if(i)pi(r,u,c);else ui(r,u,c)}return r}function io(t,e){return no(t,Yo(t),e)}function ao(t,e){return no(t,Zo(t),e)}function oo(t,e){return function(r,n){var i=ol(r)?xr:li,a=e?e():{};return i(r,t,Go(n,2),a)}}function so(t){return xa(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:a,s=i>2?r[2]:a;o=t.length>3&&"function"==typeof o?(i--,o):a;if(s&&os(r[0],r[1],s)){o=i<3?a:o;i=1}e=re(e);while(++n<i){var u=r[n];if(u)t(e,u,n,o)}return e})}function uo(t,e){return function(r,n){if(null==r)return r;if(!ul(r))return t(r,n);var i=r.length,a=e?i:-1,o=re(r);while(e?a--:++a<i)if(false===n(o[a],a,o))break;return r}}function co(t){return function(e,r,n){var i=-1,a=re(e),o=n(e),s=o.length;while(s--){var u=o[t?s:++i];if(false===r(a[u],u,a))break}return e}}function lo(t,e,r){var n=e&y,i=po(t);function a(){var e=this&&this!==or&&this instanceof a?i:t;return e.apply(n?r:this,arguments)}return a}function ho(t){return function(e){e=Ql(e);var r=nn(e)?mn(e):a;var n=r?r[0]:e.charAt(0);var i=r?Va(r,1).join(""):e.slice(1);return n[t]()+i}}function fo(t){return function(e){return Rr(_f(Xh(e).replace(je,"")),t,"")}}function po(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Mn(t.prototype),n=t.apply(r,e);return wl(n)?n:r}}function vo(t,e,n){var i=po(t);function o(){var s=arguments.length,u=r(s),c=s,l=jo(o);while(c--)u[c]=arguments[c];var h=s<3&&u[0]!==l&&u[s-1]!==l?[]:cn(u,l);s-=h.length;if(s<n)return To(t,e,yo,o.placeholder,a,u,h,a,a,n-s);var f=this&&this!==or&&this instanceof o?i:t;return yr(f,this,u)}return o}function mo(t){return function(e,r,n){var i=re(e);if(!ul(e)){var o=Go(r,3);e=_h(e);r=function(t){return o(i[t],t,i)}}var s=t(e,r,n);return s>-1?i[o?e[s]:s]:a}}function go(t){return zo(function(e){var r=e.length,n=r,i=Sn.prototype.thru;if(t)e.reverse();while(n--){var o=e[n];if("function"!=typeof o)throw new ae(c);if(i&&!s&&"wrapper"==Ho(o))var s=new Sn([],true)}n=s?n:r;while(++n<r){o=e[n];var u=Ho(o),l="wrapper"==u?ko(o):a;if(l&&cs(l[0])&&l[1]==(S|b|M|T)&&!l[4].length&&1==l[9])s=s[Ho(l[0])].apply(s,l[3]);else s=1==o.length&&cs(o)?s[u]():s.thru(o)}return function(){var t=arguments,n=t[0];if(s&&1==t.length&&ol(n))return s.plant(n).value();var i=0,a=r?e[i].apply(this,t):n;while(++i<r)a=e[i].call(this,a);return a}})}function yo(t,e,n,i,o,s,u,c,l,h){var f=e&S,p=e&y,d=e&x,v=e&(b|w),m=e&A,g=d?a:po(t);function _(){var a=arguments.length,y=r(a),x=a;while(x--)y[x]=arguments[x];if(v)var b=jo(_),w=Kr(y,b);if(i)y=to(y,i,o,v);if(s)y=eo(y,s,u,v);a-=w;if(v&&a<h){var M=cn(y,b);return To(t,e,yo,_.placeholder,n,y,M,c,l,h-a)}var E=p?n:this,S=d?E[t]:t;a=y.length;if(c)y=bs(y,c);else if(m&&a>1)y.reverse();if(f&&l<a)y.length=l;if(this&&this!==or&&this instanceof _)S=g||po(S);return S.apply(E,y)}return _}function xo(t,e){return function(r,n){return Hi(r,t,e(n),{})}}function _o(t,e){return function(r,n){var i;if(r===a&&n===a)return e;if(r!==a)i=r;if(n!==a){if(i===a)return n;if("string"==typeof r||"string"==typeof n){r=Ia(r);n=Ia(n)}else{r=Pa(r);n=Pa(n)}i=t(r,n)}return i}}function bo(t){return zo(function(e){e=Tr(e,qr(Go()));return xa(function(r){var n=this;return t(e,function(t){return yr(t,n,r)})})})}function wo(t,e){e=e===a?" ":Ia(e);var r=e.length;if(r<2)return r?ya(e,t):e;var n=ya(e,Oe(t/vn(e)));return nn(e)?Va(mn(n),0,t).join(""):n.slice(0,t)}function Mo(t,e,n,i){var a=e&y,o=po(t);function s(){var e=-1,u=arguments.length,c=-1,l=i.length,h=r(l+u),f=this&&this!==or&&this instanceof s?o:t;while(++c<l)h[c]=i[c];while(u--)h[c++]=arguments[++e];return yr(f,a?n:this,h)}return s}function Eo(t){return function(e,r,n){if(n&&"number"!=typeof n&&os(e,r,n))r=n=a;e=Wl(e);if(r===a){r=e;e=0}else r=Wl(r);n=n===a?e<r?1:-1:Wl(n);return ga(e,r,n,t)}}function So(t){return function(e,r){if(!("string"==typeof e&&"string"==typeof r)){e=Yl(e);r=Yl(r)}return t(e,r)}}function To(t,e,r,n,i,o,s,u,c,l){var h=e&b,f=h?s:a,p=h?a:s,d=h?o:a,v=h?a:o;e|=h?M:E;e&=~(h?E:M);if(!(e&_))e&=~(y|x);var m=[t,e,i,d,f,v,p,u,c,l];var g=r.apply(a,m);if(cs(t))ws(g,m);g.placeholder=n;return Ss(g,t,e)}function Ao(t){var e=ee[t];return function(t,r){t=Yl(t);r=null==r?0:He(Xl(r),292);if(r){var n=(Ql(t)+"e").split("e"),i=e(n[0]+"e"+(+n[1]+r));n=(Ql(i)+"e").split("e");return+(n[0]+"e"+(+n[1]-r))}return e(t)}}var Ro=!(er&&1/hn(new er([,-0]))[1]==U)?zf:function(t){return new er(t)};function Lo(t){return function(e){var r=Jo(e);if(r==K)return sn(e);if(r==at)return fn(e);return Xr(e,t(e))}}function Co(t,e,r,n,i,o,s,u){var l=e&x;if(!l&&"function"!=typeof t)throw new ae(c);var h=n?n.length:0;if(!h){e&=~(M|E);n=i=a}s=s===a?s:ke(Xl(s),0);u=u===a?u:Xl(u);h-=i?i.length:0;if(e&E){var f=n,p=i;n=i=a}var d=l?a:ko(t);var v=[t,e,r,n,i,f,p,o,s,u];if(d)ms(v,d);t=v[0];e=v[1];r=v[2];n=v[3];i=v[4];u=v[9]=v[9]===a?l?0:t.length:ke(v[9]-h,0);if(!u&&e&(b|w))e&=~(b|w);if(!e||e==y)var m=lo(t,e,r);else if(e==b||e==w)m=vo(t,e,u);else if((e==M||e==(y|M))&&!i.length)m=Mo(t,e,r,n);else m=yo.apply(a,v);var g=d?Ma:ws;return Ss(g(m,v),t,e)}function Po(t,e,r,n){if(t===a||rl(t,ue[r])&&!he.call(n,r))return e;return t}function Io(t,e,r,n,i,o){if(wl(t)&&wl(e)){o.set(e,t);sa(t,e,a,Io,o);o["delete"](e)}return t}function Oo(t){return Il(t)?a:t}function No(t,e,r,n,i,o){var s=r&m,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return false;var l=o.get(t);if(l&&o.get(e))return l==e;var h=-1,f=true,p=r&g?new Yn:a;o.set(t,e);o.set(e,t);while(++h<u){var d=t[h],v=e[h];if(n)var y=s?n(v,d,h,e,t,o):n(d,v,h,t,e,o);if(y!==a){if(y)continue;f=false;break}if(p){if(!Cr(e,function(t,e){if(!Zr(p,e)&&(d===t||i(d,t,r,n,o)))return p.push(e)})){f=false;break}}else if(!(d===v||i(d,v,r,n,o))){f=false;break}}o["delete"](t);o["delete"](e);return f}function Uo(t,e,r,n,i,a,o){switch(r){case ft:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return false;t=t.buffer;e=e.buffer;case ht:if(t.byteLength!=e.byteLength||!a(new _e(t),new _e(e)))return false;return true;case X:case q:case $:return rl(+t,+e);case Z:return t.name==e.name&&t.message==e.message;case it:case ot:return t==e+"";case K:var s=sn;case at:var u=n&m;s||(s=hn);if(t.size!=e.size&&!u)return false;var c=o.get(t);if(c)return c==e;n|=g;o.set(t,e);var l=No(s(t),s(e),n,i,a,o);o["delete"](t);return l;case st:if(yn)return yn.call(t)==yn.call(e)}return false}function Do(t,e,r,n,i,o){var s=r&m,u=Bo(t),c=u.length,l=Bo(e),h=l.length;if(c!=h&&!s)return false;var f=c;while(f--){var p=u[f];if(!(s?p in e:he.call(e,p)))return false}var d=o.get(t);if(d&&o.get(e))return d==e;var v=true;o.set(t,e);o.set(e,t);var g=s;while(++f<c){p=u[f];var y=t[p],x=e[p];if(n)var _=s?n(x,y,p,e,t,o):n(y,x,p,t,e,o);if(!(_===a?y===x||i(y,x,r,n,o):_)){v=false;break}g||(g="constructor"==p)}if(v&&!g){var b=t.constructor,w=e.constructor;if(b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w))v=false}o["delete"](t);o["delete"](e);return v}function zo(t){return Es(xs(t,a,Xs),t+"")}function Bo(t){return Ni(t,_h,Yo)}function Fo(t){return Ni(t,bh,Zo)}var ko=!sr?zf:function(t){return sr.get(t)};function Ho(t){var e=t.name+"",r=ur[e],n=he.call(ur,e)?r.length:0;while(n--){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e}function jo(t){var e=he.call(bn,"placeholder")?bn:t;return e.placeholder}function Go(){var t=bn.iteratee||Cf;t=t===Cf?ta:t;return arguments.length?t(arguments[0],arguments[1]):t}function Vo(t,e){var r=t.__data__;return us(e)?r["string"==typeof e?"string":"hash"]:r.map}function Wo(t){var e=_h(t),r=e.length;while(r--){var n=e[r],i=t[n];e[r]=[n,i,ps(i)]}return e}function Xo(t,e){var r=rn(t,e);return Ji(r)?r:a}function qo(t){var e=he.call(t,Re),r=t[Re];try{t[Re]=a;var n=true}catch(t){}var i=de.call(t);if(n)if(e)t[Re]=r;else delete t[Re];return i}var Yo=!Ue?Xf:function(t){if(null==t)return[];t=re(t);return Mr(Ue(t),function(e){return Ee.call(t,e)})};var Zo=!Ue?Xf:function(t){var e=[];while(t){Ar(e,Yo(t));t=we(t)}return e};var Jo=Ui;if(Ke&&Jo(new Ke(new ArrayBuffer(1)))!=ft||$e&&Jo(new $e)!=K||tr&&Jo(tr.resolve())!=rt||er&&Jo(new er)!=at||ir&&Jo(new ir)!=ct)Jo=function(t){var e=Ui(t),r=e==et?t.constructor:a,n=r?Cs(r):"";if(n)switch(n){case lr:return ft;case hr:return K;case Pr:return rt;case Ir:return at;case Hr:return ct}return e};function Qo(t,e,r){var n=-1,i=r.length;while(++n<i){var a=r[n],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=He(e,t+o);break;case"takeRight":t=ke(t,e-o);break}}return{start:t,end:e}}function Ko(t){var e=t.match(Ht);return e?e[1].split(jt):[]}function $o(t,e,r){e=ja(e,t);var n=-1,i=e.length,a=false;while(++n<i){var o=Ls(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}if(a||++n!=i)return a;i=null==t?0:t.length;return!!i&&bl(i)&&as(o,i)&&(ol(t)||al(t))}function ts(t){var e=t.length,r=new t.constructor(e);if(e&&"string"==typeof t[0]&&he.call(t,"index")){r.index=t.index;r.input=t.input}return r}function es(t){return"function"==typeof t.constructor&&!fs(t)?Mn(we(t)):{}}function rs(t,e,r){var n=t.constructor;switch(e){case ht:return qa(t);case X:case q:return new n(+t);case ft:return Ya(t,r);case pt:case dt:case vt:case mt:case gt:case yt:case xt:case _t:case bt:return Qa(t,r);case K:return new n;case $:case ot:return new n(t);case it:return Za(t);case at:return new n;case st:return Ja(t)}}function ns(t,e){var r=e.length;if(!r)return t;var n=r-1;e[n]=(r>1?"& ":"")+e[n];e=e.join(r>2?", ":" ");return t.replace(kt,"{\n/* [wrapped with "+e+"] */\n")}function is(t){return ol(t)||al(t)||!!(Te&&t&&t[Te])}function as(t,e){var r=typeof t;e=null==e?D:e;return!!e&&("number"==r||"symbol"!=r&&Qt.test(t))&&t>-1&&t%1==0&&t<e}function os(t,e,r){if(!wl(r))return false;var n=typeof e;if("number"==n?ul(r)&&as(e,r.length):"string"==n&&e in r)return rl(r[e],t);return false}function ss(t,e){if(ol(t))return false;var r=typeof t;if("number"==r||"symbol"==r||"boolean"==r||null==t||zl(t))return true;return Ot.test(t)||!It.test(t)||null!=e&&t in re(e)}function us(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function cs(t){var e=Ho(t),r=bn[e];if("function"!=typeof r||!(e in Tn.prototype))return false;if(t===r)return true;var n=ko(r);return!!n&&t===n[0]}function ls(t){return!!pe&&pe in t}var hs=ce?xl:qf;function fs(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||ue;return t===r}function ps(t){return t===t&&!wl(t)}function ds(t,e){return function(r){if(null==r)return false;return r[t]===e&&(e!==a||t in re(r))}}function vs(t){var e=Bc(t,function(t){if(r.size===h)r.clear();return t});var r=e.cache;return e}function ms(t,e){var r=t[1],n=e[1],i=r|n,a=i<(y|x|S);var o=n==S&&r==b||n==S&&r==T&&t[7].length<=e[8]||n==(S|T)&&e[7].length<=e[8]&&r==b;if(!(a||o))return t;if(n&y){t[2]=e[2];i|=r&y?0:_}var s=e[3];if(s){var u=t[3];t[3]=u?to(u,s,e[4]):s;t[4]=u?cn(t[3],f):e[4]}s=e[5];if(s){u=t[5];t[5]=u?eo(u,s,e[6]):s;t[6]=u?cn(t[5],f):e[6]}s=e[7];if(s)t[7]=s;if(n&S)t[8]=null==t[8]?e[8]:He(t[8],e[8]);if(null==t[9])t[9]=e[9];t[0]=e[0];t[1]=i;return t}function gs(t){var e=[];if(null!=t)for(var r in re(t))e.push(r);return e}function ys(t){return de.call(t)}function xs(t,e,n){e=ke(e===a?t.length-1:e,0);return function(){var i=arguments,a=-1,o=ke(i.length-e,0),s=r(o);while(++a<o)s[a]=i[e+a];a=-1;var u=r(e+1);while(++a<e)u[a]=i[a];u[e]=n(s);return yr(t,this,u)}}function _s(t,e){return e.length<2?t:Oi(t,Ta(e,0,-1))}function bs(t,e){var r=t.length,n=He(e.length,r),i=ro(t);while(n--){var o=e[n];t[n]=as(o,r)?i[o]:a}return t}var ws=Ts(Ma);var Ms=Ie||function(t,e){return or.setTimeout(t,e)};var Es=Ts(Ea);function Ss(t,e,r){var n=e+"";return Es(t,ns(n,Ps(Ko(n),r)))}function Ts(t){var e=0,r=0;return function(){var n=Ve(),i=P-(n-r);r=n;if(i>0){if(++e>=C)return arguments[0]}else e=0;return t.apply(a,arguments)}}function As(t,e){var r=-1,n=t.length,i=n-1;e=e===a?n:e;while(++r<e){var o=ma(r,i),s=t[o];t[o]=t[r];t[r]=s}t.length=e;return t}var Rs=vs(function(t){var e=[];if(46===t.charCodeAt(0))e.push("");t.replace(Nt,function(t,r,n,i){e.push(n?i.replace(Vt,"$1"):r||t)});return e});function Ls(t){if("string"==typeof t||zl(t))return t;var e=t+"";return"0"==e&&1/t==-U?"-0":e}function Cs(t){if(null!=t){try{return le.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ps(t,e){_r(j,function(r){var n="_."+r[0];if(e&r[1]&&!Er(t,n))t.push(n)});return t.sort()}function Is(t){if(t instanceof Tn)return t.clone();var e=new Sn(t.__wrapped__,t.__chain__);e.__actions__=ro(t.__actions__);e.__index__=t.__index__;e.__values__=t.__values__;return e}function Os(t,e,n){if(n?os(t,e,n):e===a)e=1;else e=ke(Xl(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];var o=0,s=0,u=r(Oe(i/e));while(o<i)u[s++]=Ta(t,o,o+=e);return u}function Ns(t){var e=-1,r=null==t?0:t.length,n=0,i=[];while(++e<r){var a=t[e];if(a)i[n++]=a}return i}function Us(){var t=arguments.length;if(!t)return[];var e=r(t-1),n=arguments[0],i=t;while(i--)e[i-1]=arguments[i];return Ar(ol(n)?ro(n):[n],Ai(e,1))}var Ds=xa(function(t,e){return cl(t)?_i(t,Ai(e,1,cl,true)):[]});var zs=xa(function(t,e){var r=nu(e);if(cl(r))r=a;return cl(t)?_i(t,Ai(e,1,cl,true),Go(r,2)):[]});var Bs=xa(function(t,e){var r=nu(e);if(cl(r))r=a;return cl(t)?_i(t,Ai(e,1,cl,true),a,r):[]});function Fs(t,e,r){var n=null==t?0:t.length;if(!n)return[];e=r||e===a?1:Xl(e);return Ta(t,e<0?0:e,n)}function ks(t,e,r){var n=null==t?0:t.length;if(!n)return[];e=r||e===a?1:Xl(e);e=n-e;return Ta(t,0,e<0?0:e)}function Hs(t,e){return t&&t.length?Da(t,Go(e,3),true,true):[]}function js(t,e){return t&&t.length?Da(t,Go(e,3),true):[]}function Gs(t,e,r,n){var i=null==t?0:t.length;if(!i)return[];if(r&&"number"!=typeof r&&os(t,e,r)){r=0;n=i}return Si(t,e,r,n)}function Vs(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:Xl(r);if(i<0)i=ke(n+i,0);return Ur(t,Go(e,3),i)}function Ws(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n-1;if(r!==a){i=Xl(r);i=r<0?ke(n+i,0):He(i,n-1)}return Ur(t,Go(e,3),i,true)}function Xs(t){var e=null==t?0:t.length;return e?Ai(t,1):[]}function qs(t){var e=null==t?0:t.length;return e?Ai(t,U):[]}function Ys(t,e){var r=null==t?0:t.length;if(!r)return[];e=e===a?1:Xl(e);return Ai(t,e)}function Zs(t){var e=-1,r=null==t?0:t.length,n={};while(++e<r){var i=t[e];n[i[0]]=i[1]}return n}function Js(t){return t&&t.length?t[0]:a}function Qs(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:Xl(r);if(i<0)i=ke(n+i,0);return Dr(t,e,i)}function Ks(t){var e=null==t?0:t.length;return e?Ta(t,0,-1):[]}var $s=xa(function(t){var e=Tr(t,ka);return e.length&&e[0]===t[0]?ki(e):[]});var tu=xa(function(t){var e=nu(t),r=Tr(t,ka);if(e===nu(r))e=a;else r.pop();return r.length&&r[0]===t[0]?ki(r,Go(e,2)):[]});var eu=xa(function(t){var e=nu(t),r=Tr(t,ka);e="function"==typeof e?e:a;if(e)r.pop();return r.length&&r[0]===t[0]?ki(r,a,e):[]});function ru(t,e){return null==t?"":Be.call(t,e)}function nu(t){var e=null==t?0:t.length;return e?t[e-1]:a}function iu(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n;if(r!==a){i=Xl(r);i=i<0?ke(n+i,0):He(i,n-1)}return e===e?dn(t,e,i):Ur(t,Br,i,true)}function au(t,e){return t&&t.length?ca(t,Xl(e)):a}var ou=xa(su);function su(t,e){return t&&t.length&&e&&e.length?da(t,e):t}function uu(t,e,r){return t&&t.length&&e&&e.length?da(t,e,Go(r,2)):t}function cu(t,e,r){return t&&t.length&&e&&e.length?da(t,e,a,r):t}var lu=zo(function(t,e){var r=null==t?0:t.length,n=di(t,e);va(t,Tr(e,function(t){return as(t,r)?+t:t}).sort(Ka));return n});function hu(t,e){var r=[];if(!(t&&t.length))return r;var n=-1,i=[],a=t.length;e=Go(e,3);while(++n<a){var o=t[n];if(e(o,n,t)){r.push(o);i.push(n)}}va(t,i);return r}function fu(t){return null==t?t:qe.call(t)}function pu(t,e,r){var n=null==t?0:t.length;if(!n)return[];if(r&&"number"!=typeof r&&os(t,e,r)){e=0;r=n}else{e=null==e?0:Xl(e);r=r===a?n:Xl(r)}return Ta(t,e,r)}function du(t,e){return Ra(t,e)}function vu(t,e,r){return La(t,e,Go(r,2))}function mu(t,e){var r=null==t?0:t.length;if(r){var n=Ra(t,e);if(n<r&&rl(t[n],e))return n}return-1}function gu(t,e){return Ra(t,e,true)}function yu(t,e,r){return La(t,e,Go(r,2),true)}function xu(t,e){var r=null==t?0:t.length;if(r){var n=Ra(t,e,true)-1;if(rl(t[n],e))return n}return-1}function _u(t){return t&&t.length?Ca(t):[]}function bu(t,e){return t&&t.length?Ca(t,Go(e,2)):[]}function wu(t){var e=null==t?0:t.length;return e?Ta(t,1,e):[]}function Mu(t,e,r){if(!(t&&t.length))return[];e=r||e===a?1:Xl(e);return Ta(t,0,e<0?0:e)}function Eu(t,e,r){var n=null==t?0:t.length;if(!n)return[];e=r||e===a?1:Xl(e);e=n-e;return Ta(t,e<0?0:e,n)}function Su(t,e){return t&&t.length?Da(t,Go(e,3),false,true):[]}function Tu(t,e){return t&&t.length?Da(t,Go(e,3)):[]}var Au=xa(function(t){return Oa(Ai(t,1,cl,true))});var Ru=xa(function(t){var e=nu(t);if(cl(e))e=a;return Oa(Ai(t,1,cl,true),Go(e,2))});var Lu=xa(function(t){var e=nu(t);e="function"==typeof e?e:a;return Oa(Ai(t,1,cl,true),a,e)});function Cu(t){return t&&t.length?Oa(t):[]}function Pu(t,e){return t&&t.length?Oa(t,Go(e,2)):[]}function Iu(t,e){e="function"==typeof e?e:a;return t&&t.length?Oa(t,a,e):[]}function Ou(t){if(!(t&&t.length))return[];var e=0;t=Mr(t,function(t){if(cl(t)){e=ke(t.length,e);return true}});return Wr(e,function(e){return Tr(t,kr(e))})}function Nu(t,e){if(!(t&&t.length))return[];var r=Ou(t);if(null==e)return r;return Tr(r,function(t){return yr(e,a,t)})}var Uu=xa(function(t,e){return cl(t)?_i(t,e):[]});var Du=xa(function(t){return Ba(Mr(t,cl))});var zu=xa(function(t){var e=nu(t);if(cl(e))e=a;return Ba(Mr(t,cl),Go(e,2))});var Bu=xa(function(t){var e=nu(t);e="function"==typeof e?e:a;return Ba(Mr(t,cl),a,e)});var Fu=xa(Ou);function ku(t,e){return Fa(t||[],e||[],ui)}function Hu(t,e){return Fa(t||[],e||[],wa)}var ju=xa(function(t){var e=t.length,r=e>1?t[e-1]:a;r="function"==typeof r?(t.pop(),r):a;return Nu(t,r)});function Gu(t){var e=bn(t);e.__chain__=true;return e}function Vu(t,e){e(t);return t}function Wu(t,e){return e(t)}var Xu=zo(function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,i=function(e){return di(e,t)};if(e>1||this.__actions__.length||!(n instanceof Tn)||!as(r))return this.thru(i);n=n.slice(r,+r+(e?1:0));n.__actions__.push({func:Wu,args:[i],thisArg:a});return new Sn(n,this.__chain__).thru(function(t){if(e&&!t.length)t.push(a);return t})});function qu(){return Gu(this)}function Yu(){return new Sn(this.value(),this.__chain__)}function Zu(){if(this.__values__===a)this.__values__=Vl(this.value());var t=this.__index__>=this.__values__.length,e=t?a:this.__values__[this.__index__++];return{done:t,value:e}}function Ju(){return this}function Qu(t){var e,r=this;while(r instanceof En){var n=Is(r);n.__index__=0;n.__values__=a;if(e)i.__wrapped__=n;else e=n;var i=n;r=r.__wrapped__}i.__wrapped__=t;return e}function Ku(){var t=this.__wrapped__;if(t instanceof Tn){var e=t;if(this.__actions__.length)e=new Tn(this);e=e.reverse();e.__actions__.push({func:Wu,args:[fu],thisArg:a});return new Sn(e,this.__chain__)}return this.thru(fu)}function $u(){return za(this.__wrapped__,this.__actions__)}var tc=oo(function(t,e,r){if(he.call(t,r))++t[r];else pi(t,r,1)});function ec(t,e,r){var n=ol(t)?wr:Mi;if(r&&os(t,e,r))e=a;return n(t,Go(e,3))}function rc(t,e){var r=ol(t)?Mr:Ti;return r(t,Go(e,3))}var nc=mo(Vs);var ic=mo(Ws);function ac(t,e){return Ai(dc(t,e),1)}function oc(t,e){return Ai(dc(t,e),U)}function sc(t,e,r){r=r===a?1:Xl(r);return Ai(dc(t,e),r)}function uc(t,e){var r=ol(t)?_r:bi;return r(t,Go(e,3))}function cc(t,e){var r=ol(t)?br:wi;return r(t,Go(e,3))}var lc=oo(function(t,e,r){if(he.call(t,r))t[r].push(e);else pi(t,r,[e])});function hc(t,e,r,n){t=ul(t)?t:Fh(t);r=r&&!n?Xl(r):0;var i=t.length;if(r<0)r=ke(i+r,0);return Dl(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&Dr(t,e,r)>-1}var fc=xa(function(t,e,n){var i=-1,a="function"==typeof e,o=ul(t)?r(t.length):[];bi(t,function(t){o[++i]=a?yr(e,t,n):ji(t,e,n)});return o});var pc=oo(function(t,e,r){pi(t,r,e)});function dc(t,e){var r=ol(t)?Tr:ia;return r(t,Go(e,3))}function vc(t,e,r,n){if(null==t)return[];if(!ol(e))e=null==e?[]:[e];r=n?a:r;if(!ol(r))r=null==r?[]:[r];return la(t,e,r)}var mc=oo(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]});function gc(t,e,r){var n=ol(t)?Rr:jr,i=arguments.length<3;return n(t,Go(e,4),r,i,bi)}function yc(t,e,r){var n=ol(t)?Lr:jr,i=arguments.length<3;return n(t,Go(e,4),r,i,wi)}function xc(t,e){var r=ol(t)?Mr:Ti;return r(t,Fc(Go(e,3)))}function _c(t){var e=ol(t)?ii:_a;return e(t)}function bc(t,e,r){if(r?os(t,e,r):e===a)e=1;else e=Xl(e);var n=ol(t)?ai:ba;return n(t,e)}function wc(t){var e=ol(t)?oi:Sa;return e(t)}function Mc(t){if(null==t)return 0;if(ul(t))return Dl(t)?vn(t):t.length;var e=Jo(t);if(e==K||e==at)return t.size;return ea(t).length}function Ec(t,e,r){var n=ol(t)?Cr:Aa;if(r&&os(t,e,r))e=a;return n(t,Go(e,3))}var Sc=xa(function(t,e){if(null==t)return[];var r=e.length;if(r>1&&os(t,e[0],e[1]))e=[];else if(r>2&&os(e[0],e[1],e[2]))e=[e[0]];return la(t,Ai(e,1),[])});var Tc=Pe||function(){return or.Date.now()};function Ac(t,e){if("function"!=typeof e)throw new ae(c);t=Xl(t);return function(){if(--t<1)return e.apply(this,arguments)}}function Rc(t,e,r){e=r?a:e;e=t&&null==e?t.length:e;return Co(t,S,a,a,a,a,e)}function Lc(t,e){var r;if("function"!=typeof e)throw new ae(c);t=Xl(t);return function(){if(--t>0)r=e.apply(this,arguments);if(t<=1)e=a;return r}}var Cc=xa(function(t,e,r){var n=y;if(r.length){var i=cn(r,jo(Cc));n|=M}return Co(t,n,e,r,i)});var Pc=xa(function(t,e,r){var n=y|x;if(r.length){var i=cn(r,jo(Pc));n|=M}return Co(e,n,t,r,i)});function Ic(t,e,r){e=r?a:e;var n=Co(t,b,a,a,a,a,a,e);n.placeholder=Ic.placeholder;return n}function Oc(t,e,r){e=r?a:e;var n=Co(t,w,a,a,a,a,a,e);n.placeholder=Oc.placeholder;return n}function Nc(t,e,r){var n,i,o,s,u,l,h=0,f=false,p=false,d=true;if("function"!=typeof t)throw new ae(c);e=Yl(e)||0;if(wl(r)){f=!!r.leading;p="maxWait"in r;o=p?ke(Yl(r.maxWait)||0,e):o;d="trailing"in r?!!r.trailing:d}function v(e){var r=n,o=i;n=i=a;h=e;s=t.apply(o,r);return s}function m(t){h=t;u=Ms(x,e);return f?v(t):s}function g(t){var r=t-l,n=t-h,i=e-r;return p?He(i,o-n):i}function y(t){var r=t-l,n=t-h;return l===a||r>=e||r<0||p&&n>=o}function x(){var t=Tc();if(y(t))return _(t);u=Ms(x,g(t))}function _(t){u=a;if(d&&n)return v(t);n=i=a;return s}function b(){if(u!==a)Wa(u);h=0;n=l=i=u=a}function w(){return u===a?s:_(Tc())}function M(){var t=Tc(),r=y(t);n=arguments;i=this;l=t;if(r){if(u===a)return m(l);if(p){u=Ms(x,e);return v(l)}}if(u===a)u=Ms(x,e);return s}M.cancel=b;M.flush=w;return M}var Uc=xa(function(t,e){return xi(t,1,e)});var Dc=xa(function(t,e,r){return xi(t,Yl(e)||0,r)});function zc(t){return Co(t,A)}function Bc(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ae(c);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);r.cache=a.set(i,o)||a;return o};r.cache=new(Bc.Cache||jn);return r}Bc.Cache=jn;function Fc(t){if("function"!=typeof t)throw new ae(c);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function kc(t){return Lc(2,t)}var Hc=Ga(function(t,e){e=1==e.length&&ol(e[0])?Tr(e[0],qr(Go())):Tr(Ai(e,1),qr(Go()));var r=e.length;return xa(function(n){var i=-1,a=He(n.length,r);while(++i<a)n[i]=e[i].call(this,n[i]);return yr(t,this,n)})});var jc=xa(function(t,e){var r=cn(e,jo(jc));return Co(t,M,a,e,r)});var Gc=xa(function(t,e){var r=cn(e,jo(Gc));return Co(t,E,a,e,r)});var Vc=zo(function(t,e){return Co(t,T,a,a,a,e)});function Wc(t,e){if("function"!=typeof t)throw new ae(c);e=e===a?e:Xl(e);return xa(t,e)}function Xc(t,e){if("function"!=typeof t)throw new ae(c);e=null==e?0:ke(Xl(e),0);return xa(function(r){var n=r[e],i=Va(r,0,e);if(n)Ar(i,n);return yr(t,this,i)})}function qc(t,e,r){var n=true,i=true;if("function"!=typeof t)throw new ae(c);if(wl(r)){n="leading"in r?!!r.leading:n;i="trailing"in r?!!r.trailing:i}return Nc(t,e,{leading:n,maxWait:e,trailing:i})}function Yc(t){return Rc(t,1)}function Zc(t,e){return jc(Ha(e),t)}function Jc(){if(!arguments.length)return[];var t=arguments[0];return ol(t)?t:[t]}function Qc(t){return mi(t,v)}function Kc(t,e){e="function"==typeof e?e:a;return mi(t,v,e)}function $c(t){return mi(t,p|v)}function tl(t,e){e="function"==typeof e?e:a;return mi(t,p|v,e)}function el(t,e){return null==e||yi(t,e,_h(e))}function rl(t,e){return t===e||t!==t&&e!==e}var nl=So(Di);var il=So(function(t,e){return t>=e});var al=Gi(function(){return arguments}())?Gi:function(t){return Ml(t)&&he.call(t,"callee")&&!Ee.call(t,"callee")};var ol=r.isArray;var sl=fr?qr(fr):Vi;function ul(t){return null!=t&&bl(t.length)&&!xl(t)}function cl(t){return Ml(t)&&ul(t)}function ll(t){return true===t||false===t||Ml(t)&&Ui(t)==X}var hl=De||qf;var fl=pr?qr(pr):Wi;function pl(t){return Ml(t)&&1===t.nodeType&&!Il(t)}function dl(t){if(null==t)return true;if(ul(t)&&(ol(t)||"string"==typeof t||"function"==typeof t.splice||hl(t)||Bl(t)||al(t)))return!t.length;var e=Jo(t);if(e==K||e==at)return!t.size;if(fs(t))return!ea(t).length;for(var r in t)if(he.call(t,r))return false;return true}function vl(t,e){return Xi(t,e)}function ml(t,e,r){r="function"==typeof r?r:a;var n=r?r(t,e):a;return n===a?Xi(t,e,a,r):!!n}function gl(t){if(!Ml(t))return false;var e=Ui(t);return e==Z||e==Y||"string"==typeof t.message&&"string"==typeof t.name&&!Il(t)}function yl(t){return"number"==typeof t&&ze(t)}function xl(t){if(!wl(t))return false;var e=Ui(t);return e==J||e==Q||e==W||e==nt}function _l(t){return"number"==typeof t&&t==Xl(t)}function bl(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=D}function wl(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ml(t){return null!=t&&"object"==typeof t}var El=dr?qr(dr):Yi;function Sl(t,e){return t===e||Zi(t,e,Wo(e))}function Tl(t,e,r){r="function"==typeof r?r:a;return Zi(t,e,Wo(e),r)}function Al(t){return Pl(t)&&t!=+t}function Rl(t){if(hs(t))throw new i(u);return Ji(t)}function Ll(t){return null===t}function Cl(t){return null==t}function Pl(t){return"number"==typeof t||Ml(t)&&Ui(t)==$}function Il(t){if(!Ml(t)||Ui(t)!=et)return false;var e=we(t);if(null===e)return true;var r=he.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&le.call(r)==ve}var Ol=vr?qr(vr):Qi;function Nl(t){return _l(t)&&t>=-D&&t<=D}var Ul=mr?qr(mr):Ki;function Dl(t){return"string"==typeof t||!ol(t)&&Ml(t)&&Ui(t)==ot}function zl(t){return"symbol"==typeof t||Ml(t)&&Ui(t)==st}var Bl=gr?qr(gr):$i;function Fl(t){return t===a}function kl(t){return Ml(t)&&Jo(t)==ct}function Hl(t){return Ml(t)&&Ui(t)==lt}var jl=So(na);var Gl=So(function(t,e){return t<=e});function Vl(t){if(!t)return[];if(ul(t))return Dl(t)?mn(t):ro(t);if(Ae&&t[Ae])return on(t[Ae]());var e=Jo(t),r=e==K?sn:e==at?hn:Fh;return r(t)}function Wl(t){if(!t)return 0===t?t:0;t=Yl(t);if(t===U||t===-U){var e=t<0?-1:1;return e*z}return t===t?t:0}function Xl(t){var e=Wl(t),r=e%1;return e===e?r?e-r:e:0}function ql(t){return t?vi(Xl(t),0,F):0}function Yl(t){if("number"==typeof t)return t;if(zl(t))return B;if(wl(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=wl(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(zt,"");var r=Yt.test(t);return r||Jt.test(t)?nr(t.slice(2),r?2:8):qt.test(t)?B:+t}function Zl(t){return no(t,bh(t))}function Jl(t){return t?vi(Xl(t),-D,D):0===t?t:0}function Ql(t){return null==t?"":Ia(t)}var Kl=so(function(t,e){if(fs(e)||ul(e)){no(e,_h(e),t);return}for(var r in e)if(he.call(e,r))ui(t,r,e[r])});var $l=so(function(t,e){no(e,bh(e),t)});var th=so(function(t,e,r,n){no(e,bh(e),t,n)});var eh=so(function(t,e,r,n){no(e,_h(e),t,n)});var rh=zo(di);function nh(t,e){var r=Mn(t);return null==e?r:hi(r,e)}var ih=xa(function(t,e){t=re(t);var r=-1;var n=e.length;var i=n>2?e[2]:a;if(i&&os(e[0],e[1],i))n=1;while(++r<n){var o=e[r];var s=bh(o);var u=-1;var c=s.length;while(++u<c){var l=s[u];var h=t[l];if(h===a||rl(h,ue[l])&&!he.call(t,l))t[l]=o[l]}}return t});var ah=xa(function(t){t.push(a,Io);return yr(Sh,a,t)});function oh(t,e){return Nr(t,Go(e,3),Ci)}function sh(t,e){return Nr(t,Go(e,3),Pi)}function uh(t,e){return null==t?t:Ri(t,Go(e,3),bh)}function ch(t,e){return null==t?t:Li(t,Go(e,3),bh)}function lh(t,e){return t&&Ci(t,Go(e,3))}function hh(t,e){return t&&Pi(t,Go(e,3))}function fh(t){return null==t?[]:Ii(t,_h(t))}function ph(t){return null==t?[]:Ii(t,bh(t))}function dh(t,e,r){var n=null==t?a:Oi(t,e);return n===a?r:n}function vh(t,e){return null!=t&&$o(t,e,zi)}function mh(t,e){return null!=t&&$o(t,e,Bi)}var gh=xo(function(t,e,r){if(null!=e&&"function"!=typeof e.toString)e=de.call(e);t[e]=r},Sf(Lf));var yh=xo(function(t,e,r){if(null!=e&&"function"!=typeof e.toString)e=de.call(e);if(he.call(t,e))t[e].push(r);else t[e]=[r]},Go);var xh=xa(ji);function _h(t){return ul(t)?ni(t):ea(t)}function bh(t){return ul(t)?ni(t,true):ra(t)}function wh(t,e){var r={};e=Go(e,3);Ci(t,function(t,n,i){pi(r,e(t,n,i),t)});return r}function Mh(t,e){var r={};e=Go(e,3);Ci(t,function(t,n,i){pi(r,n,e(t,n,i))});return r}var Eh=so(function(t,e,r){sa(t,e,r)});var Sh=so(function(t,e,r,n){sa(t,e,r,n)});var Th=zo(function(t,e){var r={};if(null==t)return r;var n=false;e=Tr(e,function(e){e=ja(e,t);n||(n=e.length>1);return e});no(t,Fo(t),r);if(n)r=mi(r,p|d|v,Oo);var i=e.length;while(i--)Na(r,e[i]);return r});function Ah(t,e){return Lh(t,Fc(Go(e)))}var Rh=zo(function(t,e){return null==t?{}:ha(t,e)});function Lh(t,e){if(null==t)return{};var r=Tr(Fo(t),function(t){return[t]});e=Go(e);return fa(t,r,function(t,r){return e(t,r[0])})}function Ch(t,e,r){e=ja(e,t);var n=-1,i=e.length;if(!i){i=1;t=a}while(++n<i){var o=null==t?a:t[Ls(e[n])];if(o===a){n=i;o=r}t=xl(o)?o.call(t):o}return t}function Ph(t,e,r){return null==t?t:wa(t,e,r)}function Ih(t,e,r,n){n="function"==typeof n?n:a;return null==t?t:wa(t,e,r,n)}var Oh=Lo(_h);var Nh=Lo(bh);function Uh(t,e,r){var n=ol(t),i=n||hl(t)||Bl(t);e=Go(e,4);if(null==r){var a=t&&t.constructor;if(i)r=n?new a:[];else if(wl(t))r=xl(a)?Mn(we(t)):{};else r={}}(i?_r:Ci)(t,function(t,n,i){return e(r,t,n,i)});return r}function Dh(t,e){return null==t?true:Na(t,e)}function zh(t,e,r){return null==t?t:Ua(t,e,Ha(r))}function Bh(t,e,r,n){n="function"==typeof n?n:a;return null==t?t:Ua(t,e,Ha(r),n)}function Fh(t){return null==t?[]:Yr(t,_h(t))}function kh(t){return null==t?[]:Yr(t,bh(t))}function Hh(t,e,r){if(r===a){r=e;e=a}if(r!==a){r=Yl(r);r=r===r?r:0}if(e!==a){e=Yl(e);e=e===e?e:0}return vi(Yl(t),e,r)}function jh(t,e,r){e=Wl(e);if(r===a){r=e;e=0}else r=Wl(r);t=Yl(t);return Fi(t,e,r)}function Gh(t,e,r){if(r&&"boolean"!=typeof r&&os(t,e,r))e=r=a;if(r===a)if("boolean"==typeof e){r=e;e=a}else if("boolean"==typeof t){r=t;t=a}if(t===a&&e===a){t=0;e=1}else{t=Wl(t);if(e===a){e=t;t=0}else e=Wl(e)}if(t>e){var n=t;t=e;e=n}if(r||t%1||e%1){var i=Xe();return He(t+i*(e-t+rr("1e-"+((i+"").length-1))),e)}return ma(t,e)}var Vh=fo(function(t,e,r){e=e.toLowerCase();return t+(r?Wh(e):e)});function Wh(t){return xf(Ql(t).toLowerCase())}function Xh(t){t=Ql(t);return t&&t.replace(Kt,$r).replace(Ge,"")}function qh(t,e,r){t=Ql(t);e=Ia(e);var n=t.length;r=r===a?n:vi(Xl(r),0,n);var i=r;r-=e.length;return r>=0&&t.slice(r,i)==e}function Yh(t){t=Ql(t);return t&&Rt.test(t)?t.replace(Tt,tn):t}function Zh(t){t=Ql(t);return t&&Dt.test(t)?t.replace(Ut,"\\$&"):t}var Jh=fo(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()});var Qh=fo(function(t,e,r){return t+(r?" ":"")+e.toLowerCase()});var Kh=ho("toLowerCase");function $h(t,e,r){t=Ql(t);e=Xl(e);var n=e?vn(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return wo(Ne(i),r)+t+wo(Oe(i),r)}function tf(t,e,r){t=Ql(t);e=Xl(e);var n=e?vn(t):0;return e&&n<e?t+wo(e-n,r):t}function ef(t,e,r){t=Ql(t);e=Xl(e);var n=e?vn(t):0;return e&&n<e?wo(e-n,r)+t:t}function rf(t,e,r){if(r||null==e)e=0;else if(e)e=+e;return We(Ql(t).replace(Bt,""),e||0)}function nf(t,e,r){if(r?os(t,e,r):e===a)e=1;else e=Xl(e);return ya(Ql(t),e)}function af(){var t=arguments,e=Ql(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var of=fo(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()});function sf(t,e,r){if(r&&"number"!=typeof r&&os(t,e,r))e=r=a;r=r===a?F:r>>>0;if(!r)return[];t=Ql(t);if(t&&("string"==typeof e||null!=e&&!Ol(e))){e=Ia(e);if(!e&&nn(t))return Va(mn(t),0,r)}return t.split(e,r)}var uf=fo(function(t,e,r){return t+(r?" ":"")+xf(e)});function cf(t,e,r){t=Ql(t);r=null==r?0:vi(Xl(r),0,t.length);e=Ia(e);return t.slice(r,r+e.length)==e}function lf(t,e,r){var n=bn.templateSettings;if(r&&os(t,e,r))e=a;t=Ql(t);e=th({},e,n,Po);var i=th({},e.imports,n.imports,Po),o=_h(i),s=Yr(i,o);var u,c,l=0,h=e.interpolate||$t,f="__p += '";var p=ne((e.escape||$t).source+"|"+h.source+"|"+(h===Pt?Wt:$t).source+"|"+(e.evaluate||$t).source+"|$","g");var d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Ze+"]")+"\n";t.replace(p,function(e,r,n,i,a,o){n||(n=i);f+=t.slice(l,o).replace(te,en);if(r){u=true;f+="' +\n__e("+r+") +\n'"}if(a){c=true;f+="';\n"+a+";\n__p += '"}if(n)f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'";l=o+e.length;return e});f+="';\n";var v=e.variable;if(!v)f="with (obj) {\n"+f+"\n}\n";f=(c?f.replace(wt,""):f).replace(Mt,"$1").replace(Et,"$1;");f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=bf(function(){return Gt(o,d+"return "+f).apply(a,s)});m.source=f;if(gl(m))throw m;return m}function hf(t){return Ql(t).toLowerCase()}function ff(t){return Ql(t).toUpperCase()}function pf(t,e,r){t=Ql(t);if(t&&(r||e===a))return t.replace(zt,"");if(!t||!(e=Ia(e)))return t;var n=mn(t),i=mn(e),o=Jr(n,i),s=Qr(n,i)+1;return Va(n,o,s).join("")}function df(t,e,r){t=Ql(t);if(t&&(r||e===a))return t.replace(Ft,"");if(!t||!(e=Ia(e)))return t;var n=mn(t),i=Qr(n,mn(e))+1;return Va(n,0,i).join("")}function vf(t,e,r){t=Ql(t);if(t&&(r||e===a))return t.replace(Bt,"");if(!t||!(e=Ia(e)))return t;var n=mn(t),i=Jr(n,mn(e));return Va(n,i).join("")}function mf(t,e){var r=R,n=L;if(wl(e)){var i="separator"in e?e.separator:i;r="length"in e?Xl(e.length):r;n="omission"in e?Ia(e.omission):n}t=Ql(t);var o=t.length;if(nn(t)){var s=mn(t);o=s.length}if(r>=o)return t;var u=r-vn(n);if(u<1)return n;var c=s?Va(s,0,u).join(""):t.slice(0,u);if(i===a)return c+n;if(s)u+=c.length-u;if(Ol(i)){if(t.slice(u).search(i)){var l,h=c;if(!i.global)i=ne(i.source,Ql(Xt.exec(i))+"g");i.lastIndex=0;while(l=i.exec(h))var f=l.index;c=c.slice(0,f===a?u:f)}}else if(t.indexOf(Ia(i),u)!=u){var p=c.lastIndexOf(i);if(p>-1)c=c.slice(0,p)}return c+n}function gf(t){t=Ql(t);return t&&At.test(t)?t.replace(St,gn):t}var yf=fo(function(t,e,r){return t+(r?" ":"")+e.toUpperCase()});var xf=ho("toUpperCase");function _f(t,e,r){t=Ql(t);e=r?a:e;if(e===a)return an(t)?_n(t):Or(t);return t.match(e)||[]}var bf=xa(function(t,e){try{return yr(t,a,e)}catch(t){return gl(t)?t:new i(t)}});var wf=zo(function(t,e){_r(e,function(e){e=Ls(e);pi(t,e,Cc(t[e],t))});return t});function Mf(t){var e=null==t?0:t.length,r=Go();t=!e?[]:Tr(t,function(t){if("function"!=typeof t[1])throw new ae(c);return[r(t[0]),t[1]]});return xa(function(r){var n=-1;while(++n<e){var i=t[n];if(yr(i[0],this,r))return yr(i[1],this,r)}})}function Ef(t){return gi(mi(t,p))}function Sf(t){return function(){return t}}function Tf(t,e){return null==t||t!==t?e:t}var Af=go();var Rf=go(true);function Lf(t){return t}function Cf(t){return ta("function"==typeof t?t:mi(t,p))}function Pf(t){return aa(mi(t,p))}function If(t,e){return oa(t,mi(e,p))}var Of=xa(function(t,e){return function(r){return ji(r,t,e)}});var Nf=xa(function(t,e){return function(r){return ji(t,r,e)}});function Uf(t,e,r){var n=_h(e),i=Ii(e,n);if(null==r&&!(wl(e)&&(i.length||!n.length))){r=e;e=t;t=this;i=Ii(e,_h(e))}var a=!(wl(r)&&"chain"in r)||!!r.chain,o=xl(t);_r(i,function(r){var n=e[r];t[r]=n;if(o)t.prototype[r]=function(){var e=this.__chain__;if(a||e){var r=t(this.__wrapped__),i=r.__actions__=ro(this.__actions__);i.push({func:n,args:arguments,thisArg:t});r.__chain__=e;return r}return n.apply(t,Ar([this.value()],arguments))}});return t}function Df(){if(or._===this)or._=me;return this}function zf(){}function Bf(t){t=Xl(t);return xa(function(e){return ca(e,t)})}var Ff=bo(Tr);var kf=bo(wr);var Hf=bo(Cr);function jf(t){return ss(t)?kr(Ls(t)):pa(t)}function Gf(t){return function(e){return null==t?a:Oi(t,e)}}var Vf=Eo();var Wf=Eo(true);function Xf(){return[]}function qf(){return false}function Yf(){return{}}function Zf(){return""}function Jf(){return true}function Qf(t,e){t=Xl(t);if(t<1||t>D)return[];var r=F,n=He(t,F);e=Go(e);t-=F;var i=Wr(n,e);while(++r<t)e(r);return i}function Kf(t){if(ol(t))return Tr(t,Ls);return zl(t)?[t]:ro(Rs(Ql(t)))}function $f(t){var e=++fe;return Ql(t)+e}var tp=_o(function(t,e){return t+e},0);var ep=Ao("ceil");var rp=_o(function(t,e){return t/e},1);var np=Ao("floor");function ip(t){return t&&t.length?Ei(t,Lf,Di):a}function ap(t,e){return t&&t.length?Ei(t,Go(e,2),Di):a}function op(t){return Fr(t,Lf)}function sp(t,e){return Fr(t,Go(e,2))}function up(t){return t&&t.length?Ei(t,Lf,na):a}function cp(t,e){return t&&t.length?Ei(t,Go(e,2),na):a}var lp=_o(function(t,e){return t*e},1);var hp=Ao("round");var fp=_o(function(t,e){return t-e},0);function pp(t){return t&&t.length?Vr(t,Lf):0}function dp(t,e){return t&&t.length?Vr(t,Go(e,2)):0}bn.after=Ac;bn.ary=Rc;bn.assign=Kl;bn.assignIn=$l;bn.assignInWith=th;bn.assignWith=eh;bn.at=rh;bn.before=Lc;bn.bind=Cc;bn.bindAll=wf;bn.bindKey=Pc;bn.castArray=Jc;bn.chain=Gu;bn.chunk=Os;bn.compact=Ns;bn.concat=Us;bn.cond=Mf;bn.conforms=Ef;bn.constant=Sf;bn.countBy=tc;bn.create=nh;bn.curry=Ic;bn.curryRight=Oc;bn.debounce=Nc;bn.defaults=ih;bn.defaultsDeep=ah;bn.defer=Uc;bn.delay=Dc;bn.difference=Ds;bn.differenceBy=zs;bn.differenceWith=Bs;bn.drop=Fs;bn.dropRight=ks;bn.dropRightWhile=Hs;bn.dropWhile=js;bn.fill=Gs;bn.filter=rc;bn.flatMap=ac;bn.flatMapDeep=oc;bn.flatMapDepth=sc;bn.flatten=Xs;bn.flattenDeep=qs;bn.flattenDepth=Ys;bn.flip=zc;bn.flow=Af;bn.flowRight=Rf;bn.fromPairs=Zs;bn.functions=fh;bn.functionsIn=ph;bn.groupBy=lc;bn.initial=Ks;bn.intersection=$s;bn.intersectionBy=tu;bn.intersectionWith=eu;bn.invert=gh;bn.invertBy=yh;bn.invokeMap=fc;bn.iteratee=Cf;bn.keyBy=pc;bn.keys=_h;bn.keysIn=bh;bn.map=dc;bn.mapKeys=wh;bn.mapValues=Mh;bn.matches=Pf;bn.matchesProperty=If;bn.memoize=Bc;bn.merge=Eh;bn.mergeWith=Sh;bn.method=Of;bn.methodOf=Nf;bn.mixin=Uf;bn.negate=Fc;bn.nthArg=Bf;bn.omit=Th;bn.omitBy=Ah;bn.once=kc;bn.orderBy=vc;bn.over=Ff;bn.overArgs=Hc;bn.overEvery=kf;bn.overSome=Hf;bn.partial=jc;bn.partialRight=Gc;bn.partition=mc;bn.pick=Rh;bn.pickBy=Lh;bn.property=jf;bn.propertyOf=Gf;bn.pull=ou;bn.pullAll=su;bn.pullAllBy=uu;bn.pullAllWith=cu;bn.pullAt=lu;bn.range=Vf;bn.rangeRight=Wf;bn.rearg=Vc;bn.reject=xc;bn.remove=hu;bn.rest=Wc;bn.reverse=fu;bn.sampleSize=bc;bn.set=Ph;bn.setWith=Ih;bn.shuffle=wc;bn.slice=pu;bn.sortBy=Sc;bn.sortedUniq=_u;bn.sortedUniqBy=bu;bn.split=sf;bn.spread=Xc;bn.tail=wu;bn.take=Mu;bn.takeRight=Eu;bn.takeRightWhile=Su;bn.takeWhile=Tu;bn.tap=Vu;bn.throttle=qc;bn.thru=Wu;bn.toArray=Vl;bn.toPairs=Oh;bn.toPairsIn=Nh;bn.toPath=Kf;bn.toPlainObject=Zl;bn.transform=Uh;bn.unary=Yc;bn.union=Au;bn.unionBy=Ru;bn.unionWith=Lu;bn.uniq=Cu;bn.uniqBy=Pu;bn.uniqWith=Iu;bn.unset=Dh;bn.unzip=Ou;bn.unzipWith=Nu;bn.update=zh;bn.updateWith=Bh;bn.values=Fh;bn.valuesIn=kh;bn.without=Uu;bn.words=_f;bn.wrap=Zc;bn.xor=Du;bn.xorBy=zu;bn.xorWith=Bu;bn.zip=Fu;bn.zipObject=ku;bn.zipObjectDeep=Hu;bn.zipWith=ju;bn.entries=Oh;bn.entriesIn=Nh;bn.extend=$l;bn.extendWith=th;Uf(bn,bn);bn.add=tp;bn.attempt=bf;bn.camelCase=Vh;bn.capitalize=Wh;bn.ceil=ep;bn.clamp=Hh;bn.clone=Qc;bn.cloneDeep=$c;bn.cloneDeepWith=tl;bn.cloneWith=Kc;bn.conformsTo=el;bn.deburr=Xh;bn.defaultTo=Tf;bn.divide=rp;bn.endsWith=qh;bn.eq=rl;bn.escape=Yh;bn.escapeRegExp=Zh;bn.every=ec;bn.find=nc;bn.findIndex=Vs;bn.findKey=oh;bn.findLast=ic;bn.findLastIndex=Ws;bn.findLastKey=sh;bn.floor=np;bn.forEach=uc;bn.forEachRight=cc;bn.forIn=uh;bn.forInRight=ch;bn.forOwn=lh;bn.forOwnRight=hh;bn.get=dh;bn.gt=nl;bn.gte=il;bn.has=vh;bn.hasIn=mh;bn.head=Js;bn.identity=Lf;bn.includes=hc;bn.indexOf=Qs;bn.inRange=jh;bn.invoke=xh;bn.isArguments=al;bn.isArray=ol;bn.isArrayBuffer=sl;bn.isArrayLike=ul;bn.isArrayLikeObject=cl;bn.isBoolean=ll;bn.isBuffer=hl;bn.isDate=fl;bn.isElement=pl;bn.isEmpty=dl;bn.isEqual=vl;bn.isEqualWith=ml;bn.isError=gl;bn.isFinite=yl;bn.isFunction=xl;bn.isInteger=_l;bn.isLength=bl;bn.isMap=El;bn.isMatch=Sl;bn.isMatchWith=Tl;bn.isNaN=Al;bn.isNative=Rl;bn.isNil=Cl;bn.isNull=Ll;bn.isNumber=Pl;bn.isObject=wl;bn.isObjectLike=Ml;bn.isPlainObject=Il;bn.isRegExp=Ol;bn.isSafeInteger=Nl;bn.isSet=Ul;bn.isString=Dl;bn.isSymbol=zl;bn.isTypedArray=Bl;bn.isUndefined=Fl;bn.isWeakMap=kl;bn.isWeakSet=Hl;bn.join=ru;bn.kebabCase=Jh;bn.last=nu;bn.lastIndexOf=iu;bn.lowerCase=Qh;bn.lowerFirst=Kh;bn.lt=jl;bn.lte=Gl;bn.max=ip;bn.maxBy=ap;bn.mean=op;bn.meanBy=sp;bn.min=up;bn.minBy=cp;bn.stubArray=Xf;bn.stubFalse=qf;bn.stubObject=Yf;bn.stubString=Zf;bn.stubTrue=Jf;bn.multiply=lp;bn.nth=au;bn.noConflict=Df;bn.noop=zf;bn.now=Tc;bn.pad=$h;bn.padEnd=tf;bn.padStart=ef;bn.parseInt=rf;bn.random=Gh;bn.reduce=gc;bn.reduceRight=yc;bn.repeat=nf;bn.replace=af;bn.result=Ch;bn.round=hp;bn.runInContext=t;bn.sample=_c;bn.size=Mc;bn.snakeCase=of;bn.some=Ec;bn.sortedIndex=du;bn.sortedIndexBy=vu;bn.sortedIndexOf=mu;bn.sortedLastIndex=gu;bn.sortedLastIndexBy=yu;bn.sortedLastIndexOf=xu;bn.startCase=uf;bn.startsWith=cf;bn.subtract=fp;bn.sum=pp;bn.sumBy=dp;bn.template=lf;bn.times=Qf;bn.toFinite=Wl;bn.toInteger=Xl;bn.toLength=ql;bn.toLower=hf;bn.toNumber=Yl;bn.toSafeInteger=Jl;bn.toString=Ql;bn.toUpper=ff;bn.trim=pf;bn.trimEnd=df;bn.trimStart=vf;bn.truncate=mf;bn.unescape=gf;bn.uniqueId=$f;bn.upperCase=yf;bn.upperFirst=xf;bn.each=uc;bn.eachRight=cc;bn.first=Js;Uf(bn,function(){var t={};Ci(bn,function(e,r){if(!he.call(bn.prototype,r))t[r]=e});return t}(),{chain:false});bn.VERSION=o;_r(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){bn[t].placeholder=bn});_r(["drop","take"],function(t,e){Tn.prototype[t]=function(r){r=r===a?1:ke(Xl(r),0);var n=this.__filtered__&&!e?new Tn(this):this.clone();if(n.__filtered__)n.__takeCount__=He(r,n.__takeCount__);else n.__views__.push({size:He(r,F),type:t+(n.__dir__<0?"Right":"")});return n};Tn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}});_r(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r==I||r==N;Tn.prototype[t]=function(t){var e=this.clone();e.__iteratees__.push({iteratee:Go(t,3),type:r});e.__filtered__=e.__filtered__||n;return e}});_r(["head","last"],function(t,e){var r="take"+(e?"Right":"");Tn.prototype[t]=function(){return this[r](1).value()[0]}});_r(["initial","tail"],function(t,e){var r="drop"+(e?"":"Right");Tn.prototype[t]=function(){return this.__filtered__?new Tn(this):this[r](1)}});Tn.prototype.compact=function(){return this.filter(Lf)};Tn.prototype.find=function(t){return this.filter(t).head()};Tn.prototype.findLast=function(t){return this.reverse().find(t)};Tn.prototype.invokeMap=xa(function(t,e){if("function"==typeof t)return new Tn(this);return this.map(function(r){return ji(r,t,e)})});Tn.prototype.reject=function(t){return this.filter(Fc(Go(t)))};Tn.prototype.slice=function(t,e){t=Xl(t);var r=this;if(r.__filtered__&&(t>0||e<0))return new Tn(r);if(t<0)r=r.takeRight(-t);else if(t)r=r.drop(t);if(e!==a){e=Xl(e);r=e<0?r.dropRight(-e):r.take(e-t)}return r};Tn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()};Tn.prototype.toArray=function(){return this.take(F)};Ci(Tn.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),i=bn[n?"take"+("last"==e?"Right":""):e],o=n||/^find/.test(e);if(!i)return;bn.prototype[e]=function(){var e=this.__wrapped__,s=n?[1]:arguments,u=e instanceof Tn,c=s[0],l=u||ol(e);var h=function(t){var e=i.apply(bn,Ar([t],s));return n&&f?e[0]:e};if(l&&r&&"function"==typeof c&&1!=c.length)u=l=false;var f=this.__chain__,p=!!this.__actions__.length,d=o&&!f,v=u&&!p;if(!o&&l){e=v?e:new Tn(this);var m=t.apply(e,s);m.__actions__.push({func:Wu,args:[h],thisArg:a});return new Sn(m,f)}if(d&&v)return t.apply(this,s);m=this.thru(h);return d?n?m.value()[0]:m.value():m}});_r(["pop","push","shift","sort","splice","unshift"],function(t){var e=oe[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);bn.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(ol(i)?i:[],t)}return this[r](function(r){return e.apply(ol(r)?r:[],t)})}});Ci(Tn.prototype,function(t,e){var r=bn[e];if(r){var n=r.name+"",i=ur[n]||(ur[n]=[]);i.push({name:e,func:r})}});ur[yo(a,x).name]=[{name:"wrapper",func:a}];Tn.prototype.clone=An;Tn.prototype.reverse=Rn;Tn.prototype.value=Ln;bn.prototype.at=Xu;bn.prototype.chain=qu;bn.prototype.commit=Yu;bn.prototype.next=Zu;bn.prototype.plant=Qu;bn.prototype.reverse=Ku;bn.prototype.toJSON=bn.prototype.valueOf=bn.prototype.value=$u;bn.prototype.first=bn.prototype.head;if(Ae)bn.prototype[Ae]=Ju;return bn};var wn=bn();if(true){or._=wn;!(i=function(){return wn}.call(e,r,e,n),i!==a&&(n.exports=i))}else if(ur){(ur.exports=wn)._=wn;sr._=wn}else or._=wn}).call(this)}).call(e,r(97),r(67)(t))},198:function(t,e,r){t.exports=r(99)}},[182]);return{page:t.default}});